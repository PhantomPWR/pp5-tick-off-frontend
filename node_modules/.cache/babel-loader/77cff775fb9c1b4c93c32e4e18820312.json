{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from 'axios';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\nexport const useRedirect = userAuthStatus => {\n  _s();\n  const history = useHistory();\n  const currentUser = useCurrentUser();\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        await axios.post('/dj-rest-auth/token/refresh/');\n        // user IS logged in\n        if (userAuthStatus === 'loggedIn') {\n          const profileId = currentUser.profile_id;\n          history.push(`/profiles/${profileId}`);\n          // history.push('/');\n        }\n      } catch (err) {\n        // user is NOT logged in\n        if (userAuthStatus === 'loggedOut') {\n          history.push('/signin');\n        }\n      }\n    };\n    handleMount();\n  }, [history, userAuthStatus, currentUser]);\n};\n_s(useRedirect, \"aYM8ZFKAyp9JFcFlhpHTTZ47yKc=\", false, function () {\n  return [useHistory, useCurrentUser];\n});","map":{"version":3,"names":["axios","useEffect","useHistory","useCurrentUser","useRedirect","userAuthStatus","_s","history","currentUser","handleMount","post","profileId","profile_id","push","err"],"sources":["/workspace/pp5-tick-off-frontend/src/hooks/useRedirect.js"],"sourcesContent":["import axios from 'axios';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nexport const useRedirect = (userAuthStatus) => {\n  const history = useHistory();\n  const currentUser = useCurrentUser();\n\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        await axios.post('/dj-rest-auth/token/refresh/');\n        // user IS logged in\n        if (userAuthStatus === 'loggedIn') {\n          const profileId = currentUser.profile_id;\n          history.push(`/profiles/${profileId}`);\n          // history.push('/');\n        }\n      } catch (err) {\n        // user is NOT logged in\n        if (userAuthStatus === 'loggedOut') {\n          history.push('/signin');\n        }\n      }\n    };\n\n    handleMount();\n  }, [history, userAuthStatus, currentUser]);\n};"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,cAAc,QAAQ,gCAAgC;AAE/D,OAAO,MAAMC,WAAW,GAAIC,cAAc,IAAK;EAAAC,EAAA;EAC7C,MAAMC,OAAO,GAAGL,UAAU,CAAC,CAAC;EAC5B,MAAMM,WAAW,GAAGL,cAAc,CAAC,CAAC;EAEpCF,SAAS,CAAC,MAAM;IACd,MAAMQ,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMT,KAAK,CAACU,IAAI,CAAC,8BAA8B,CAAC;QAChD;QACA,IAAIL,cAAc,KAAK,UAAU,EAAE;UACjC,MAAMM,SAAS,GAAGH,WAAW,CAACI,UAAU;UACxCL,OAAO,CAACM,IAAI,CAAE,aAAYF,SAAU,EAAC,CAAC;UACtC;QACF;MACF,CAAC,CAAC,OAAOG,GAAG,EAAE;QACZ;QACA,IAAIT,cAAc,KAAK,WAAW,EAAE;UAClCE,OAAO,CAACM,IAAI,CAAC,SAAS,CAAC;QACzB;MACF;IACF,CAAC;IAEDJ,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACF,OAAO,EAAEF,cAAc,EAAEG,WAAW,CAAC,CAAC;AAC5C,CAAC;AAACF,EAAA,CAxBWF,WAAW;EAAA,QACNF,UAAU,EACNC,cAAc;AAAA"},"metadata":{},"sourceType":"module"}