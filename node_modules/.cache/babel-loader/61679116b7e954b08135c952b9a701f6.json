{"ast":null,"code":"export { i as context } from './index-deps.js';\nimport { c as commonjsGlobal, p as parse_1, l as lib$4, a as lib$6, j as jsonParse } from './fetch-deps.js';\nimport { _ as __awaiter$3, d as devUtils, p as parseBody, g as getPublicUrlFromRequest, N as NetworkError, l as lib$5, a as getCleanUrl } from './RequestHandler-deps.js';\nexport { R as RequestHandler, f as compose, c as createResponseComposition, e as defaultContext, b as defaultResponse, m as matchRequestUrl, r as response } from './RequestHandler-deps.js';\nimport { i as isStringEqual, R as RestHandler } from './rest-deps.js';\nexport { a as RESTMethods, R as RestHandler, r as rest, b as restContext } from './rest-deps.js';\nimport { t as tryCatch, p as parseGraphQLRequest, G as GraphQLHandler } from './graphql-deps.js';\nexport { G as GraphQLHandler, g as graphql, a as graphqlContext } from './graphql-deps.js';\nimport { m as mergeRight } from './errors-deps.js';\nimport require$$3 from 'debug';\nimport './xml-deps.js';\nvar lib$3 = {};\nvar StrictEventEmitter$1 = {};\nvar events = {\n  exports: {}\n};\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nevents.exports = EventEmitter;\nevents.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function () {\n    return defaultMaxListeners;\n  },\n  set: function (arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i) ReflectApply(listeners[i], this, args);\n  }\n  return true;\n};\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n  return target;\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n};\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n  return this;\n};\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this;\n\n  // not listening for removeListener, no need to emit\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n  listeners = events[type];\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n  return this;\n};\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n  if (events !== undefined) {\n    var evlistener = events[type];\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n  return 0;\n}\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i) copy[i] = arr[i];\n  return copy;\n}\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) list[index] = list[index + 1];\n  list.pop();\n}\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    }\n    eventTargetAgnosticAddListener(emitter, name, resolver, {\n      once: true\n    });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, {\n        once: true\n      });\n    }\n  });\n}\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\nvar __extends$1 = commonjsGlobal && commonjsGlobal.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArrays = commonjsGlobal && commonjsGlobal.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n};\nStrictEventEmitter$1.__esModule = true;\nStrictEventEmitter$1.StrictEventEmitter = void 0;\nvar events_1 = events.exports;\nvar StrictEventEmitter = /** @class */function (_super) {\n  __extends$1(StrictEventEmitter, _super);\n  function StrictEventEmitter() {\n    return _super.call(this) || this;\n  }\n  StrictEventEmitter.prototype.on = function (event, listener) {\n    return _super.prototype.on.call(this, event.toString(), listener);\n  };\n  StrictEventEmitter.prototype.once = function (event, listener) {\n    return _super.prototype.on.call(this, event.toString(), listener);\n  };\n  StrictEventEmitter.prototype.off = function (event, listener) {\n    return _super.prototype.off.call(this, event.toString(), listener);\n  };\n  StrictEventEmitter.prototype.emit = function (event) {\n    var data = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      data[_i - 1] = arguments[_i];\n    }\n    return _super.prototype.emit.apply(this, __spreadArrays([event.toString()], data));\n  };\n  StrictEventEmitter.prototype.addListener = function (event, listener) {\n    return _super.prototype.addListener.call(this, event.toString(), listener);\n  };\n  StrictEventEmitter.prototype.removeListener = function (event, listener) {\n    return _super.prototype.removeListener.call(this, event.toString(), listener);\n  };\n  return StrictEventEmitter;\n}(events_1.EventEmitter);\nStrictEventEmitter$1.StrictEventEmitter = StrictEventEmitter;\n(function (exports) {\n  var __createBinding = commonjsGlobal && commonjsGlobal.__createBinding || (Object.create ? function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    });\n  } : function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  });\n  exports.__esModule = true;\n  exports.StrictEventEmitter = void 0;\n  var StrictEventEmitter_1 = StrictEventEmitter$1;\n  __createBinding(exports, StrictEventEmitter_1, \"StrictEventEmitter\");\n})(lib$3);\nvar lib$2 = {};\nvar until$1 = {};\nObject.defineProperty(until$1, \"__esModule\", {\n  value: true\n});\n/**\n * Gracefully handles a given Promise factory.\n * @example\n * cosnt [error, data] = await until(() => asyncAction())\n */\nuntil$1.until = async promise => {\n  try {\n    const data = await promise().catch(error => {\n      throw error;\n    });\n    return [null, data];\n  } catch (error) {\n    return [error, null];\n  }\n};\nObject.defineProperty(lib$2, \"__esModule\", {\n  value: true\n});\nvar until_1$1 = until$1;\nvar until = lib$2.until = until_1$1.until;\n\n/**\r\n * Attempts to resolve a Service Worker instance from a given registration,\r\n * regardless of its state (active, installing, waiting).\r\n */\nconst getWorkerByRegistration = (registration, absoluteWorkerUrl, findWorker) => {\n  const allStates = [registration.active, registration.installing, registration.waiting];\n  const existingStates = allStates.filter(Boolean);\n  const mockWorker = existingStates.find(worker => {\n    return findWorker(worker.scriptURL, absoluteWorkerUrl);\n  });\n  return mockWorker || null;\n};\n\n/**\r\n * Returns an absolute Service Worker URL based on the given\r\n * relative URL (known during the registration).\r\n */\nfunction getAbsoluteWorkerUrl(relativeUrl) {\n  return new URL(relativeUrl, location.origin).href;\n}\n\n/**\r\n * Returns an active Service Worker instance.\r\n * When not found, registers a new Service Worker.\r\n */\nconst getWorkerInstance = function (url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let findWorker = arguments.length > 2 ? arguments[2] : undefined;\n  return __awaiter$3(void 0, void 0, void 0, function* () {\n    // Resolve the absolute Service Worker URL.\n    const absoluteWorkerUrl = getAbsoluteWorkerUrl(url);\n    const mockRegistrations = yield navigator.serviceWorker.getRegistrations().then(registrations => registrations.filter(registration => getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker)));\n    if (!navigator.serviceWorker.controller && mockRegistrations.length > 0) {\n      // Reload the page when it has associated workers, but no active controller.\n      // The absence of a controller can mean either:\n      // - page has no Service Worker associated with it\n      // - page has been hard-reloaded and its workers won't be used until the next reload.\n      // Since we've checked that there are registrations associated with this page,\n      // at this point we are sure it's hard reload that falls into this clause.\n      location.reload();\n    }\n    const [existingRegistration] = mockRegistrations;\n    if (existingRegistration) {\n      // When the Service Worker is registered, update it and return the reference.\n      return existingRegistration.update().then(() => {\n        return [getWorkerByRegistration(existingRegistration, absoluteWorkerUrl, findWorker), existingRegistration];\n      });\n    }\n    // When the Service Worker wasn't found, register it anew and return the reference.\n    const [error, instance] = yield until(() => __awaiter$3(void 0, void 0, void 0, function* () {\n      const registration = yield navigator.serviceWorker.register(url, options);\n      return [\n      // Compare existing worker registration by its worker URL,\n      // to prevent irrelevant workers to resolve here (such as Codesandbox worker).\n      getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker), registration];\n    }));\n    // Handle Service Worker registration errors.\n    if (error) {\n      const isWorkerMissing = error.message.includes('(404)');\n      // Produce a custom error message when given a non-existing Service Worker url.\n      // Suggest developers to check their setup.\n      if (isWorkerMissing) {\n        const scopeUrl = new URL((options === null || options === void 0 ? void 0 : options.scope) || '/', location.href);\n        throw new Error(devUtils.formatMessage(`\\\nFailed to register a Service Worker for scope ('${scopeUrl.href}') with script ('${absoluteWorkerUrl}'): Service Worker script does not exist at the given path.\n\nDid you forget to run \"npx msw init <PUBLIC_DIR>\"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`));\n      }\n      // Fallback error message for any other registration errors.\n      throw new Error(devUtils.formatMessage('Failed to register the Service Worker:\\n\\n%s', error.message));\n    }\n    return instance;\n  });\n};\n\n/**\r\n * Prints a worker activation message in the browser's console.\r\n */\nfunction printStartMessage() {\n  let args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (args.quiet) {\n    return;\n  }\n  const message = args.message || 'Mocking enabled.';\n  console.groupCollapsed(`%c${devUtils.formatMessage(message)}`, 'color:orangered;font-weight:bold;');\n  console.log('%cDocumentation: %chttps://mswjs.io/docs', 'font-weight:bold', 'font-weight:normal');\n  console.log('Found an issue? https://github.com/mswjs/msw/issues');\n  console.groupEnd();\n}\n\n/**\r\n * Signals the worker to enable the interception of requests.\r\n */\nfunction enableMocking(context, options) {\n  return __awaiter$3(this, void 0, void 0, function* () {\n    context.workerChannel.send('MOCK_ACTIVATE');\n    return context.events.once('MOCKING_ENABLED').then(() => {\n      printStartMessage({\n        quiet: options.quiet\n      });\n    });\n  });\n}\n\n/**\r\n * Creates a communication channel between the client\r\n * and the Service Worker associated with the given event.\r\n */\nconst createBroadcastChannel = event => {\n  const port = event.ports[0];\n  return {\n    /**\r\n     * Sends a text message to the connected Service Worker.\r\n     */\n    send(message) {\n      if (port) {\n        port.postMessage(message);\n      }\n    }\n  };\n};\nvar lib$1 = {};\nvar CookieStore = {};\nvar setCookie = {\n  exports: {}\n};\nvar defaultParseOptions = {\n  decodeValues: true,\n  map: false,\n  silent: false\n};\nfunction isNonEmptyString(str) {\n  return typeof str === \"string\" && !!str.trim();\n}\nfunction parseString(setCookieValue, options) {\n  var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n  var nameValue = parts.shift().split(\"=\");\n  var name = nameValue.shift();\n  var value = nameValue.join(\"=\"); // everything after the first =, joined by a \"=\" if there was more than one part\n\n  options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n  try {\n    value = options.decodeValues ? decodeURIComponent(value) : value; // decode cookie value\n  } catch (e) {\n    console.error(\"set-cookie-parser encountered an error while decoding a cookie with value '\" + value + \"'. Set options.decodeValues to false to disable this feature.\", e);\n  }\n  var cookie = {\n    name: name,\n    // grab everything before the first =\n    value: value\n  };\n  parts.forEach(function (part) {\n    var sides = part.split(\"=\");\n    var key = sides.shift().trimLeft().toLowerCase();\n    var value = sides.join(\"=\");\n    if (key === \"expires\") {\n      cookie.expires = new Date(value);\n    } else if (key === \"max-age\") {\n      cookie.maxAge = parseInt(value, 10);\n    } else if (key === \"secure\") {\n      cookie.secure = true;\n    } else if (key === \"httponly\") {\n      cookie.httpOnly = true;\n    } else if (key === \"samesite\") {\n      cookie.sameSite = value;\n    } else {\n      cookie[key] = value;\n    }\n  });\n  return cookie;\n}\nfunction parse$1(input, options) {\n  options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n  if (!input) {\n    if (!options.map) {\n      return [];\n    } else {\n      return {};\n    }\n  }\n  if (input.headers && input.headers[\"set-cookie\"]) {\n    // fast-path for node.js (which automatically normalizes header names to lower-case\n    input = input.headers[\"set-cookie\"];\n  } else if (input.headers) {\n    // slow-path for other environments - see #25\n    var sch = input.headers[Object.keys(input.headers).find(function (key) {\n      return key.toLowerCase() === \"set-cookie\";\n    })];\n    // warn if called on a request-like object with a cookie header rather than a set-cookie header - see #34, 36\n    if (!sch && input.headers.cookie && !options.silent) {\n      console.warn(\"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\");\n    }\n    input = sch;\n  }\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n  options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n  if (!options.map) {\n    return input.filter(isNonEmptyString).map(function (str) {\n      return parseString(str, options);\n    });\n  } else {\n    var cookies = {};\n    return input.filter(isNonEmptyString).reduce(function (cookies, str) {\n      var cookie = parseString(str, options);\n      cookies[cookie.name] = cookie;\n      return cookies;\n    }, cookies);\n  }\n}\n\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n\n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\nfunction splitCookiesString(cookiesString) {\n  if (Array.isArray(cookiesString)) {\n    return cookiesString;\n  }\n  if (typeof cookiesString !== \"string\") {\n    return [];\n  }\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos;\n        pos += 1;\n        skipWhitespace();\n        nextStart = pos;\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n\n        // currently special character\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          // we found cookies separator\n          cookiesSeparatorFound = true;\n          // pos is inside the next cookie, so back up and return it.\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n  return cookiesStrings;\n}\nsetCookie.exports = parse$1;\nsetCookie.exports.parse = parse$1;\nsetCookie.exports.parseString = parseString;\nsetCookie.exports.splitCookiesString = splitCookiesString;\n(function (exports) {\n  var __rest = commonjsGlobal && commonjsGlobal.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n  };\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.PERSISTENCY_KEY = void 0;\n  const set_cookie_parser_1 = setCookie.exports;\n  exports.PERSISTENCY_KEY = 'MSW_COOKIE_STORE';\n  const SUPPORTS_LOCAL_STORAGE = typeof localStorage !== 'undefined';\n  class CookieStore {\n    constructor() {\n      this.store = new Map();\n    }\n    /**\n     * Sets the given request cookies into the store.\n     * Respects the `request.credentials` policy.\n     */\n    add(request, response) {\n      if (request.credentials === 'omit') {\n        return;\n      }\n      const requestUrl = new URL(request.url);\n      const responseCookies = response.headers.get('set-cookie');\n      if (!responseCookies) {\n        return;\n      }\n      const now = Date.now();\n      const parsedResponseCookies = set_cookie_parser_1.parse(responseCookies).map(_a => {\n        var {\n            maxAge\n          } = _a,\n          cookie = __rest(_a, [\"maxAge\"]);\n        return Object.assign(Object.assign({}, cookie), {\n          expires: maxAge === undefined ? cookie.expires : new Date(now + maxAge * 1000),\n          maxAge\n        });\n      });\n      const prevCookies = this.store.get(requestUrl.origin) || new Map();\n      parsedResponseCookies.forEach(cookie => {\n        this.store.set(requestUrl.origin, prevCookies.set(cookie.name, cookie));\n      });\n    }\n    /**\n     * Returns cookies relevant to the given request\n     * and its `request.credentials` policy.\n     */\n    get(request) {\n      this.deleteExpiredCookies();\n      const requestUrl = new URL(request.url);\n      const originCookies = this.store.get(requestUrl.origin) || new Map();\n      switch (request.credentials) {\n        case 'include':\n          {\n            const documentCookies = set_cookie_parser_1.parse(document.cookie);\n            documentCookies.forEach(cookie => {\n              originCookies.set(cookie.name, cookie);\n            });\n            return originCookies;\n          }\n        case 'same-origin':\n          {\n            return originCookies;\n          }\n        default:\n          return new Map();\n      }\n    }\n    /**\n     * Returns a collection of all stored cookies.\n     */\n    getAll() {\n      this.deleteExpiredCookies();\n      return this.store;\n    }\n    /**\n     * Deletes all cookies associated with the given request.\n     */\n    deleteAll(request) {\n      const requestUrl = new URL(request.url);\n      this.store.delete(requestUrl.origin);\n    }\n    /**\n     * Clears the entire cookie store.\n     */\n    clear() {\n      this.store.clear();\n    }\n    /**\n     * Hydrates the virtual cookie store from the `localStorage` if defined.\n     */\n    hydrate() {\n      if (!SUPPORTS_LOCAL_STORAGE) {\n        return;\n      }\n      const persistedCookies = localStorage.getItem(exports.PERSISTENCY_KEY);\n      if (persistedCookies) {\n        try {\n          const parsedCookies = JSON.parse(persistedCookies);\n          parsedCookies.forEach(_ref => {\n            let [origin, cookies] = _ref;\n            this.store.set(origin, new Map(cookies.map(_a => {\n              var [token, _b] = _a,\n                {\n                  expires\n                } = _b,\n                cookie = __rest(_b, [\"expires\"]);\n              return [token, expires === undefined ? cookie : Object.assign(Object.assign({}, cookie), {\n                expires: new Date(expires)\n              })];\n            })));\n          });\n        } catch (error) {\n          console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key \"${exports.PERSISTENCY_KEY}\").\n\nStored value:\n${localStorage.getItem(exports.PERSISTENCY_KEY)}\n\nThrown exception:\n${error}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`);\n          localStorage.removeItem(exports.PERSISTENCY_KEY);\n        }\n      }\n    }\n    /**\n     * Persists the current virtual cookies into the `localStorage` if defined,\n     * so they are available on the next page load.\n     */\n    persist() {\n      if (!SUPPORTS_LOCAL_STORAGE) {\n        return;\n      }\n      const serializedCookies = Array.from(this.store.entries()).map(_ref2 => {\n        let [origin, cookies] = _ref2;\n        return [origin, Array.from(cookies.entries())];\n      });\n      localStorage.setItem(exports.PERSISTENCY_KEY, JSON.stringify(serializedCookies));\n    }\n    deleteExpiredCookies() {\n      const now = Date.now();\n      this.store.forEach((originCookies, origin) => {\n        originCookies.forEach(_ref3 => {\n          let {\n            expires,\n            name\n          } = _ref3;\n          if (expires !== undefined && expires.getTime() <= now) {\n            originCookies.delete(name);\n          }\n        });\n        if (originCookies.size === 0) {\n          this.store.delete(origin);\n        }\n      });\n    }\n  }\n  exports.default = new CookieStore();\n})(CookieStore);\n(function (exports) {\n  var __importDefault = commonjsGlobal && commonjsGlobal.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : {\n      \"default\": mod\n    };\n  };\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.PERSISTENCY_KEY = exports.store = void 0;\n  var CookieStore_1 = CookieStore;\n  Object.defineProperty(exports, \"store\", {\n    enumerable: true,\n    get: function () {\n      return __importDefault(CookieStore_1).default;\n    }\n  });\n  Object.defineProperty(exports, \"PERSISTENCY_KEY\", {\n    enumerable: true,\n    get: function () {\n      return CookieStore_1.PERSISTENCY_KEY;\n    }\n  });\n})(lib$1);\nfunction getAllCookies() {\n  return parse_1(document.cookie);\n}\n/**\r\n * Returns relevant document cookies based on the request `credentials` option.\r\n */\nfunction getRequestCookies(request) {\n  /**\r\n   * @note No cookies persist on the document in Node.js: no document.\r\n   */\n  if (typeof location === 'undefined') {\n    return {};\n  }\n  switch (request.credentials) {\n    case 'same-origin':\n      {\n        // Return document cookies only when requested a resource\n        // from the same origin as the current document.\n        return location.origin === request.url.origin ? getAllCookies() : {};\n      }\n    case 'include':\n      {\n        // Return all document cookies.\n        return getAllCookies();\n      }\n    default:\n      {\n        return {};\n      }\n  }\n}\nfunction setRequestCookies(request) {\n  var _a;\n  lib$1.store.hydrate();\n  request.cookies = Object.assign(Object.assign({}, getRequestCookies(request)), Array.from((_a = lib$1.store.get(Object.assign(Object.assign({}, request), {\n    url: request.url.toString()\n  }))) === null || _a === void 0 ? void 0 : _a.entries()).reduce((cookies, _ref4) => {\n    let [name, {\n      value\n    }] = _ref4;\n    return Object.assign(cookies, {\n      [name]: value\n    });\n  }, {}));\n  request.headers.set('cookie', Object.entries(request.cookies).map(_ref5 => {\n    let [name, value] = _ref5;\n    return `${name}=${value}`;\n  }).join('; '));\n}\n\n/**\r\n * Ensures that an empty GET request body is always represented as `undefined`.\r\n */\nfunction pruneGetRequestBody(request) {\n  if (request.method && isStringEqual(request.method, 'GET') && request.body === '') {\n    return undefined;\n  }\n  return request.body;\n}\n\n/**\r\n * Converts a given request received from the Service Worker\r\n * into a `MockedRequest` instance.\r\n */\nfunction parseWorkerRequest(rawRequest) {\n  const request = {\n    id: rawRequest.id,\n    cache: rawRequest.cache,\n    credentials: rawRequest.credentials,\n    method: rawRequest.method,\n    url: new URL(rawRequest.url),\n    referrer: rawRequest.referrer,\n    referrerPolicy: rawRequest.referrerPolicy,\n    redirect: rawRequest.redirect,\n    mode: rawRequest.mode,\n    params: {},\n    cookies: {},\n    integrity: rawRequest.integrity,\n    keepalive: rawRequest.keepalive,\n    destination: rawRequest.destination,\n    body: pruneGetRequestBody(rawRequest),\n    bodyUsed: rawRequest.bodyUsed,\n    headers: new lib$4.Headers(rawRequest.headers)\n  };\n  // Set document cookies on the request.\n  setRequestCookies(request);\n  // Parse the request's body based on the \"Content-Type\" header.\n  request.body = parseBody(request.body, request.headers);\n  return request;\n}\n\n/**\r\n * Returns a mocked response for a given request using following request handlers.\r\n */\nconst getResponse = (request, handlers, resolutionContext) => __awaiter$3(void 0, void 0, void 0, function* () {\n  const relevantHandlers = handlers.filter(handler => {\n    return handler.test(request, resolutionContext);\n  });\n  if (relevantHandlers.length === 0) {\n    return {\n      handler: undefined,\n      response: undefined\n    };\n  }\n  const result = yield relevantHandlers.reduce((executionResult, handler) => __awaiter$3(void 0, void 0, void 0, function* () {\n    const previousResults = yield executionResult;\n    if (!!(previousResults === null || previousResults === void 0 ? void 0 : previousResults.response)) {\n      return executionResult;\n    }\n    const result = yield handler.run(request, resolutionContext);\n    if (result === null || result.handler.shouldSkip) {\n      return null;\n    }\n    if (!result.response) {\n      return {\n        request: result.request,\n        handler: result.handler,\n        response: undefined,\n        parsedResult: result.parsedResult\n      };\n    }\n    if (result.response.once) {\n      handler.markAsSkipped(true);\n    }\n    return result;\n  }), Promise.resolve(null));\n  // Although reducing a list of relevant request handlers, it's possible\n  // that in the end there will be no handler associted with the request\n  // (i.e. if relevant handlers are fall-through).\n  if (!result) {\n    return {\n      handler: undefined,\n      response: undefined\n    };\n  }\n  return {\n    handler: result.handler,\n    publicRequest: result.request,\n    parsedRequest: result.parsedResult,\n    response: result.response\n  };\n});\nvar jsLevenshtein = function () {\n  function _min(d0, d1, d2, bx, ay) {\n    return d0 < d1 || d2 < d1 ? d0 > d2 ? d2 + 1 : d0 + 1 : bx === ay ? d1 : d1 + 1;\n  }\n  return function (a, b) {\n    if (a === b) {\n      return 0;\n    }\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n    var la = a.length;\n    var lb = b.length;\n    while (la > 0 && a.charCodeAt(la - 1) === b.charCodeAt(lb - 1)) {\n      la--;\n      lb--;\n    }\n    var offset = 0;\n    while (offset < la && a.charCodeAt(offset) === b.charCodeAt(offset)) {\n      offset++;\n    }\n    la -= offset;\n    lb -= offset;\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n    var vector = [];\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n    var len = vector.length - 1;\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = x += 4;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n    return dd;\n  };\n}();\nconst MAX_MATCH_SCORE = 3;\nconst MAX_SUGGESTION_COUNT = 4;\nconst TYPE_MATCH_DELTA = 0.5;\nfunction groupHandlersByType(handlers) {\n  return handlers.reduce((groups, handler) => {\n    if (handler instanceof RestHandler) {\n      groups.rest.push(handler);\n    }\n    if (handler instanceof GraphQLHandler) {\n      groups.graphql.push(handler);\n    }\n    return groups;\n  }, {\n    rest: [],\n    graphql: []\n  });\n}\nfunction getScoreForRestHandler() {\n  return (request, handler) => {\n    const {\n      path,\n      method\n    } = handler.info;\n    if (path instanceof RegExp) {\n      return Infinity;\n    }\n    const hasSameMethod = isStringEqual(request.method, method);\n    // Always treat a handler with the same method as a more similar one.\n    const methodScoreDelta = hasSameMethod ? TYPE_MATCH_DELTA : 0;\n    const requestPublicUrl = getPublicUrlFromRequest(request);\n    const score = jsLevenshtein(requestPublicUrl, path);\n    return score - methodScoreDelta;\n  };\n}\nfunction getScoreForGraphQLHandler(parsedQuery) {\n  return (_, handler) => {\n    if (typeof parsedQuery.operationName === 'undefined') {\n      return Infinity;\n    }\n    const {\n      operationType,\n      operationName\n    } = handler.info;\n    const hasSameOperationType = parsedQuery.operationType === operationType;\n    // Always treat a handler with the same operation type as a more similar one.\n    const operationTypeScoreDelta = hasSameOperationType ? TYPE_MATCH_DELTA : 0;\n    const score = jsLevenshtein(parsedQuery.operationName, operationName);\n    return score - operationTypeScoreDelta;\n  };\n}\nfunction getSuggestedHandler(request, handlers, getScore) {\n  const suggestedHandlers = handlers.reduce((acc, handler) => {\n    const score = getScore(request, handler);\n    return acc.concat([[score, handler]]);\n  }, []).sort((_ref6, _ref7) => {\n    let [leftScore] = _ref6;\n    let [rightScore] = _ref7;\n    return leftScore - rightScore;\n  }).filter(_ref8 => {\n    let [score] = _ref8;\n    return score <= MAX_MATCH_SCORE;\n  }).slice(0, MAX_SUGGESTION_COUNT).map(_ref9 => {\n    let [, handler] = _ref9;\n    return handler;\n  });\n  return suggestedHandlers;\n}\nfunction getSuggestedHandlersMessage(handlers) {\n  if (handlers.length > 1) {\n    return `\\\nDid you mean to request one of the following resources instead?\n\n${handlers.map(handler => `  • ${handler.info.header}`).join('\\n')}`;\n  }\n  return `Did you mean to request \"${handlers[0].info.header}\" instead?`;\n}\nfunction onUnhandledRequest(request, handlers) {\n  let strategy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'warn';\n  if (typeof strategy === 'function') {\n    strategy(request);\n    return;\n  }\n  /**\r\n   * @note Ignore exceptions during GraphQL request parsing because at this point\r\n   * we cannot assume the unhandled request is a valid GraphQL request.\r\n   * If the GraphQL parsing fails, just don't treat it as a GraphQL request.\r\n   */\n  const parsedGraphQLQuery = tryCatch(() => parseGraphQLRequest(request));\n  const handlerGroups = groupHandlersByType(handlers);\n  const relevantHandlers = parsedGraphQLQuery ? handlerGroups.graphql : handlerGroups.rest;\n  const suggestedHandlers = getSuggestedHandler(request, relevantHandlers, parsedGraphQLQuery ? getScoreForGraphQLHandler(parsedGraphQLQuery) : getScoreForRestHandler());\n  const handlerSuggestion = suggestedHandlers.length > 0 ? getSuggestedHandlersMessage(suggestedHandlers) : '';\n  const publicUrl = getPublicUrlFromRequest(request);\n  const requestHeader = parsedGraphQLQuery ? `${parsedGraphQLQuery.operationType} ${parsedGraphQLQuery.operationName} (${request.method} ${publicUrl})` : `${request.method} ${publicUrl}`;\n  const messageTemplate = [`captured a request without a matching request handler:`, `  \\u2022 ${requestHeader}`, handlerSuggestion, `\\\nIf you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks\\\n`].filter(Boolean);\n  const message = messageTemplate.join('\\n\\n');\n  switch (strategy) {\n    case 'error':\n      {\n        // Print a developer-friendly error.\n        devUtils.error('Error: %s', message);\n        // Throw an exception to halt request processing and not perform the original request.\n        throw new Error('Cannot bypass a request when using the \"error\" strategy for the \"onUnhandledRequest\" option.');\n      }\n    case 'warn':\n      {\n        devUtils.warn('Warning: %s', message);\n        break;\n      }\n    case 'bypass':\n      break;\n    default:\n      throw new Error(devUtils.formatMessage('Failed to react to an unhandled request: unknown strategy \"%s\". Please provide one of the supported strategies (\"bypass\", \"warn\", \"error\") or a custom callback function as the value of the \"onUnhandledRequest\" option.', strategy));\n  }\n}\nfunction readResponseCookies(request, response) {\n  lib$1.store.add(Object.assign(Object.assign({}, request), {\n    url: request.url.toString()\n  }), response);\n  lib$1.store.persist();\n}\nfunction handleRequest(request, handlers, options, emitter, handleRequestOptions) {\n  var _a, _b, _c;\n  return __awaiter$3(this, void 0, void 0, function* () {\n    emitter.emit('request:start', request);\n    // Perform bypassed requests (i.e. issued via \"ctx.fetch\") as-is.\n    if (request.headers.get('x-msw-bypass')) {\n      emitter.emit('request:end', request);\n      (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, request);\n      return;\n    }\n    // Resolve a mocked response from the list of request handlers.\n    const lookupResult = yield getResponse(request, handlers, handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.resolutionContext);\n    const {\n      handler,\n      response\n    } = lookupResult;\n    // When there's no handler for the request, consider it unhandled.\n    // Allow the developer to react to such cases.\n    if (!handler) {\n      onUnhandledRequest(request, handlers, options.onUnhandledRequest);\n      emitter.emit('request:unhandled', request);\n      emitter.emit('request:end', request);\n      (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, request);\n      return;\n    }\n    // When the handled request returned no mocked response, warn the developer,\n    // as it may be an oversight on their part. Perform the request as-is.\n    if (!response) {\n      devUtils.warn('Expected a mocking resolver function to return a mocked response Object, but got: %s. Original response is going to be used instead.', response);\n      emitter.emit('request:end', request);\n      (_c = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _c === void 0 ? void 0 : _c.call(handleRequestOptions, request);\n      return;\n    }\n    // Store all the received response cookies in the virtual cookie store.\n    readResponseCookies(request, response);\n    emitter.emit('request:match', request);\n    return new Promise(resolve => {\n      var _a, _b, _c;\n      const requiredLookupResult = lookupResult;\n      const transformedResponse = ((_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.transformResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, response)) || response;\n      (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, transformedResponse, requiredLookupResult);\n      setTimeout(() => {\n        var _a;\n        (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponseSent) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, transformedResponse, requiredLookupResult);\n        emitter.emit('request:end', request);\n        resolve(transformedResponse);\n      }, (_c = response.delay) !== null && _c !== void 0 ? _c : 0);\n    });\n  });\n}\nconst createRequestListener = (context, options) => {\n  return (event, message) => __awaiter$3(void 0, void 0, void 0, function* () {\n    const channel = createBroadcastChannel(event);\n    try {\n      const request = parseWorkerRequest(message.payload);\n      yield handleRequest(request, context.requestHandlers, options, context.emitter, {\n        transformResponse(response) {\n          return Object.assign(Object.assign({}, response), {\n            headers: response.headers.all()\n          });\n        },\n        onBypassResponse() {\n          return channel.send({\n            type: 'MOCK_NOT_FOUND'\n          });\n        },\n        onMockedResponse(response) {\n          channel.send({\n            type: 'MOCK_SUCCESS',\n            payload: response\n          });\n        },\n        onMockedResponseSent(response, _ref10) {\n          let {\n            handler,\n            publicRequest,\n            parsedRequest\n          } = _ref10;\n          if (!options.quiet) {\n            handler.log(publicRequest, response, handler, parsedRequest);\n          }\n        }\n      });\n    } catch (error) {\n      if (error instanceof NetworkError) {\n        // Treat emulated network error differently,\n        // as it is an intended exception in a request handler.\n        return channel.send({\n          type: 'NETWORK_ERROR',\n          payload: {\n            name: error.name,\n            message: error.message\n          }\n        });\n      }\n      // Treat all the other exceptions in a request handler\n      // as unintended, alerting that there is a problem needs fixing.\n      channel.send({\n        type: 'INTERNAL_ERROR',\n        payload: {\n          status: 500,\n          body: JSON.stringify({\n            errorType: error.constructor.name,\n            message: error.message,\n            location: error.stack\n          })\n        }\n      });\n    }\n  });\n};\nfunction requestIntegrityCheck(context, serviceWorker) {\n  return __awaiter$3(this, void 0, void 0, function* () {\n    // Signal Service Worker to report back its integrity\n    context.workerChannel.send('INTEGRITY_CHECK_REQUEST');\n    const {\n      payload: actualChecksum\n    } = yield context.events.once('INTEGRITY_CHECK_RESPONSE');\n    // Compare the response from the Service Worker and the\n    // global variable set by Rollup during the build.\n    if (actualChecksum !== \"f0a916b13c8acc2b526a03a6d26df85f\") {\n      throw new Error(`Currently active Service Worker (${actualChecksum}) is behind the latest published one (${\"f0a916b13c8acc2b526a03a6d26df85f\"}).`);\n    }\n    return serviceWorker;\n  });\n}\n\n/**\r\n * Intercepts and defers any requests on the page\r\n * until the Service Worker instance is ready.\r\n * Must only be used in a browser.\r\n */\nfunction deferNetworkRequestsUntil(predicatePromise) {\n  var _this2 = this;\n  // Defer any `XMLHttpRequest` requests until the Service Worker is ready.\n  const originalXhrSend = window.XMLHttpRequest.prototype.send;\n  window.XMLHttpRequest.prototype.send = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    // Keep this function synchronous to comply with `XMLHttpRequest.prototype.send`,\n    // because that method is always synchronous.\n    until(() => predicatePromise).then(() => {\n      window.XMLHttpRequest.prototype.send = originalXhrSend;\n      this.send(...args);\n    });\n  };\n  // Defer any `fetch` requests until the Service Worker is ready.\n  const originalFetch = window.fetch;\n  window.fetch = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return __awaiter$3(_this2, void 0, void 0, function* () {\n      yield until(() => predicatePromise);\n      window.fetch = originalFetch;\n      return window.fetch(...args);\n    });\n  };\n}\nfunction createResponseListener(context) {\n  return (_, message) => {\n    var _a;\n    const {\n      payload: responseJson\n    } = message;\n    /**\r\n     * CORS requests with `mode: \"no-cors\"` result in \"opaque\" responses.\r\n     * That kind of responses cannot be manipulated in JavaScript due\r\n     * to the security considerations.\r\n     * @see https://fetch.spec.whatwg.org/#concept-filtered-response-opaque\r\n     * @see https://github.com/mswjs/msw/issues/529\r\n     */\n    if ((_a = responseJson.type) === null || _a === void 0 ? void 0 : _a.includes('opaque')) {\n      return;\n    }\n    const response = new Response(responseJson.body || null, responseJson);\n    const isMockedResponse = response.headers.get('x-powered-by') === 'msw';\n    if (isMockedResponse) {\n      context.emitter.emit('response:mocked', response, responseJson.requestId);\n    } else {\n      context.emitter.emit('response:bypass', response, responseJson.requestId);\n    }\n  };\n}\nfunction validateWorkerScope(registration, options) {\n  if (!(options === null || options === void 0 ? void 0 : options.quiet) && !location.href.startsWith(registration.scope)) {\n    devUtils.warn(`\\\nCannot intercept requests on this page because it's outside of the worker's scope (\"${registration.scope}\"). If you wish to mock API requests on this page, you must resolve this scope issue.\n\n- (Recommended) Register the worker at the root level (\"/\") of your application.\n- Set the \"Service-Worker-Allowed\" response header to allow out-of-scope workers.\\\n`);\n  }\n}\nconst createStartHandler = context => {\n  return function start(options, customOptions) {\n    const startWorkerInstance = () => __awaiter$3(this, void 0, void 0, function* () {\n      // Remove all previously existing event listeners.\n      // This way none of the listeners persists between Fast refresh\n      // of the application's code.\n      context.events.removeAllListeners();\n      // Handle requests signaled by the worker.\n      context.workerChannel.on('REQUEST', createRequestListener(context, options));\n      context.workerChannel.on('RESPONSE', createResponseListener(context));\n      const instance = yield getWorkerInstance(options.serviceWorker.url, options.serviceWorker.options, options.findWorker);\n      const [worker, registration] = instance;\n      if (!worker) {\n        const missingWorkerMessage = (customOptions === null || customOptions === void 0 ? void 0 : customOptions.findWorker) ? devUtils.formatMessage(`Failed to locate the Service Worker registration using a custom \"findWorker\" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at \"%s\".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n`, options.serviceWorker.url) : devUtils.formatMessage(`Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL \"%s\" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom \"serviceWorker.url\" option to point to the actual worker script location, or a custom \"findWorker\" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start`, options.serviceWorker.url, location.host);\n        throw new Error(missingWorkerMessage);\n      }\n      context.worker = worker;\n      context.registration = registration;\n      context.events.addListener(window, 'beforeunload', () => {\n        if (worker.state !== 'redundant') {\n          // Notify the Service Worker that this client has closed.\n          // Internally, it's similar to disabling the mocking, only\n          // client close event has a handler that self-terminates\n          // the Service Worker when there are no open clients.\n          context.workerChannel.send('CLIENT_CLOSED');\n        }\n        // Make sure we're always clearing the interval - there are reports that not doing this can\n        // cause memory leaks in headless browser environments.\n        window.clearInterval(context.keepAliveInterval);\n      });\n      // Check if the active Service Worker is the latest published one\n      const [integrityError] = yield until(() => requestIntegrityCheck(context, worker));\n      if (integrityError) {\n        devUtils.error(`\\\nDetected outdated Service Worker: ${integrityError.message}\n\nThe mocking is still enabled, but it's highly recommended that you update your Service Worker by running:\n\n$ npx msw init <PUBLIC_DIR>\n\nThis is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.\nIf this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues\\\n      `);\n      }\n      yield enableMocking(context, options).catch(err => {\n        throw new Error(`Failed to enable mocking: ${err === null || err === void 0 ? void 0 : err.message}`);\n      });\n      context.keepAliveInterval = window.setInterval(() => context.workerChannel.send('KEEPALIVE_REQUEST'), 5000);\n      // Warn the user when loading the page that lies outside\n      // of the worker's scope.\n      validateWorkerScope(registration, context.startOptions);\n      return registration;\n    });\n    const workerRegistration = startWorkerInstance();\n    // Defer any network requests until the Service Worker instance is ready.\n    // This prevents a race condition between the Service Worker registration\n    // and application's runtime requests (i.e. requests on mount).\n    if (options.waitUntilReady) {\n      deferNetworkRequestsUntil(workerRegistration);\n    }\n    return workerRegistration;\n  };\n};\nfunction printStopMessage() {\n  let args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (args.quiet) {\n    return;\n  }\n  console.log(`%c${devUtils.formatMessage('Mocking disabled.')}`, 'color:orangered;font-weight:bold;');\n}\nconst createStop = context => {\n  return function stop() {\n    var _a;\n    /**\r\n     * Signal the Service Worker to disable mocking for this client.\r\n     * Use this an an explicit way to stop the mocking, while preserving\r\n     * the worker-client relation. Does not affect the worker's lifecycle.\r\n     */\n    context.workerChannel.send('MOCK_DEACTIVATE');\n    window.clearInterval(context.keepAliveInterval);\n    printStopMessage({\n      quiet: (_a = context.startOptions) === null || _a === void 0 ? void 0 : _a.quiet\n    });\n  };\n};\nfunction use(currentHandlers) {\n  for (var _len3 = arguments.length, handlers = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    handlers[_key3 - 1] = arguments[_key3];\n  }\n  currentHandlers.unshift(...handlers);\n}\nfunction restoreHandlers(handlers) {\n  handlers.forEach(handler => {\n    handler.markAsSkipped(false);\n  });\n}\nfunction resetHandlers(initialHandlers) {\n  for (var _len4 = arguments.length, nextHandlers = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    nextHandlers[_key4 - 1] = arguments[_key4];\n  }\n  return nextHandlers.length > 0 ? [...nextHandlers] : [...initialHandlers];\n}\nconst DEFAULT_START_OPTIONS = {\n  serviceWorker: {\n    url: '/mockServiceWorker.js',\n    options: null\n  },\n  quiet: false,\n  waitUntilReady: true,\n  onUnhandledRequest: 'warn',\n  findWorker(scriptURL, mockServiceWorkerUrl) {\n    return scriptURL === mockServiceWorkerUrl;\n  }\n};\n/**\r\n * Returns resolved worker start options, merging the default options\r\n * with the given custom options.\r\n */\nfunction resolveStartOptions(initialOptions) {\n  return mergeRight(DEFAULT_START_OPTIONS, initialOptions || {});\n}\nfunction prepareStartHandler(handler, context) {\n  return initialOptions => {\n    context.startOptions = resolveStartOptions(initialOptions);\n    return handler(context.startOptions, initialOptions || {});\n  };\n}\nvar lib = {};\nvar createInterceptor$1 = {};\nObject.defineProperty(createInterceptor$1, \"__esModule\", {\n  value: true\n});\ncreateInterceptor$1.createInterceptor = void 0;\nvar strict_event_emitter_1$1 = lib$3;\nfunction createInterceptor(options) {\n  var observer = new strict_event_emitter_1$1.StrictEventEmitter();\n  var cleanupFns = [];\n  return {\n    apply: function () {\n      cleanupFns = options.modules.map(function (interceptor) {\n        return interceptor(observer, options.resolver);\n      });\n    },\n    on: function (event, listener) {\n      observer.addListener(event, listener);\n    },\n    restore: function () {\n      observer.removeAllListeners();\n      if (cleanupFns.length === 0) {\n        throw new Error(\"Failed to restore patched modules: no patches found. Did you forget to run \\\".apply()\\\"?\");\n      }\n      cleanupFns.forEach(function (restore) {\n        return restore();\n      });\n    }\n  };\n}\ncreateInterceptor$1.createInterceptor = createInterceptor;\nvar remote = {};\nvar toIsoResponse$1 = {};\nObject.defineProperty(toIsoResponse$1, \"__esModule\", {\n  value: true\n});\ntoIsoResponse$1.toIsoResponse = void 0;\nvar headers_utils_1$3 = lib$4;\n/**\n * Converts a given mocked response object into an isomorphic response.\n */\nfunction toIsoResponse(response) {\n  return {\n    status: response.status || 200,\n    statusText: response.statusText || 'OK',\n    headers: headers_utils_1$3.objectToHeaders(response.headers || {}),\n    body: response.body\n  };\n}\ntoIsoResponse$1.toIsoResponse = toIsoResponse;\nvar __assign$1 = commonjsGlobal && commonjsGlobal.__assign || function () {\n  __assign$1 = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign$1.apply(this, arguments);\n};\nvar __awaiter$2 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator$2 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __read$1 = commonjsGlobal && commonjsGlobal.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nObject.defineProperty(remote, \"__esModule\", {\n  value: true\n});\nremote.createRemoteResolver = remote.createRemoteInterceptor = void 0;\nvar headers_utils_1$2 = lib$4;\nvar outvariant_1 = lib$5;\nvar strict_event_emitter_1 = lib$3;\nvar createInterceptor_1 = createInterceptor$1;\nvar toIsoResponse_1$2 = toIsoResponse$1;\nfunction requestReviver(key, value) {\n  switch (key) {\n    case 'url':\n      return new URL(value);\n    case 'headers':\n      return new headers_utils_1$2.Headers(value);\n    default:\n      return value;\n  }\n}\n/**\n * Creates a remote request interceptor that delegates\n * the mocked response resolution to the parent process.\n * The parent process must establish a remote resolver\n * by calling `createRemoteResolver` function.\n */\nfunction createRemoteInterceptor(options) {\n  outvariant_1.invariant(process.connected, \"Failed to create a remote interceptor: the current process (%s) does not have a parent. Please make sure you're spawning this process as a child process in order to use remote request interception.\", process.pid);\n  if (typeof process.send === 'undefined') {\n    throw new Error(\"Failed to create a remote interceptor: the current process (\" + process.pid + \") does not have the IPC enabled. Please make sure you're spawning this process with the \\\"ipc\\\" stdio value set:\\n\\nspawn('node', ['module.js'], { stdio: ['ipc'] })\");\n  }\n  var handleParentMessage;\n  var interceptor = createInterceptor_1.createInterceptor(__assign$1(__assign$1({}, options), {\n    resolver: function (request) {\n      var _a;\n      var serializedRequest = JSON.stringify(request);\n      (_a = process.send) === null || _a === void 0 ? void 0 : _a.call(process, \"request:\" + serializedRequest);\n      return new Promise(function (resolve) {\n        handleParentMessage = function (message) {\n          if (typeof message !== 'string') {\n            return;\n          }\n          if (message.startsWith(\"response:\" + request.id)) {\n            var _a = __read$1(message.match(/^response:.+?:(.+)$/) || [], 2),\n              responseString = _a[1];\n            if (!responseString) {\n              return resolve();\n            }\n            var mockedResponse = JSON.parse(responseString);\n            return resolve(mockedResponse);\n          }\n        };\n        process.addListener('message', handleParentMessage);\n      });\n    }\n  }));\n  return __assign$1(__assign$1({}, interceptor), {\n    restore: function () {\n      interceptor.restore();\n      process.removeListener('message', handleParentMessage);\n    }\n  });\n}\nremote.createRemoteInterceptor = createRemoteInterceptor;\n/**\n * Creates a response resolver function attached to the given `ChildProcess`.\n * The child process must establish a remote interceptor by calling `createRemoteInterceptor` function.\n */\nfunction createRemoteResolver(options) {\n  var _this = this;\n  var observer = new strict_event_emitter_1.StrictEventEmitter();\n  var handleChildMessage = function (message) {\n    return __awaiter$2(_this, void 0, void 0, function () {\n      var _a, requestString, isoRequest_1, mockedResponse_1, serializedResponse;\n      return __generator$2(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (typeof message !== 'string') {\n              return [2 /*return*/];\n            }\n\n            if (!message.startsWith('request:')) return [3 /*break*/, 2];\n            _a = __read$1(message.match(/^request:(.+)$/) || [], 2), requestString = _a[1];\n            if (!requestString) {\n              return [2 /*return*/];\n            }\n\n            isoRequest_1 = JSON.parse(requestString, requestReviver);\n            observer.emit('request', isoRequest_1);\n            return [4 /*yield*/, options.resolver(isoRequest_1, undefined)\n            // Send the mocked response to the child process.\n            ];\n\n          case 1:\n            mockedResponse_1 = _b.sent();\n            serializedResponse = JSON.stringify(mockedResponse_1);\n            options.process.send(\"response:\" + isoRequest_1.id + \":\" + serializedResponse, function (error) {\n              if (error) {\n                return;\n              }\n              if (mockedResponse_1) {\n                // Emit an optimisting \"response\" event at this point,\n                // not to rely on the back-and-forth signaling for the sake of the event.\n                observer.emit('response', isoRequest_1, toIsoResponse_1$2.toIsoResponse(mockedResponse_1));\n              }\n            });\n            _b.label = 2;\n          case 2:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  var cleanup = function () {\n    options.process.removeListener('message', handleChildMessage);\n  };\n  options.process.addListener('message', handleChildMessage);\n  options.process.addListener('disconnect', cleanup);\n  options.process.addListener('error', cleanup);\n  options.process.addListener('exit', cleanup);\n  return {\n    on: function (event, listener) {\n      observer.addListener(event, listener);\n    }\n  };\n}\nremote.createRemoteResolver = createRemoteResolver;\n(function (exports) {\n  var __createBinding = commonjsGlobal && commonjsGlobal.__createBinding || (Object.create ? function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    });\n  } : function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  });\n  var __exportStar = commonjsGlobal && commonjsGlobal.__exportStar || function (m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n  };\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getCleanUrl = void 0;\n  __exportStar(createInterceptor$1, exports);\n  __exportStar(remote, exports);\n  /* Utils */\n  var getCleanUrl_1 = getCleanUrl;\n  Object.defineProperty(exports, \"getCleanUrl\", {\n    enumerable: true,\n    get: function () {\n      return getCleanUrl_1.getCleanUrl;\n    }\n  });\n})(lib);\nvar fetch = {};\nvar uuid = {};\nObject.defineProperty(uuid, \"__esModule\", {\n  value: true\n});\nuuid.uuidv4 = void 0;\nfunction uuidv4$1() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\nuuid.uuidv4 = uuidv4$1;\nvar __assign = commonjsGlobal && commonjsGlobal.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter$1 = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator$1 = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(fetch, \"__esModule\", {\n  value: true\n});\nvar interceptFetch_1 = fetch.interceptFetch = void 0;\nvar headers_utils_1$1 = lib$4;\nvar toIsoResponse_1$1 = toIsoResponse$1;\nvar uuid_1$1 = uuid;\nvar debug$1 = require$$3('fetch');\nvar interceptFetch = function (observer, resolver) {\n  var pureFetch = window.fetch;\n  debug$1('replacing \"window.fetch\"...');\n  window.fetch = function (input, init) {\n    return __awaiter$1(void 0, void 0, void 0, function () {\n      var ref, url, method, isoRequest, response, isomorphicResponse;\n      var _a;\n      return __generator$1(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            ref = new Request(input, init);\n            url = typeof input === 'string' ? input : input.url;\n            method = (init === null || init === void 0 ? void 0 : init.method) || 'GET';\n            debug$1('[%s] %s', method, url);\n            _a = {\n              id: uuid_1$1.uuidv4(),\n              url: new URL(url, location.origin),\n              method: method,\n              headers: new headers_utils_1$1.Headers((init === null || init === void 0 ? void 0 : init.headers) || {})\n            };\n            return [4 /*yield*/, ref.text()];\n          case 1:\n            isoRequest = (_a.body = _b.sent(), _a);\n            debug$1('isomorphic request', isoRequest);\n            observer.emit('request', isoRequest);\n            debug$1('awaiting for the mocked response...');\n            return [4 /*yield*/, resolver(isoRequest, ref)];\n          case 2:\n            response = _b.sent();\n            debug$1('mocked response', response);\n            if (response) {\n              isomorphicResponse = toIsoResponse_1$1.toIsoResponse(response);\n              debug$1('derived isomorphic response', isomorphicResponse);\n              observer.emit('response', isoRequest, isomorphicResponse);\n              return [2 /*return*/, new Response(response.body, __assign(__assign({}, isomorphicResponse), {\n                // `Response.headers` cannot be instantiated with the `Headers` polyfill.\n                // Apparently, it halts if the `Headers` class contains unknown properties\n                // (i.e. the internal `Headers.map`).\n                headers: headers_utils_1$1.flattenHeadersObject(response.headers || {})\n              }))];\n            }\n            debug$1('no mocked response found, bypassing...');\n            return [2 /*return*/, pureFetch(input, init).then(function (response) {\n              return __awaiter$1(void 0, void 0, void 0, function () {\n                var _a, _b, _c;\n                return __generator$1(this, function (_d) {\n                  switch (_d.label) {\n                    case 0:\n                      debug$1('original fetch performed', response);\n                      _b = (_a = observer).emit;\n                      _c = ['response', isoRequest];\n                      return [4 /*yield*/, normalizeFetchResponse(response)];\n                    case 1:\n                      _b.apply(_a, _c.concat([_d.sent()]));\n                      return [2 /*return*/, response];\n                  }\n                });\n              });\n            })];\n        }\n      });\n    });\n  };\n  return function () {\n    debug$1('restoring modules...');\n    window.fetch = pureFetch;\n  };\n};\ninterceptFetch_1 = fetch.interceptFetch = interceptFetch;\nfunction normalizeFetchResponse(response) {\n  return __awaiter$1(this, void 0, void 0, function () {\n    var _a;\n    return __generator$1(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          _a = {\n            status: response.status,\n            statusText: response.statusText,\n            headers: headers_utils_1$1.objectToHeaders(headers_utils_1$1.headersToObject(response.headers))\n          };\n          return [4 /*yield*/, response.text()];\n        case 1:\n          return [2 /*return*/, (_a.body = _b.sent(), _a)];\n      }\n    });\n  });\n}\nvar XMLHttpRequest = {};\nvar XMLHttpRequestOverride = {};\nvar domParser = {};\nvar conventions$2 = {};\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n  if (oc === undefined) {\n    oc = Object;\n  }\n  return oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object;\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n  /**\n   * `text/html`, the only mime type that triggers treating an XML document as HTML.\n   *\n   * @see DOMParser.SupportedType.isHTML\n   * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n   * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n   * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n   */\n  HTML: 'text/html',\n  /**\n   * Helper method to check a mime type if it indicates an HTML document\n   *\n   * @param {string} [value]\n   * @returns {boolean}\n   *\n   * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n   * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n   * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n  isHTML: function (value) {\n    return value === MIME_TYPE.HTML;\n  },\n  /**\n   * `application/xml`, the standard mime type for XML documents.\n   *\n   * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n   * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n   * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n   */\n  XML_APPLICATION: 'application/xml',\n  /**\n   * `text/html`, an alias for `application/xml`.\n   *\n   * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n   * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n   * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n   */\n  XML_TEXT: 'text/xml',\n  /**\n   * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n   * but is parsed as an XML document.\n   *\n   * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n   * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n   */\n  XML_XHTML_APPLICATION: 'application/xhtml+xml',\n  /**\n   * `image/svg+xml`,\n   *\n   * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n   * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n   * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n   */\n  XML_SVG_IMAGE: 'image/svg+xml'\n});\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE$3 = freeze({\n  /**\n   * The XHTML namespace.\n   *\n   * @see http://www.w3.org/1999/xhtml\n   */\n  HTML: 'http://www.w3.org/1999/xhtml',\n  /**\n   * Checks if `uri` equals `NAMESPACE.HTML`.\n   *\n   * @param {string} [uri]\n   *\n   * @see NAMESPACE.HTML\n   */\n  isHTML: function (uri) {\n    return uri === NAMESPACE$3.HTML;\n  },\n  /**\n   * The SVG namespace.\n   *\n   * @see http://www.w3.org/2000/svg\n   */\n  SVG: 'http://www.w3.org/2000/svg',\n  /**\n   * The `xml:` namespace.\n   *\n   * @see http://www.w3.org/XML/1998/namespace\n   */\n  XML: 'http://www.w3.org/XML/1998/namespace',\n  /**\n   * The `xmlns:` namespace\n   *\n   * @see https://www.w3.org/2000/xmlns/\n   */\n  XMLNS: 'http://www.w3.org/2000/xmlns/'\n});\nconventions$2.freeze = freeze;\nconventions$2.MIME_TYPE = MIME_TYPE;\nconventions$2.NAMESPACE = NAMESPACE$3;\nvar entities$1 = {};\n(function (exports) {\n  var freeze = conventions$2.freeze;\n\n  /**\n   * The entities that are predefined in every XML document.\n   *\n   * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n   * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n   * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n   */\n  exports.XML_ENTITIES = freeze({\n    amp: '&',\n    apos: \"'\",\n    gt: '>',\n    lt: '<',\n    quot: '\"'\n  });\n\n  /**\n   * A map of currently 241 entities that are detected in an HTML document.\n   * They contain all entries from `XML_ENTITIES`.\n   *\n   * @see XML_ENTITIES\n   * @see DOMParser.parseFromString\n   * @see DOMImplementation.prototype.createHTMLDocument\n   * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n   * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n   * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n   * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n   * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n   */\n  exports.HTML_ENTITIES = freeze({\n    lt: '<',\n    gt: '>',\n    amp: '&',\n    quot: '\"',\n    apos: \"'\",\n    Agrave: \"À\",\n    Aacute: \"Á\",\n    Acirc: \"Â\",\n    Atilde: \"Ã\",\n    Auml: \"Ä\",\n    Aring: \"Å\",\n    AElig: \"Æ\",\n    Ccedil: \"Ç\",\n    Egrave: \"È\",\n    Eacute: \"É\",\n    Ecirc: \"Ê\",\n    Euml: \"Ë\",\n    Igrave: \"Ì\",\n    Iacute: \"Í\",\n    Icirc: \"Î\",\n    Iuml: \"Ï\",\n    ETH: \"Ð\",\n    Ntilde: \"Ñ\",\n    Ograve: \"Ò\",\n    Oacute: \"Ó\",\n    Ocirc: \"Ô\",\n    Otilde: \"Õ\",\n    Ouml: \"Ö\",\n    Oslash: \"Ø\",\n    Ugrave: \"Ù\",\n    Uacute: \"Ú\",\n    Ucirc: \"Û\",\n    Uuml: \"Ü\",\n    Yacute: \"Ý\",\n    THORN: \"Þ\",\n    szlig: \"ß\",\n    agrave: \"à\",\n    aacute: \"á\",\n    acirc: \"â\",\n    atilde: \"ã\",\n    auml: \"ä\",\n    aring: \"å\",\n    aelig: \"æ\",\n    ccedil: \"ç\",\n    egrave: \"è\",\n    eacute: \"é\",\n    ecirc: \"ê\",\n    euml: \"ë\",\n    igrave: \"ì\",\n    iacute: \"í\",\n    icirc: \"î\",\n    iuml: \"ï\",\n    eth: \"ð\",\n    ntilde: \"ñ\",\n    ograve: \"ò\",\n    oacute: \"ó\",\n    ocirc: \"ô\",\n    otilde: \"õ\",\n    ouml: \"ö\",\n    oslash: \"ø\",\n    ugrave: \"ù\",\n    uacute: \"ú\",\n    ucirc: \"û\",\n    uuml: \"ü\",\n    yacute: \"ý\",\n    thorn: \"þ\",\n    yuml: \"ÿ\",\n    nbsp: \"\\u00a0\",\n    iexcl: \"¡\",\n    cent: \"¢\",\n    pound: \"£\",\n    curren: \"¤\",\n    yen: \"¥\",\n    brvbar: \"¦\",\n    sect: \"§\",\n    uml: \"¨\",\n    copy: \"©\",\n    ordf: \"ª\",\n    laquo: \"«\",\n    not: \"¬\",\n    shy: \"­­\",\n    reg: \"®\",\n    macr: \"¯\",\n    deg: \"°\",\n    plusmn: \"±\",\n    sup2: \"²\",\n    sup3: \"³\",\n    acute: \"´\",\n    micro: \"µ\",\n    para: \"¶\",\n    middot: \"·\",\n    cedil: \"¸\",\n    sup1: \"¹\",\n    ordm: \"º\",\n    raquo: \"»\",\n    frac14: \"¼\",\n    frac12: \"½\",\n    frac34: \"¾\",\n    iquest: \"¿\",\n    times: \"×\",\n    divide: \"÷\",\n    forall: \"∀\",\n    part: \"∂\",\n    exist: \"∃\",\n    empty: \"∅\",\n    nabla: \"∇\",\n    isin: \"∈\",\n    notin: \"∉\",\n    ni: \"∋\",\n    prod: \"∏\",\n    sum: \"∑\",\n    minus: \"−\",\n    lowast: \"∗\",\n    radic: \"√\",\n    prop: \"∝\",\n    infin: \"∞\",\n    ang: \"∠\",\n    and: \"∧\",\n    or: \"∨\",\n    cap: \"∩\",\n    cup: \"∪\",\n    'int': \"∫\",\n    there4: \"∴\",\n    sim: \"∼\",\n    cong: \"≅\",\n    asymp: \"≈\",\n    ne: \"≠\",\n    equiv: \"≡\",\n    le: \"≤\",\n    ge: \"≥\",\n    sub: \"⊂\",\n    sup: \"⊃\",\n    nsub: \"⊄\",\n    sube: \"⊆\",\n    supe: \"⊇\",\n    oplus: \"⊕\",\n    otimes: \"⊗\",\n    perp: \"⊥\",\n    sdot: \"⋅\",\n    Alpha: \"Α\",\n    Beta: \"Β\",\n    Gamma: \"Γ\",\n    Delta: \"Δ\",\n    Epsilon: \"Ε\",\n    Zeta: \"Ζ\",\n    Eta: \"Η\",\n    Theta: \"Θ\",\n    Iota: \"Ι\",\n    Kappa: \"Κ\",\n    Lambda: \"Λ\",\n    Mu: \"Μ\",\n    Nu: \"Ν\",\n    Xi: \"Ξ\",\n    Omicron: \"Ο\",\n    Pi: \"Π\",\n    Rho: \"Ρ\",\n    Sigma: \"Σ\",\n    Tau: \"Τ\",\n    Upsilon: \"Υ\",\n    Phi: \"Φ\",\n    Chi: \"Χ\",\n    Psi: \"Ψ\",\n    Omega: \"Ω\",\n    alpha: \"α\",\n    beta: \"β\",\n    gamma: \"γ\",\n    delta: \"δ\",\n    epsilon: \"ε\",\n    zeta: \"ζ\",\n    eta: \"η\",\n    theta: \"θ\",\n    iota: \"ι\",\n    kappa: \"κ\",\n    lambda: \"λ\",\n    mu: \"μ\",\n    nu: \"ν\",\n    xi: \"ξ\",\n    omicron: \"ο\",\n    pi: \"π\",\n    rho: \"ρ\",\n    sigmaf: \"ς\",\n    sigma: \"σ\",\n    tau: \"τ\",\n    upsilon: \"υ\",\n    phi: \"φ\",\n    chi: \"χ\",\n    psi: \"ψ\",\n    omega: \"ω\",\n    thetasym: \"ϑ\",\n    upsih: \"ϒ\",\n    piv: \"ϖ\",\n    OElig: \"Œ\",\n    oelig: \"œ\",\n    Scaron: \"Š\",\n    scaron: \"š\",\n    Yuml: \"Ÿ\",\n    fnof: \"ƒ\",\n    circ: \"ˆ\",\n    tilde: \"˜\",\n    ensp: \" \",\n    emsp: \" \",\n    thinsp: \" \",\n    zwnj: \"‌\",\n    zwj: \"‍\",\n    lrm: \"‎\",\n    rlm: \"‏\",\n    ndash: \"–\",\n    mdash: \"—\",\n    lsquo: \"‘\",\n    rsquo: \"’\",\n    sbquo: \"‚\",\n    ldquo: \"“\",\n    rdquo: \"”\",\n    bdquo: \"„\",\n    dagger: \"†\",\n    Dagger: \"‡\",\n    bull: \"•\",\n    hellip: \"…\",\n    permil: \"‰\",\n    prime: \"′\",\n    Prime: \"″\",\n    lsaquo: \"‹\",\n    rsaquo: \"›\",\n    oline: \"‾\",\n    euro: \"€\",\n    trade: \"™\",\n    larr: \"←\",\n    uarr: \"↑\",\n    rarr: \"→\",\n    darr: \"↓\",\n    harr: \"↔\",\n    crarr: \"↵\",\n    lceil: \"⌈\",\n    rceil: \"⌉\",\n    lfloor: \"⌊\",\n    rfloor: \"⌋\",\n    loz: \"◊\",\n    spades: \"♠\",\n    clubs: \"♣\",\n    hearts: \"♥\",\n    diams: \"♦\"\n  });\n\n  /**\n   * @deprecated use `HTML_ENTITIES` instead\n   * @see HTML_ENTITIES\n   */\n  exports.entityMap = exports.HTML_ENTITIES;\n})(entities$1);\nvar sax$1 = {};\nvar NAMESPACE$2 = conventions$2.NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/; //\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\" + nameStartChar.source.slice(1, -1) + \"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^' + nameStartChar.source + nameChar.source + '*(?:\\:' + nameStartChar.source + nameChar.source + '*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0; //tag name offerring\nvar S_ATTR = 1; //attr name offerring \nvar S_ATTR_SPACE = 2; //attr name end and space offer\nvar S_EQ = 3; //=space?\nvar S_ATTR_NOQUOT_VALUE = 4; //attr value(no quot value only)\nvar S_ATTR_END = 5; //attr value end and no space(quot end)\nvar S_TAG_SPACE = 6; //(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7; //closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError$1(message, locator) {\n  this.message = message;\n  this.locator = locator;\n  if (Error.captureStackTrace) Error.captureStackTrace(this, ParseError$1);\n}\nParseError$1.prototype = new Error();\nParseError$1.prototype.name = ParseError$1.name;\nfunction XMLReader$1() {}\nXMLReader$1.prototype = {\n  parse: function (source, defaultNSMap, entityMap) {\n    var domBuilder = this.domBuilder;\n    domBuilder.startDocument();\n    _copy(defaultNSMap, defaultNSMap = {});\n    parse(source, defaultNSMap, entityMap, domBuilder, this.errorHandler);\n    domBuilder.endDocument();\n  }\n};\nfunction parse(source, defaultNSMapCopy, entityMap, domBuilder, errorHandler) {\n  function fixedFromCharCode(code) {\n    // String.prototype.fromCharCode does not supports\n    // > 2 bytes unicode chars directly\n    if (code > 0xffff) {\n      code -= 0x10000;\n      var surrogate1 = 0xd800 + (code >> 10),\n        surrogate2 = 0xdc00 + (code & 0x3ff);\n      return String.fromCharCode(surrogate1, surrogate2);\n    } else {\n      return String.fromCharCode(code);\n    }\n  }\n  function entityReplacer(a) {\n    var k = a.slice(1, -1);\n    if (k in entityMap) {\n      return entityMap[k];\n    } else if (k.charAt(0) === '#') {\n      return fixedFromCharCode(parseInt(k.substr(1).replace('x', '0x')));\n    } else {\n      errorHandler.error('entity not found:' + a);\n      return a;\n    }\n  }\n  function appendText(end) {\n    //has some bugs\n    if (end > start) {\n      var xt = source.substring(start, end).replace(/&#?\\w+;/g, entityReplacer);\n      locator && position(start);\n      domBuilder.characters(xt, 0, end - start);\n      start = end;\n    }\n  }\n  function position(p, m) {\n    while (p >= lineEnd && (m = linePattern.exec(source))) {\n      lineStart = m.index;\n      lineEnd = lineStart + m[0].length;\n      locator.lineNumber++;\n      //console.log('line++:',locator,startPos,endPos)\n    }\n\n    locator.columnNumber = p - lineStart + 1;\n  }\n  var lineStart = 0;\n  var lineEnd = 0;\n  var linePattern = /.*(?:\\r\\n?|\\n)|.*$/g;\n  var locator = domBuilder.locator;\n  var parseStack = [{\n    currentNSMap: defaultNSMapCopy\n  }];\n  var closeMap = {};\n  var start = 0;\n  while (true) {\n    try {\n      var tagStart = source.indexOf('<', start);\n      if (tagStart < 0) {\n        if (!source.substr(start).match(/^\\s*$/)) {\n          var doc = domBuilder.doc;\n          var text = doc.createTextNode(source.substr(start));\n          doc.appendChild(text);\n          domBuilder.currentElement = text;\n        }\n        return;\n      }\n      if (tagStart > start) {\n        appendText(tagStart);\n      }\n      switch (source.charAt(tagStart + 1)) {\n        case '/':\n          var end = source.indexOf('>', tagStart + 3);\n          var tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n          var config = parseStack.pop();\n          if (end < 0) {\n            tagName = source.substring(tagStart + 2).replace(/[\\s<].*/, '');\n            errorHandler.error(\"end tag name: \" + tagName + ' is not complete:' + config.tagName);\n            end = tagStart + 1 + tagName.length;\n          } else if (tagName.match(/\\s</)) {\n            tagName = tagName.replace(/[\\s<].*/, '');\n            errorHandler.error(\"end tag name: \" + tagName + ' maybe not complete');\n            end = tagStart + 1 + tagName.length;\n          }\n          var localNSMap = config.localNSMap;\n          var endMatch = config.tagName == tagName;\n          var endIgnoreCaseMach = endMatch || config.tagName && config.tagName.toLowerCase() == tagName.toLowerCase();\n          if (endIgnoreCaseMach) {\n            domBuilder.endElement(config.uri, config.localName, tagName);\n            if (localNSMap) {\n              for (var prefix in localNSMap) {\n                domBuilder.endPrefixMapping(prefix);\n              }\n            }\n            if (!endMatch) {\n              errorHandler.fatalError(\"end tag name: \" + tagName + ' is not match the current start tagName:' + config.tagName); // No known test case\n            }\n          } else {\n            parseStack.push(config);\n          }\n          end++;\n          break;\n        // end elment\n        case '?':\n          // <?...?>\n          locator && position(tagStart);\n          end = parseInstruction(source, tagStart, domBuilder);\n          break;\n        case '!':\n          // <!doctype,<![CDATA,<!--\n          locator && position(tagStart);\n          end = parseDCC(source, tagStart, domBuilder, errorHandler);\n          break;\n        default:\n          locator && position(tagStart);\n          var el = new ElementAttributes();\n          var currentNSMap = parseStack[parseStack.length - 1].currentNSMap;\n          //elStartEnd\n          var end = parseElementStartPart(source, tagStart, el, currentNSMap, entityReplacer, errorHandler);\n          var len = el.length;\n          if (!el.closed && fixSelfClosed(source, end, el.tagName, closeMap)) {\n            el.closed = true;\n            if (!entityMap.nbsp) {\n              errorHandler.warning('unclosed xml attribute');\n            }\n          }\n          if (locator && len) {\n            var locator2 = copyLocator(locator, {});\n            //try{//attribute position fixed\n            for (var i = 0; i < len; i++) {\n              var a = el[i];\n              position(a.offset);\n              a.locator = copyLocator(locator, {});\n            }\n            domBuilder.locator = locator2;\n            if (appendElement$1(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n            domBuilder.locator = locator;\n          } else {\n            if (appendElement$1(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n          }\n          if (NAMESPACE$2.isHTML(el.uri) && !el.closed) {\n            end = parseHtmlSpecialContent(source, end, el.tagName, entityReplacer, domBuilder);\n          } else {\n            end++;\n          }\n      }\n    } catch (e) {\n      if (e instanceof ParseError$1) {\n        throw e;\n      }\n      errorHandler.error('element parse error: ' + e);\n      end = -1;\n    }\n    if (end > start) {\n      start = end;\n    } else {\n      //TODO: 这里有可能sax回退，有位置错误风险\n      appendText(Math.max(tagStart, start) + 1);\n    }\n  }\n}\nfunction copyLocator(f, t) {\n  t.lineNumber = f.lineNumber;\n  t.columnNumber = f.columnNumber;\n  return t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source, start, el, currentNSMap, entityReplacer, errorHandler) {\n  /**\n   * @param {string} qname\n   * @param {string} value\n   * @param {number} startIndex\n   */\n  function addAttribute(qname, value, startIndex) {\n    if (qname in el.attributeNames) errorHandler.fatalError('Attribute ' + qname + ' redefined');\n    el.addValue(qname, value, startIndex);\n  }\n  var attrName;\n  var value;\n  var p = ++start;\n  var s = S_TAG; //status\n  while (true) {\n    var c = source.charAt(p);\n    switch (c) {\n      case '=':\n        if (s === S_ATTR) {\n          //attrName\n          attrName = source.slice(start, p);\n          s = S_EQ;\n        } else if (s === S_ATTR_SPACE) {\n          s = S_EQ;\n        } else {\n          //fatalError: equal must after attrName or space after attrName\n          throw new Error('attribute equal must after attrName'); // No known test case\n        }\n\n        break;\n      case '\\'':\n      case '\"':\n        if (s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n        ) {\n          //equal\n          if (s === S_ATTR) {\n            errorHandler.warning('attribute value must after \"=\"');\n            attrName = source.slice(start, p);\n          }\n          start = p + 1;\n          p = source.indexOf(c, start);\n          if (p > 0) {\n            value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n            addAttribute(attrName, value, start - 1);\n            s = S_ATTR_END;\n          } else {\n            //fatalError: no end quot match\n            throw new Error('attribute value no end \\'' + c + '\\' match');\n          }\n        } else if (s == S_ATTR_NOQUOT_VALUE) {\n          value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n          //console.log(attrName,value,start,p)\n          addAttribute(attrName, value, start);\n          //console.dir(el)\n          errorHandler.warning('attribute \"' + attrName + '\" missed start quot(' + c + ')!!');\n          start = p + 1;\n          s = S_ATTR_END;\n        } else {\n          //fatalError: no equal before\n          throw new Error('attribute value must after \"=\"'); // No known test case\n        }\n\n        break;\n      case '/':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            s = S_TAG_CLOSE;\n            el.closed = true;\n          case S_ATTR_NOQUOT_VALUE:\n          case S_ATTR:\n          case S_ATTR_SPACE:\n            break;\n          //case S_EQ:\n          default:\n            throw new Error(\"attribute invalid close char('/')\");\n          // No known test case\n        }\n\n        break;\n      case '':\n        //end document\n        errorHandler.error('unexpected end of input');\n        if (s == S_TAG) {\n          el.setTagName(source.slice(start, p));\n        }\n        return p;\n      case '>':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            break;\n          //normal\n          case S_ATTR_NOQUOT_VALUE: //Compatible state\n          case S_ATTR:\n            value = source.slice(start, p);\n            if (value.slice(-1) === '/') {\n              el.closed = true;\n              value = value.slice(0, -1);\n            }\n          case S_ATTR_SPACE:\n            if (s === S_ATTR_SPACE) {\n              value = attrName;\n            }\n            if (s == S_ATTR_NOQUOT_VALUE) {\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!');\n              addAttribute(attrName, value.replace(/&#?\\w+;/g, entityReplacer), start);\n            } else {\n              if (!NAMESPACE$2.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + value + '\" missed value!! \"' + value + '\" instead!!');\n              }\n              addAttribute(value, value, start);\n            }\n            break;\n          case S_EQ:\n            throw new Error('attribute value missed!!');\n        }\n        //\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n        return p;\n      /*xml space '\\x20' | #x9 | #xD | #xA; */\n      case '\\u0080':\n        c = ' ';\n      default:\n        if (c <= ' ') {\n          //space\n          switch (s) {\n            case S_TAG:\n              el.setTagName(source.slice(start, p)); //tagName\n              s = S_TAG_SPACE;\n              break;\n            case S_ATTR:\n              attrName = source.slice(start, p);\n              s = S_ATTR_SPACE;\n              break;\n            case S_ATTR_NOQUOT_VALUE:\n              var value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n              addAttribute(attrName, value, start);\n            case S_ATTR_END:\n              s = S_TAG_SPACE;\n              break;\n            //case S_TAG_SPACE:\n            //case S_EQ:\n            //case S_ATTR_SPACE:\n            //\tvoid();break;\n            //case S_TAG_CLOSE:\n            //ignore warning\n          }\n        } else {\n          //not space\n          //S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n          //S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n          switch (s) {\n            //case S_TAG:void();break;\n            //case S_ATTR:void();break;\n            //case S_ATTR_NOQUOT_VALUE:void();break;\n            case S_ATTR_SPACE:\n              el.tagName;\n              if (!NAMESPACE$2.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + attrName + '\" missed value!! \"' + attrName + '\" instead2!!');\n              }\n              addAttribute(attrName, attrName, start);\n              start = p;\n              s = S_ATTR;\n              break;\n            case S_ATTR_END:\n              errorHandler.warning('attribute space is required\"' + attrName + '\"!!');\n            case S_TAG_SPACE:\n              s = S_ATTR;\n              start = p;\n              break;\n            case S_EQ:\n              s = S_ATTR_NOQUOT_VALUE;\n              start = p;\n              break;\n            case S_TAG_CLOSE:\n              throw new Error(\"elements closed character '/' and '>' must be connected to\");\n          }\n        }\n    } //end outer switch\n    //console.log('p++',p)\n    p++;\n  }\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement$1(el, domBuilder, currentNSMap) {\n  var tagName = el.tagName;\n  var localNSMap = null;\n  //var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n  var i = el.length;\n  while (i--) {\n    var a = el[i];\n    var qName = a.qName;\n    var value = a.value;\n    var nsp = qName.indexOf(':');\n    if (nsp > 0) {\n      var prefix = a.prefix = qName.slice(0, nsp);\n      var localName = qName.slice(nsp + 1);\n      var nsPrefix = prefix === 'xmlns' && localName;\n    } else {\n      localName = qName;\n      prefix = null;\n      nsPrefix = qName === 'xmlns' && '';\n    }\n    //can not set prefix,because prefix !== ''\n    a.localName = localName;\n    //prefix == null for no ns prefix attribute \n    if (nsPrefix !== false) {\n      //hack!!\n      if (localNSMap == null) {\n        localNSMap = {};\n        //console.log(currentNSMap,0)\n        _copy(currentNSMap, currentNSMap = {});\n        //console.log(currentNSMap,1)\n      }\n\n      currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n      a.uri = NAMESPACE$2.XMLNS;\n      domBuilder.startPrefixMapping(nsPrefix, value);\n    }\n  }\n  var i = el.length;\n  while (i--) {\n    a = el[i];\n    var prefix = a.prefix;\n    if (prefix) {\n      //no prefix attribute has no namespace\n      if (prefix === 'xml') {\n        a.uri = NAMESPACE$2.XML;\n      }\n      if (prefix !== 'xmlns') {\n        a.uri = currentNSMap[prefix || ''];\n\n        //{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n      }\n    }\n  }\n\n  var nsp = tagName.indexOf(':');\n  if (nsp > 0) {\n    prefix = el.prefix = tagName.slice(0, nsp);\n    localName = el.localName = tagName.slice(nsp + 1);\n  } else {\n    prefix = null; //important!!\n    localName = el.localName = tagName;\n  }\n  //no prefix element has default namespace\n  var ns = el.uri = currentNSMap[prefix || ''];\n  domBuilder.startElement(ns, localName, tagName, el);\n  //endPrefixMapping and startPrefixMapping have not any help for dom builder\n  //localNSMap = null\n  if (el.closed) {\n    domBuilder.endElement(ns, localName, tagName);\n    if (localNSMap) {\n      for (prefix in localNSMap) {\n        domBuilder.endPrefixMapping(prefix);\n      }\n    }\n  } else {\n    el.currentNSMap = currentNSMap;\n    el.localNSMap = localNSMap;\n    //parseStack.push(el);\n    return true;\n  }\n}\nfunction parseHtmlSpecialContent(source, elStartEnd, tagName, entityReplacer, domBuilder) {\n  if (/^(?:script|textarea)$/i.test(tagName)) {\n    var elEndStart = source.indexOf('</' + tagName + '>', elStartEnd);\n    var text = source.substring(elStartEnd + 1, elEndStart);\n    if (/[&<]/.test(text)) {\n      if (/^script$/i.test(tagName)) {\n        //if(!/\\]\\]>/.test(text)){\n        //lexHandler.startCDATA();\n        domBuilder.characters(text, 0, text.length);\n        //lexHandler.endCDATA();\n        return elEndStart;\n        //}\n      } //}else{//text area\n      text = text.replace(/&#?\\w+;/g, entityReplacer);\n      domBuilder.characters(text, 0, text.length);\n      return elEndStart;\n      //}\n    }\n  }\n\n  return elStartEnd + 1;\n}\nfunction fixSelfClosed(source, elStartEnd, tagName, closeMap) {\n  //if(tagName in closeMap){\n  var pos = closeMap[tagName];\n  if (pos == null) {\n    //console.log(tagName)\n    pos = source.lastIndexOf('</' + tagName + '>');\n    if (pos < elStartEnd) {\n      //忘记闭合\n      pos = source.lastIndexOf('</' + tagName);\n    }\n    closeMap[tagName] = pos;\n  }\n  return pos < elStartEnd;\n  //} \n}\n\nfunction _copy(source, target) {\n  for (var n in source) {\n    target[n] = source[n];\n  }\n}\nfunction parseDCC(source, start, domBuilder, errorHandler) {\n  //sure start with '<!'\n  var next = source.charAt(start + 2);\n  switch (next) {\n    case '-':\n      if (source.charAt(start + 3) === '-') {\n        var end = source.indexOf('-->', start + 4);\n        //append comment source.substring(4,end)//<!--\n        if (end > start) {\n          domBuilder.comment(source, start + 4, end - start - 4);\n          return end + 3;\n        } else {\n          errorHandler.error(\"Unclosed comment\");\n          return -1;\n        }\n      } else {\n        //error\n        return -1;\n      }\n    default:\n      if (source.substr(start + 3, 6) == 'CDATA[') {\n        var end = source.indexOf(']]>', start + 9);\n        domBuilder.startCDATA();\n        domBuilder.characters(source, start + 9, end - start - 9);\n        domBuilder.endCDATA();\n        return end + 3;\n      }\n      //<!DOCTYPE\n      //startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \n      var matchs = split(source, start);\n      var len = matchs.length;\n      if (len > 1 && /!doctype/i.test(matchs[0][0])) {\n        var name = matchs[1][0];\n        var pubid = false;\n        var sysid = false;\n        if (len > 3) {\n          if (/^public$/i.test(matchs[2][0])) {\n            pubid = matchs[3][0];\n            sysid = len > 4 && matchs[4][0];\n          } else if (/^system$/i.test(matchs[2][0])) {\n            sysid = matchs[3][0];\n          }\n        }\n        var lastMatch = matchs[len - 1];\n        domBuilder.startDTD(name, pubid, sysid);\n        domBuilder.endDTD();\n        return lastMatch.index + lastMatch[0].length;\n      }\n  }\n  return -1;\n}\nfunction parseInstruction(source, start, domBuilder) {\n  var end = source.indexOf('?>', start);\n  if (end) {\n    var match = source.substring(start, end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n    if (match) {\n      match[0].length;\n      domBuilder.processingInstruction(match[1], match[2]);\n      return end + 2;\n    } else {\n      //error\n      return -1;\n    }\n  }\n  return -1;\n}\nfunction ElementAttributes() {\n  this.attributeNames = {};\n}\nElementAttributes.prototype = {\n  setTagName: function (tagName) {\n    if (!tagNamePattern.test(tagName)) {\n      throw new Error('invalid tagName:' + tagName);\n    }\n    this.tagName = tagName;\n  },\n  addValue: function (qName, value, offset) {\n    if (!tagNamePattern.test(qName)) {\n      throw new Error('invalid attribute:' + qName);\n    }\n    this.attributeNames[qName] = this.length;\n    this[this.length++] = {\n      qName: qName,\n      value: value,\n      offset: offset\n    };\n  },\n  length: 0,\n  getLocalName: function (i) {\n    return this[i].localName;\n  },\n  getLocator: function (i) {\n    return this[i].locator;\n  },\n  getQName: function (i) {\n    return this[i].qName;\n  },\n  getURI: function (i) {\n    return this[i].uri;\n  },\n  getValue: function (i) {\n    return this[i].value;\n  }\n  //\t,getIndex:function(uri, localName)){\n  //\t\tif(localName){\n  //\t\t\t\n  //\t\t}else{\n  //\t\t\tvar qName = uri\n  //\t\t}\n  //\t},\n  //\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n  //\tgetType:function(uri,localName){}\n  //\tgetType:function(i){},\n};\n\nfunction split(source, start) {\n  var match;\n  var buf = [];\n  var reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n  reg.lastIndex = start;\n  reg.exec(source); //skip <\n  while (match = reg.exec(source)) {\n    buf.push(match);\n    if (match[1]) return buf;\n  }\n}\nsax$1.XMLReader = XMLReader$1;\nsax$1.ParseError = ParseError$1;\nvar dom = {};\nvar conventions$1 = conventions$2;\nvar NAMESPACE$1 = conventions$1.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString(input) {\n  return input !== '';\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n  // U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n  return input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : [];\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer(current, element) {\n  if (!current.hasOwnProperty(element)) {\n    current[element] = true;\n  }\n  return current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n  if (!input) return [];\n  var list = splitOnASCIIWhitespace(input);\n  return Object.keys(list.reduce(orderedSetReducer, {}));\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes(list) {\n  return function (element) {\n    return list && list.indexOf(element) !== -1;\n  };\n}\nfunction copy(src, dest) {\n  for (var p in src) {\n    dest[p] = src[p];\n  }\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class, Super) {\n  var pt = Class.prototype;\n  if (!(pt instanceof Super)) {\n    function t() {}\n    t.prototype = Super.prototype;\n    t = new t();\n    copy(pt, t);\n    Class.prototype = pt = t;\n  }\n  if (pt.constructor != Class) {\n    if (typeof Class != 'function') {\n      console.error(\"unknow Class:\" + Class);\n    }\n    pt.constructor = Class;\n  }\n}\n\n// Node Types\nvar NodeType = {};\nvar ELEMENT_NODE = NodeType.ELEMENT_NODE = 1;\nvar ATTRIBUTE_NODE = NodeType.ATTRIBUTE_NODE = 2;\nvar TEXT_NODE = NodeType.TEXT_NODE = 3;\nvar CDATA_SECTION_NODE = NodeType.CDATA_SECTION_NODE = 4;\nvar ENTITY_REFERENCE_NODE = NodeType.ENTITY_REFERENCE_NODE = 5;\nvar ENTITY_NODE = NodeType.ENTITY_NODE = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE = NodeType.COMMENT_NODE = 8;\nvar DOCUMENT_NODE = NodeType.DOCUMENT_NODE = 9;\nvar DOCUMENT_TYPE_NODE = NodeType.DOCUMENT_TYPE_NODE = 10;\nvar DOCUMENT_FRAGMENT_NODE = NodeType.DOCUMENT_FRAGMENT_NODE = 11;\nvar NOTATION_NODE = NodeType.NOTATION_NODE = 12;\n\n// ExceptionCode\nvar ExceptionCode = {};\nvar ExceptionMessage = {};\nExceptionCode.INDEX_SIZE_ERR = (ExceptionMessage[1] = \"Index size error\", 1);\nExceptionCode.DOMSTRING_SIZE_ERR = (ExceptionMessage[2] = \"DOMString size error\", 2);\nvar HIERARCHY_REQUEST_ERR = ExceptionCode.HIERARCHY_REQUEST_ERR = (ExceptionMessage[3] = \"Hierarchy request error\", 3);\nExceptionCode.WRONG_DOCUMENT_ERR = (ExceptionMessage[4] = \"Wrong document\", 4);\nExceptionCode.INVALID_CHARACTER_ERR = (ExceptionMessage[5] = \"Invalid character\", 5);\nExceptionCode.NO_DATA_ALLOWED_ERR = (ExceptionMessage[6] = \"No data allowed\", 6);\nExceptionCode.NO_MODIFICATION_ALLOWED_ERR = (ExceptionMessage[7] = \"No modification allowed\", 7);\nvar NOT_FOUND_ERR = ExceptionCode.NOT_FOUND_ERR = (ExceptionMessage[8] = \"Not found\", 8);\nExceptionCode.NOT_SUPPORTED_ERR = (ExceptionMessage[9] = \"Not supported\", 9);\nvar INUSE_ATTRIBUTE_ERR = ExceptionCode.INUSE_ATTRIBUTE_ERR = (ExceptionMessage[10] = \"Attribute in use\", 10);\n//level2\nExceptionCode.INVALID_STATE_ERR = (ExceptionMessage[11] = \"Invalid state\", 11);\nExceptionCode.SYNTAX_ERR = (ExceptionMessage[12] = \"Syntax error\", 12);\nExceptionCode.INVALID_MODIFICATION_ERR = (ExceptionMessage[13] = \"Invalid modification\", 13);\nExceptionCode.NAMESPACE_ERR = (ExceptionMessage[14] = \"Invalid namespace\", 14);\nExceptionCode.INVALID_ACCESS_ERR = (ExceptionMessage[15] = \"Invalid access\", 15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n  if (message instanceof Error) {\n    var error = message;\n  } else {\n    error = this;\n    Error.call(this, ExceptionMessage[code]);\n    this.message = ExceptionMessage[code];\n    if (Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n  }\n  error.code = code;\n  if (message) this.message = this.message + \": \" + message;\n  return error;\n}\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode, DOMException);\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {}\nNodeList.prototype = {\n  /**\n   * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n   * @standard level1\n   */\n  length: 0,\n  /**\n   * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n   * @standard level1\n   * @param index  unsigned long \n   *   Index into the collection.\n   * @return Node\n   * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n   */\n  item: function (index) {\n    return this[index] || null;\n  },\n  toString: function (isHTML, nodeFilter) {\n    for (var buf = [], i = 0; i < this.length; i++) {\n      serializeToString(this[i], buf, isHTML, nodeFilter);\n    }\n    return buf.join('');\n  }\n};\nfunction LiveNodeList(node, refresh) {\n  this._node = node;\n  this._refresh = refresh;\n  _updateLiveList(this);\n}\nfunction _updateLiveList(list) {\n  var inc = list._node._inc || list._node.ownerDocument._inc;\n  if (list._inc != inc) {\n    var ls = list._refresh(list._node);\n    //console.log(ls.length)\n    __set__(list, 'length', ls.length);\n    copy(ls, list);\n    list._inc = inc;\n  }\n}\nLiveNodeList.prototype.item = function (i) {\n  _updateLiveList(this);\n  return this[i];\n};\n_extends(LiveNodeList, NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {}\nfunction _findNodeIndex(list, node) {\n  var i = list.length;\n  while (i--) {\n    if (list[i] === node) {\n      return i;\n    }\n  }\n}\nfunction _addNamedNode(el, list, newAttr, oldAttr) {\n  if (oldAttr) {\n    list[_findNodeIndex(list, oldAttr)] = newAttr;\n  } else {\n    list[list.length++] = newAttr;\n  }\n  if (el) {\n    newAttr.ownerElement = el;\n    var doc = el.ownerDocument;\n    if (doc) {\n      oldAttr && _onRemoveAttribute(doc, el, oldAttr);\n      _onAddAttribute(doc, el, newAttr);\n    }\n  }\n}\nfunction _removeNamedNode(el, list, attr) {\n  //console.log('remove attr:'+attr)\n  var i = _findNodeIndex(list, attr);\n  if (i >= 0) {\n    var lastIndex = list.length - 1;\n    while (i < lastIndex) {\n      list[i] = list[++i];\n    }\n    list.length = lastIndex;\n    if (el) {\n      var doc = el.ownerDocument;\n      if (doc) {\n        _onRemoveAttribute(doc, el, attr);\n        attr.ownerElement = null;\n      }\n    }\n  } else {\n    throw DOMException(NOT_FOUND_ERR, new Error(el.tagName + '@' + attr));\n  }\n}\nNamedNodeMap.prototype = {\n  length: 0,\n  item: NodeList.prototype.item,\n  getNamedItem: function (key) {\n    //\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n    //\t\t\treturn null;\n    //\t\t}\n    //console.log()\n    var i = this.length;\n    while (i--) {\n      var attr = this[i];\n      //console.log(attr.nodeName,key)\n      if (attr.nodeName == key) {\n        return attr;\n      }\n    }\n  },\n  setNamedItem: function (attr) {\n    var el = attr.ownerElement;\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n    var oldAttr = this.getNamedItem(attr.nodeName);\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n    return oldAttr;\n  },\n  /* returns Node */\n  setNamedItemNS: function (attr) {\n    // raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n    var el = attr.ownerElement,\n      oldAttr;\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n    oldAttr = this.getNamedItemNS(attr.namespaceURI, attr.localName);\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n    return oldAttr;\n  },\n  /* returns Node */\n  removeNamedItem: function (key) {\n    var attr = this.getNamedItem(key);\n    _removeNamedNode(this._ownerElement, this, attr);\n    return attr;\n  },\n  // raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n  //for level2\n  removeNamedItemNS: function (namespaceURI, localName) {\n    var attr = this.getNamedItemNS(namespaceURI, localName);\n    _removeNamedNode(this._ownerElement, this, attr);\n    return attr;\n  },\n  getNamedItemNS: function (namespaceURI, localName) {\n    var i = this.length;\n    while (i--) {\n      var node = this[i];\n      if (node.localName == localName && node.namespaceURI == namespaceURI) {\n        return node;\n      }\n    }\n    return null;\n  }\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation$1() {}\nDOMImplementation$1.prototype = {\n  /**\n   * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n   * The different implementations fairly diverged in what kind of features were reported.\n   * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n   *\n   * @deprecated It is deprecated and modern browsers return true in all cases.\n   *\n   * @param {string} feature\n   * @param {string} [version]\n   * @returns {boolean} always true\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n   * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n   */\n  hasFeature: function (feature, version) {\n    return true;\n  },\n  /**\n   * Creates an XML Document object of the specified type with its document element.\n   *\n   * __It behaves slightly different from the description in the living standard__:\n   * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n   * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n   * - this implementation is not validating names or qualified names\n   *   (when parsing XML strings, the SAX parser takes care of that)\n   *\n   * @param {string|null} namespaceURI\n   * @param {string} qualifiedName\n   * @param {DocumentType=null} doctype\n   * @returns {Document}\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n   * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n   *\n   * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n   * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n   * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n   */\n  createDocument: function (namespaceURI, qualifiedName, doctype) {\n    var doc = new Document();\n    doc.implementation = this;\n    doc.childNodes = new NodeList();\n    doc.doctype = doctype || null;\n    if (doctype) {\n      doc.appendChild(doctype);\n    }\n    if (qualifiedName) {\n      var root = doc.createElementNS(namespaceURI, qualifiedName);\n      doc.appendChild(root);\n    }\n    return doc;\n  },\n  /**\n   * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n   *\n   * __This behavior is slightly different from the in the specs__:\n   * - this implementation is not validating names or qualified names\n   *   (when parsing XML strings, the SAX parser takes care of that)\n   *\n   * @param {string} qualifiedName\n   * @param {string} [publicId]\n   * @param {string} [systemId]\n   * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n   * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n   * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n   *\n   * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n   * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n   * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n   */\n  createDocumentType: function (qualifiedName, publicId, systemId) {\n    var node = new DocumentType();\n    node.name = qualifiedName;\n    node.nodeName = qualifiedName;\n    node.publicId = publicId || '';\n    node.systemId = systemId || '';\n    return node;\n  }\n};\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {}\nNode.prototype = {\n  firstChild: null,\n  lastChild: null,\n  previousSibling: null,\n  nextSibling: null,\n  attributes: null,\n  parentNode: null,\n  childNodes: null,\n  ownerDocument: null,\n  nodeValue: null,\n  namespaceURI: null,\n  prefix: null,\n  localName: null,\n  // Modified in DOM Level 2:\n  insertBefore: function (newChild, refChild) {\n    //raises \n    return _insertBefore(this, newChild, refChild);\n  },\n  replaceChild: function (newChild, oldChild) {\n    //raises \n    this.insertBefore(newChild, oldChild);\n    if (oldChild) {\n      this.removeChild(oldChild);\n    }\n  },\n  removeChild: function (oldChild) {\n    return _removeChild(this, oldChild);\n  },\n  appendChild: function (newChild) {\n    return this.insertBefore(newChild, null);\n  },\n  hasChildNodes: function () {\n    return this.firstChild != null;\n  },\n  cloneNode: function (deep) {\n    return cloneNode(this.ownerDocument || this, this, deep);\n  },\n  // Modified in DOM Level 2:\n  normalize: function () {\n    var child = this.firstChild;\n    while (child) {\n      var next = child.nextSibling;\n      if (next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE) {\n        this.removeChild(next);\n        child.appendData(next.data);\n      } else {\n        child.normalize();\n        child = next;\n      }\n    }\n  },\n  // Introduced in DOM Level 2:\n  isSupported: function (feature, version) {\n    return this.ownerDocument.implementation.hasFeature(feature, version);\n  },\n  // Introduced in DOM Level 2:\n  hasAttributes: function () {\n    return this.attributes.length > 0;\n  },\n  lookupPrefix: function (namespaceURI) {\n    var el = this;\n    while (el) {\n      var map = el._nsMap;\n      //console.dir(map)\n      if (map) {\n        for (var n in map) {\n          if (map[n] == namespaceURI) {\n            return n;\n          }\n        }\n      }\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  lookupNamespaceURI: function (prefix) {\n    var el = this;\n    while (el) {\n      var map = el._nsMap;\n      //console.dir(map)\n      if (map) {\n        if (prefix in map) {\n          return map[prefix];\n        }\n      }\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  isDefaultNamespace: function (namespaceURI) {\n    var prefix = this.lookupPrefix(namespaceURI);\n    return prefix == null;\n  }\n};\nfunction _xmlEncoder(c) {\n  return c == '<' && '&lt;' || c == '>' && '&gt;' || c == '&' && '&amp;' || c == '\"' && '&quot;' || '&#' + c.charCodeAt() + ';';\n}\ncopy(NodeType, Node);\ncopy(NodeType, Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node, callback) {\n  if (callback(node)) {\n    return true;\n  }\n  if (node = node.firstChild) {\n    do {\n      if (_visitNode(node, callback)) {\n        return true;\n      }\n    } while (node = node.nextSibling);\n  }\n}\nfunction Document() {}\nfunction _onAddAttribute(doc, el, newAttr) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n  if (ns === NAMESPACE$1.XMLNS) {\n    //update namespace\n    el._nsMap[newAttr.prefix ? newAttr.localName : ''] = newAttr.value;\n  }\n}\nfunction _onRemoveAttribute(doc, el, newAttr, remove) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n  if (ns === NAMESPACE$1.XMLNS) {\n    //update namespace\n    delete el._nsMap[newAttr.prefix ? newAttr.localName : ''];\n  }\n}\nfunction _onUpdateChild(doc, el, newChild) {\n  if (doc && doc._inc) {\n    doc._inc++;\n    //update childNodes\n    var cs = el.childNodes;\n    if (newChild) {\n      cs[cs.length++] = newChild;\n    } else {\n      //console.log(1)\n      var child = el.firstChild;\n      var i = 0;\n      while (child) {\n        cs[i++] = child;\n        child = child.nextSibling;\n      }\n      cs.length = i;\n    }\n  }\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode, child) {\n  var previous = child.previousSibling;\n  var next = child.nextSibling;\n  if (previous) {\n    previous.nextSibling = next;\n  } else {\n    parentNode.firstChild = next;\n  }\n  if (next) {\n    next.previousSibling = previous;\n  } else {\n    parentNode.lastChild = previous;\n  }\n  _onUpdateChild(parentNode.ownerDocument, parentNode);\n  return child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode, newChild, nextChild) {\n  var cp = newChild.parentNode;\n  if (cp) {\n    cp.removeChild(newChild); //remove and update\n  }\n\n  if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n    var newFirst = newChild.firstChild;\n    if (newFirst == null) {\n      return newChild;\n    }\n    var newLast = newChild.lastChild;\n  } else {\n    newFirst = newLast = newChild;\n  }\n  var pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n  newFirst.previousSibling = pre;\n  newLast.nextSibling = nextChild;\n  if (pre) {\n    pre.nextSibling = newFirst;\n  } else {\n    parentNode.firstChild = newFirst;\n  }\n  if (nextChild == null) {\n    parentNode.lastChild = newLast;\n  } else {\n    nextChild.previousSibling = newLast;\n  }\n  do {\n    newFirst.parentNode = parentNode;\n  } while (newFirst !== newLast && (newFirst = newFirst.nextSibling));\n  _onUpdateChild(parentNode.ownerDocument || parentNode, parentNode);\n  //console.log(parentNode.lastChild.nextSibling == null)\n  if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n    newChild.firstChild = newChild.lastChild = null;\n  }\n  return newChild;\n}\nfunction _appendSingleChild(parentNode, newChild) {\n  var cp = newChild.parentNode;\n  if (cp) {\n    var pre = parentNode.lastChild;\n    cp.removeChild(newChild); //remove and update\n    var pre = parentNode.lastChild;\n  }\n  var pre = parentNode.lastChild;\n  newChild.parentNode = parentNode;\n  newChild.previousSibling = pre;\n  newChild.nextSibling = null;\n  if (pre) {\n    pre.nextSibling = newChild;\n  } else {\n    parentNode.firstChild = newChild;\n  }\n  parentNode.lastChild = newChild;\n  _onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n  return newChild;\n  //console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\n\nDocument.prototype = {\n  //implementation : null,\n  nodeName: '#document',\n  nodeType: DOCUMENT_NODE,\n  doctype: null,\n  documentElement: null,\n  _inc: 1,\n  insertBefore: function (newChild, refChild) {\n    //raises\n    if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n      var child = newChild.firstChild;\n      while (child) {\n        var next = child.nextSibling;\n        this.insertBefore(child, refChild);\n        child = next;\n      }\n      return newChild;\n    }\n    if (this.documentElement == null && newChild.nodeType == ELEMENT_NODE) {\n      this.documentElement = newChild;\n    }\n    return _insertBefore(this, newChild, refChild), newChild.ownerDocument = this, newChild;\n  },\n  removeChild: function (oldChild) {\n    if (this.documentElement == oldChild) {\n      this.documentElement = null;\n    }\n    return _removeChild(this, oldChild);\n  },\n  // Introduced in DOM Level 2:\n  importNode: function (importedNode, deep) {\n    return importNode(this, importedNode, deep);\n  },\n  // Introduced in DOM Level 2:\n  getElementById: function (id) {\n    var rtv = null;\n    _visitNode(this.documentElement, function (node) {\n      if (node.nodeType == ELEMENT_NODE) {\n        if (node.getAttribute('id') == id) {\n          rtv = node;\n          return true;\n        }\n      }\n    });\n    return rtv;\n  },\n  /**\n   * The `getElementsByClassName` method of `Document` interface returns an array-like object\n   * of all child elements which have **all** of the given class name(s).\n   *\n   * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n   *\n   *\n   * Warning: This is a live LiveNodeList.\n   * Changes in the DOM will reflect in the array as the changes occur.\n   * If an element selected by this array no longer qualifies for the selector,\n   * it will automatically be removed. Be aware of this for iteration purposes.\n   *\n   * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n   * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n   */\n  getElementsByClassName: function (classNames) {\n    var classNamesSet = toOrderedSet(classNames);\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n      if (classNamesSet.length > 0) {\n        _visitNode(base.documentElement, function (node) {\n          if (node !== base && node.nodeType === ELEMENT_NODE) {\n            var nodeClassNames = node.getAttribute('class');\n            // can be null if the attribute does not exist\n            if (nodeClassNames) {\n              // before splitting and iterating just compare them for the most common case\n              var matches = classNames === nodeClassNames;\n              if (!matches) {\n                var nodeClassNamesSet = toOrderedSet(nodeClassNames);\n                matches = classNamesSet.every(arrayIncludes(nodeClassNamesSet));\n              }\n              if (matches) {\n                ls.push(node);\n              }\n            }\n          }\n        });\n      }\n      return ls;\n    });\n  },\n  //document factory method:\n  createElement: function (tagName) {\n    var node = new Element();\n    node.ownerDocument = this;\n    node.nodeName = tagName;\n    node.tagName = tagName;\n    node.localName = tagName;\n    node.childNodes = new NodeList();\n    var attrs = node.attributes = new NamedNodeMap();\n    attrs._ownerElement = node;\n    return node;\n  },\n  createDocumentFragment: function () {\n    var node = new DocumentFragment();\n    node.ownerDocument = this;\n    node.childNodes = new NodeList();\n    return node;\n  },\n  createTextNode: function (data) {\n    var node = new Text();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createComment: function (data) {\n    var node = new Comment();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createCDATASection: function (data) {\n    var node = new CDATASection();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createProcessingInstruction: function (target, data) {\n    var node = new ProcessingInstruction();\n    node.ownerDocument = this;\n    node.tagName = node.target = target;\n    node.nodeValue = node.data = data;\n    return node;\n  },\n  createAttribute: function (name) {\n    var node = new Attr();\n    node.ownerDocument = this;\n    node.name = name;\n    node.nodeName = name;\n    node.localName = name;\n    node.specified = true;\n    return node;\n  },\n  createEntityReference: function (name) {\n    var node = new EntityReference();\n    node.ownerDocument = this;\n    node.nodeName = name;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createElementNS: function (namespaceURI, qualifiedName) {\n    var node = new Element();\n    var pl = qualifiedName.split(':');\n    var attrs = node.attributes = new NamedNodeMap();\n    node.childNodes = new NodeList();\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.tagName = qualifiedName;\n    node.namespaceURI = namespaceURI;\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n    attrs._ownerElement = node;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createAttributeNS: function (namespaceURI, qualifiedName) {\n    var node = new Attr();\n    var pl = qualifiedName.split(':');\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.name = qualifiedName;\n    node.namespaceURI = namespaceURI;\n    node.specified = true;\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n    return node;\n  }\n};\n_extends(Document, Node);\nfunction Element() {\n  this._nsMap = {};\n}\nElement.prototype = {\n  nodeType: ELEMENT_NODE,\n  hasAttribute: function (name) {\n    return this.getAttributeNode(name) != null;\n  },\n  getAttribute: function (name) {\n    var attr = this.getAttributeNode(name);\n    return attr && attr.value || '';\n  },\n  getAttributeNode: function (name) {\n    return this.attributes.getNamedItem(name);\n  },\n  setAttribute: function (name, value) {\n    var attr = this.ownerDocument.createAttribute(name);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  removeAttribute: function (name) {\n    var attr = this.getAttributeNode(name);\n    attr && this.removeAttributeNode(attr);\n  },\n  //four real opeartion method\n  appendChild: function (newChild) {\n    if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n      return this.insertBefore(newChild, null);\n    } else {\n      return _appendSingleChild(this, newChild);\n    }\n  },\n  setAttributeNode: function (newAttr) {\n    return this.attributes.setNamedItem(newAttr);\n  },\n  setAttributeNodeNS: function (newAttr) {\n    return this.attributes.setNamedItemNS(newAttr);\n  },\n  removeAttributeNode: function (oldAttr) {\n    //console.log(this == oldAttr.ownerElement)\n    return this.attributes.removeNamedItem(oldAttr.nodeName);\n  },\n  //get real attribute name,and remove it by removeAttributeNode\n  removeAttributeNS: function (namespaceURI, localName) {\n    var old = this.getAttributeNodeNS(namespaceURI, localName);\n    old && this.removeAttributeNode(old);\n  },\n  hasAttributeNS: function (namespaceURI, localName) {\n    return this.getAttributeNodeNS(namespaceURI, localName) != null;\n  },\n  getAttributeNS: function (namespaceURI, localName) {\n    var attr = this.getAttributeNodeNS(namespaceURI, localName);\n    return attr && attr.value || '';\n  },\n  setAttributeNS: function (namespaceURI, qualifiedName, value) {\n    var attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  getAttributeNodeNS: function (namespaceURI, localName) {\n    return this.attributes.getNamedItemNS(namespaceURI, localName);\n  },\n  getElementsByTagName: function (tagName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)) {\n          ls.push(node);\n        }\n      });\n      return ls;\n    });\n  },\n  getElementsByTagNameNS: function (namespaceURI, localName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)) {\n          ls.push(node);\n        }\n      });\n      return ls;\n    });\n  }\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n_extends(Element, Node);\nfunction Attr() {}\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr, Node);\nfunction CharacterData() {}\nCharacterData.prototype = {\n  data: '',\n  substringData: function (offset, count) {\n    return this.data.substring(offset, offset + count);\n  },\n  appendData: function (text) {\n    text = this.data + text;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  },\n  insertData: function (offset, text) {\n    this.replaceData(offset, 0, text);\n  },\n  appendChild: function (newChild) {\n    throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);\n  },\n  deleteData: function (offset, count) {\n    this.replaceData(offset, count, \"\");\n  },\n  replaceData: function (offset, count, text) {\n    var start = this.data.substring(0, offset);\n    var end = this.data.substring(offset + count);\n    text = start + text + end;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  }\n};\n_extends(CharacterData, Node);\nfunction Text() {}\nText.prototype = {\n  nodeName: \"#text\",\n  nodeType: TEXT_NODE,\n  splitText: function (offset) {\n    var text = this.data;\n    var newText = text.substring(offset);\n    text = text.substring(0, offset);\n    this.data = this.nodeValue = text;\n    this.length = text.length;\n    var newNode = this.ownerDocument.createTextNode(newText);\n    if (this.parentNode) {\n      this.parentNode.insertBefore(newNode, this.nextSibling);\n    }\n    return newNode;\n  }\n};\n_extends(Text, CharacterData);\nfunction Comment() {}\nComment.prototype = {\n  nodeName: \"#comment\",\n  nodeType: COMMENT_NODE\n};\n_extends(Comment, CharacterData);\nfunction CDATASection() {}\nCDATASection.prototype = {\n  nodeName: \"#cdata-section\",\n  nodeType: CDATA_SECTION_NODE\n};\n_extends(CDATASection, CharacterData);\nfunction DocumentType() {}\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType, Node);\nfunction Notation() {}\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation, Node);\nfunction Entity() {}\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity, Node);\nfunction EntityReference() {}\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference, Node);\nfunction DocumentFragment() {}\nDocumentFragment.prototype.nodeName = \"#document-fragment\";\nDocumentFragment.prototype.nodeType = DOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment, Node);\nfunction ProcessingInstruction() {}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction, Node);\nfunction XMLSerializer() {}\nXMLSerializer.prototype.serializeToString = function (node, isHtml, nodeFilter) {\n  return nodeSerializeToString.call(node, isHtml, nodeFilter);\n};\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml, nodeFilter) {\n  var buf = [];\n  var refNode = this.nodeType == 9 && this.documentElement || this;\n  var prefix = refNode.prefix;\n  var uri = refNode.namespaceURI;\n  if (uri && prefix == null) {\n    //console.log(prefix)\n    var prefix = refNode.lookupPrefix(uri);\n    if (prefix == null) {\n      //isHTML = true;\n      var visibleNamespaces = [{\n        namespace: uri,\n        prefix: null\n      }\n      //{namespace:uri,prefix:''}\n      ];\n    }\n  }\n\n  serializeToString(this, buf, isHtml, nodeFilter, visibleNamespaces);\n  //console.log('###',this.nodeType,uri,prefix,buf.join(''))\n  return buf.join('');\n}\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n  var prefix = node.prefix || '';\n  var uri = node.namespaceURI;\n  // According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n  // and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n  // > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n  // in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n  // and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n  // > [...] Furthermore, the attribute value [...] must not be an empty string.\n  // so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n  if (!uri) {\n    return false;\n  }\n  if (prefix === \"xml\" && uri === NAMESPACE$1.XML || uri === NAMESPACE$1.XMLNS) {\n    return false;\n  }\n  var i = visibleNamespaces.length;\n  while (i--) {\n    var ns = visibleNamespaces[i];\n    // get namespace prefix\n    if (ns.prefix === prefix) {\n      return ns.namespace !== uri;\n    }\n  }\n  return true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * The replacement text of any entity referred to directly or indirectly in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml/#CleanAttrVals\n * @see https://www.w3.org/TR/xml/#NT-AttValue\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n  buf.push(' ', qualifiedName, '=\"', value.replace(/[<&\"]/g, _xmlEncoder), '\"');\n}\nfunction serializeToString(node, buf, isHTML, nodeFilter, visibleNamespaces) {\n  if (!visibleNamespaces) {\n    visibleNamespaces = [];\n  }\n  if (nodeFilter) {\n    node = nodeFilter(node);\n    if (node) {\n      if (typeof node == 'string') {\n        buf.push(node);\n        return;\n      }\n    } else {\n      return;\n    }\n    //buf.sort.apply(attrs, attributeSorter);\n  }\n\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      var attrs = node.attributes;\n      var len = attrs.length;\n      var child = node.firstChild;\n      var nodeName = node.tagName;\n      isHTML = NAMESPACE$1.isHTML(node.namespaceURI) || isHTML;\n      var prefixedNodeName = nodeName;\n      if (!isHTML && !node.prefix && node.namespaceURI) {\n        var defaultNS;\n        for (var ai = 0; ai < attrs.length; ai++) {\n          if (attrs.item(ai).name === 'xmlns') {\n            defaultNS = attrs.item(ai).value;\n            break;\n          }\n        }\n        if (defaultNS !== node.namespaceURI) {\n          for (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n            var namespace = visibleNamespaces[nsi];\n            if (namespace.namespace === node.namespaceURI) {\n              if (namespace.prefix) {\n                prefixedNodeName = namespace.prefix + ':' + nodeName;\n              }\n              break;\n            }\n          }\n        }\n      }\n      buf.push('<', prefixedNodeName);\n      for (var i = 0; i < len; i++) {\n        // add namespaces for attributes\n        var attr = attrs.item(i);\n        if (attr.prefix == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: attr.localName,\n            namespace: attr.value\n          });\n        } else if (attr.nodeName == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: '',\n            namespace: attr.value\n          });\n        }\n      }\n      for (var i = 0; i < len; i++) {\n        var attr = attrs.item(i);\n        if (needNamespaceDefine(attr, isHTML, visibleNamespaces)) {\n          var prefix = attr.prefix || '';\n          var uri = attr.namespaceURI;\n          addSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n          visibleNamespaces.push({\n            prefix: prefix,\n            namespace: uri\n          });\n        }\n        serializeToString(attr, buf, isHTML, nodeFilter, visibleNamespaces);\n      }\n\n      // add namespace for current node\t\t\n      if (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n        var prefix = node.prefix || '';\n        var uri = node.namespaceURI;\n        addSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n        visibleNamespaces.push({\n          prefix: prefix,\n          namespace: uri\n        });\n      }\n      if (child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)) {\n        buf.push('>');\n        //if is cdata child node\n        if (isHTML && /^script$/i.test(nodeName)) {\n          while (child) {\n            if (child.data) {\n              buf.push(child.data);\n            } else {\n              serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n            }\n            child = child.nextSibling;\n          }\n        } else {\n          while (child) {\n            serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n            child = child.nextSibling;\n          }\n        }\n        buf.push('</', prefixedNodeName, '>');\n      } else {\n        buf.push('/>');\n      }\n      // remove added visible namespaces\n      //visibleNamespaces.length = startVisibleNamespaces;\n      return;\n    case DOCUMENT_NODE:\n    case DOCUMENT_FRAGMENT_NODE:\n      var child = node.firstChild;\n      while (child) {\n        serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n        child = child.nextSibling;\n      }\n      return;\n    case ATTRIBUTE_NODE:\n      return addSerializedAttribute(buf, node.name, node.value);\n    case TEXT_NODE:\n      /**\n       * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n       * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n       * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n       * `&amp;` and `&lt;` respectively.\n       * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n       * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n       * when that string is not marking the end of a CDATA section.\n       *\n       * In the content of elements, character data is any string of characters\n       * which does not contain the start-delimiter of any markup\n       * and does not include the CDATA-section-close delimiter, `]]>`.\n       *\n       * @see https://www.w3.org/TR/xml/#NT-CharData\n       */\n      return buf.push(node.data.replace(/[<&]/g, _xmlEncoder).replace(/]]>/g, ']]&gt;'));\n    case CDATA_SECTION_NODE:\n      return buf.push('<![CDATA[', node.data, ']]>');\n    case COMMENT_NODE:\n      return buf.push(\"<!--\", node.data, \"-->\");\n    case DOCUMENT_TYPE_NODE:\n      var pubid = node.publicId;\n      var sysid = node.systemId;\n      buf.push('<!DOCTYPE ', node.name);\n      if (pubid) {\n        buf.push(' PUBLIC ', pubid);\n        if (sysid && sysid != '.') {\n          buf.push(' ', sysid);\n        }\n        buf.push('>');\n      } else if (sysid && sysid != '.') {\n        buf.push(' SYSTEM ', sysid, '>');\n      } else {\n        var sub = node.internalSubset;\n        if (sub) {\n          buf.push(\" [\", sub, \"]\");\n        }\n        buf.push(\">\");\n      }\n      return;\n    case PROCESSING_INSTRUCTION_NODE:\n      return buf.push(\"<?\", node.target, \" \", node.data, \"?>\");\n    case ENTITY_REFERENCE_NODE:\n      return buf.push('&', node.nodeName, ';');\n    //case ENTITY_NODE:\n    //case NOTATION_NODE:\n    default:\n      buf.push('??', node.nodeName);\n  }\n}\nfunction importNode(doc, node, deep) {\n  var node2;\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      node2 = node.cloneNode(false);\n      node2.ownerDocument = doc;\n    //var attrs = node2.attributes;\n    //var len = attrs.length;\n    //for(var i=0;i<len;i++){\n    //node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n    //}\n    case DOCUMENT_FRAGMENT_NODE:\n      break;\n    case ATTRIBUTE_NODE:\n      deep = true;\n      break;\n    //case ENTITY_REFERENCE_NODE:\n    //case PROCESSING_INSTRUCTION_NODE:\n    ////case TEXT_NODE:\n    //case CDATA_SECTION_NODE:\n    //case COMMENT_NODE:\n    //\tdeep = false;\n    //\tbreak;\n    //case DOCUMENT_NODE:\n    //case DOCUMENT_TYPE_NODE:\n    //cannot be imported.\n    //case ENTITY_NODE:\n    //case NOTATION_NODE：\n    //can not hit in level3\n    //default:throw e;\n  }\n\n  if (!node2) {\n    node2 = node.cloneNode(false); //false\n  }\n\n  node2.ownerDocument = doc;\n  node2.parentNode = null;\n  if (deep) {\n    var child = node.firstChild;\n    while (child) {\n      node2.appendChild(importNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n  return node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc, node, deep) {\n  var node2 = new node.constructor();\n  for (var n in node) {\n    var v = node[n];\n    if (typeof v != 'object') {\n      if (v != node2[n]) {\n        node2[n] = v;\n      }\n    }\n  }\n  if (node.childNodes) {\n    node2.childNodes = new NodeList();\n  }\n  node2.ownerDocument = doc;\n  switch (node2.nodeType) {\n    case ELEMENT_NODE:\n      var attrs = node.attributes;\n      var attrs2 = node2.attributes = new NamedNodeMap();\n      var len = attrs.length;\n      attrs2._ownerElement = node2;\n      for (var i = 0; i < len; i++) {\n        node2.setAttributeNode(cloneNode(doc, attrs.item(i), true));\n      }\n      break;\n    case ATTRIBUTE_NODE:\n      deep = true;\n  }\n  if (deep) {\n    var child = node.firstChild;\n    while (child) {\n      node2.appendChild(cloneNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n  return node2;\n}\nfunction __set__(object, key, value) {\n  object[key] = value;\n}\n//do dynamic\ntry {\n  if (Object.defineProperty) {\n    Object.defineProperty(LiveNodeList.prototype, 'length', {\n      get: function () {\n        _updateLiveList(this);\n        return this.$$length;\n      }\n    });\n    Object.defineProperty(Node.prototype, 'textContent', {\n      get: function () {\n        return getTextContent(this);\n      },\n      set: function (data) {\n        switch (this.nodeType) {\n          case ELEMENT_NODE:\n          case DOCUMENT_FRAGMENT_NODE:\n            while (this.firstChild) {\n              this.removeChild(this.firstChild);\n            }\n            if (data || String(data)) {\n              this.appendChild(this.ownerDocument.createTextNode(data));\n            }\n            break;\n          default:\n            this.data = data;\n            this.value = data;\n            this.nodeValue = data;\n        }\n      }\n    });\n    function getTextContent(node) {\n      switch (node.nodeType) {\n        case ELEMENT_NODE:\n        case DOCUMENT_FRAGMENT_NODE:\n          var buf = [];\n          node = node.firstChild;\n          while (node) {\n            if (node.nodeType !== 7 && node.nodeType !== 8) {\n              buf.push(getTextContent(node));\n            }\n            node = node.nextSibling;\n          }\n          return buf.join('');\n        default:\n          return node.nodeValue;\n      }\n    }\n    __set__ = function (object, key, value) {\n      //console.log(value)\n      object['$$' + key] = value;\n    };\n  }\n} catch (e) {//ie8\n}\n\n//if(typeof require == 'function'){\ndom.DocumentType = DocumentType;\ndom.DOMException = DOMException;\ndom.DOMImplementation = DOMImplementation$1;\ndom.Element = Element;\ndom.Node = Node;\ndom.NodeList = NodeList;\ndom.XMLSerializer = XMLSerializer;\nvar conventions = conventions$2;\nvar entities = entities$1;\nvar NAMESPACE = conventions.NAMESPACE;\nfunction DOMParser(options) {\n  this.options = options || {\n    locator: {}\n  };\n}\nDOMParser.prototype.parseFromString = function (source, mimeType) {\n  var options = this.options;\n  var sax = new XMLReader();\n  var domBuilder = options.domBuilder || new DOMHandler(); //contentHandler and LexicalHandler\n  var errorHandler = options.errorHandler;\n  var locator = options.locator;\n  var defaultNSMap = options.xmlns || {};\n  var isHTML = /\\/x?html?$/.test(mimeType); //mimeType.toLowerCase().indexOf('html') > -1;\n  var entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n  if (locator) {\n    domBuilder.setDocumentLocator(locator);\n  }\n  sax.errorHandler = buildErrorHandler(errorHandler, domBuilder, locator);\n  sax.domBuilder = options.domBuilder || domBuilder;\n  if (isHTML) {\n    defaultNSMap[''] = NAMESPACE.HTML;\n  }\n  defaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n  if (source && typeof source === 'string') {\n    sax.parse(source, defaultNSMap, entityMap);\n  } else {\n    sax.errorHandler.error(\"invalid doc source\");\n  }\n  return domBuilder.doc;\n};\nfunction buildErrorHandler(errorImpl, domBuilder, locator) {\n  if (!errorImpl) {\n    if (domBuilder instanceof DOMHandler) {\n      return domBuilder;\n    }\n    errorImpl = domBuilder;\n  }\n  var errorHandler = {};\n  var isCallback = errorImpl instanceof Function;\n  locator = locator || {};\n  function build(key) {\n    var fn = errorImpl[key];\n    if (!fn && isCallback) {\n      fn = errorImpl.length == 2 ? function (msg) {\n        errorImpl(key, msg);\n      } : errorImpl;\n    }\n    errorHandler[key] = fn && function (msg) {\n      fn('[xmldom ' + key + ']\\t' + msg + _locator(locator));\n    } || function () {};\n  }\n  build('warning');\n  build('error');\n  build('fatalError');\n  return errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n  this.cdata = false;\n}\nfunction position(locator, node) {\n  node.lineNumber = locator.lineNumber;\n  node.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n  startDocument: function () {\n    this.doc = new DOMImplementation().createDocument(null, null, null);\n    if (this.locator) {\n      this.doc.documentURI = this.locator.systemId;\n    }\n  },\n  startElement: function (namespaceURI, localName, qName, attrs) {\n    var doc = this.doc;\n    var el = doc.createElementNS(namespaceURI, qName || localName);\n    var len = attrs.length;\n    appendElement(this, el);\n    this.currentElement = el;\n    this.locator && position(this.locator, el);\n    for (var i = 0; i < len; i++) {\n      var namespaceURI = attrs.getURI(i);\n      var value = attrs.getValue(i);\n      var qName = attrs.getQName(i);\n      var attr = doc.createAttributeNS(namespaceURI, qName);\n      this.locator && position(attrs.getLocator(i), attr);\n      attr.value = attr.nodeValue = value;\n      el.setAttributeNode(attr);\n    }\n  },\n  endElement: function (namespaceURI, localName, qName) {\n    var current = this.currentElement;\n    current.tagName;\n    this.currentElement = current.parentNode;\n  },\n  startPrefixMapping: function (prefix, uri) {},\n  endPrefixMapping: function (prefix) {},\n  processingInstruction: function (target, data) {\n    var ins = this.doc.createProcessingInstruction(target, data);\n    this.locator && position(this.locator, ins);\n    appendElement(this, ins);\n  },\n  ignorableWhitespace: function (ch, start, length) {},\n  characters: function (chars, start, length) {\n    chars = _toString.apply(this, arguments);\n    //console.log(chars)\n    if (chars) {\n      if (this.cdata) {\n        var charNode = this.doc.createCDATASection(chars);\n      } else {\n        var charNode = this.doc.createTextNode(chars);\n      }\n      if (this.currentElement) {\n        this.currentElement.appendChild(charNode);\n      } else if (/^\\s*$/.test(chars)) {\n        this.doc.appendChild(charNode);\n        //process xml\n      }\n\n      this.locator && position(this.locator, charNode);\n    }\n  },\n  skippedEntity: function (name) {},\n  endDocument: function () {\n    this.doc.normalize();\n  },\n  setDocumentLocator: function (locator) {\n    if (this.locator = locator) {\n      // && !('lineNumber' in locator)){\n      locator.lineNumber = 0;\n    }\n  },\n  //LexicalHandler\n  comment: function (chars, start, length) {\n    chars = _toString.apply(this, arguments);\n    var comm = this.doc.createComment(chars);\n    this.locator && position(this.locator, comm);\n    appendElement(this, comm);\n  },\n  startCDATA: function () {\n    //used in characters() methods\n    this.cdata = true;\n  },\n  endCDATA: function () {\n    this.cdata = false;\n  },\n  startDTD: function (name, publicId, systemId) {\n    var impl = this.doc.implementation;\n    if (impl && impl.createDocumentType) {\n      var dt = impl.createDocumentType(name, publicId, systemId);\n      this.locator && position(this.locator, dt);\n      appendElement(this, dt);\n    }\n  },\n  /**\n   * @see org.xml.sax.ErrorHandler\n   * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n   */\n  warning: function (error) {\n    console.warn('[xmldom warning]\\t' + error, _locator(this.locator));\n  },\n  error: function (error) {\n    console.error('[xmldom error]\\t' + error, _locator(this.locator));\n  },\n  fatalError: function (error) {\n    throw new ParseError(error, this.locator);\n  }\n};\nfunction _locator(l) {\n  if (l) {\n    return '\\n@' + (l.systemId || '') + '#[line:' + l.lineNumber + ',col:' + l.columnNumber + ']';\n  }\n}\nfunction _toString(chars, start, length) {\n  if (typeof chars == 'string') {\n    return chars.substr(start, length);\n  } else {\n    //java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n    if (chars.length >= start + length || start) {\n      return new java.lang.String(chars, start, length) + '';\n    }\n    return chars;\n  }\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g, function (key) {\n  DOMHandler.prototype[key] = function () {\n    return null;\n  };\n});\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement(hander, node) {\n  if (!hander.currentElement) {\n    hander.doc.appendChild(node);\n  } else {\n    hander.currentElement.appendChild(node);\n  }\n} //appendChild and setAttributeNS are preformance key\n\n//if(typeof require == 'function'){\nvar sax = sax$1;\nvar XMLReader = sax.XMLReader;\nvar ParseError = sax.ParseError;\nvar DOMImplementation = domParser.DOMImplementation = dom.DOMImplementation;\ndomParser.XMLSerializer = dom.XMLSerializer;\ndomParser.DOMParser = DOMParser;\ndomParser.__DOMHandler = DOMHandler;\nvar parseJson$1 = {};\nObject.defineProperty(parseJson$1, \"__esModule\", {\n  value: true\n});\nparseJson$1.parseJson = void 0;\n/**\n * Parses a given string into JSON.\n * Gracefully handles invalid JSON by returning `null`.\n */\nfunction parseJson(data) {\n  try {\n    var json = JSON.parse(data);\n    return json;\n  } catch (_) {\n    return null;\n  }\n}\nparseJson$1.parseJson = parseJson;\nvar bufferFrom$1 = {};\nObject.defineProperty(bufferFrom$1, \"__esModule\", {\n  value: true\n});\nbufferFrom$1.bufferFrom = void 0;\n/**\n * Convert a given string into a `Uint8Array`.\n * We don't use `TextEncoder` because it's unavailable in some environments.\n */\nfunction bufferFrom(init) {\n  var encodedString = encodeURIComponent(init);\n  var binaryString = encodedString.replace(/%([0-9A-F]{2})/g, function (_, char) {\n    return String.fromCharCode('0x' + char);\n  });\n  var buffer = new Uint8Array(binaryString.length);\n  Array.prototype.forEach.call(binaryString, function (char, index) {\n    buffer[index] = char.charCodeAt(0);\n  });\n  return buffer;\n}\nbufferFrom$1.bufferFrom = bufferFrom;\nvar createEvent$1 = {};\nvar EventPolyfill$1 = {};\nObject.defineProperty(EventPolyfill$1, \"__esModule\", {\n  value: true\n});\nEventPolyfill$1.EventPolyfill = void 0;\nvar EventPolyfill = /** @class */function () {\n  function EventPolyfill(type, options) {\n    this.AT_TARGET = 0;\n    this.BUBBLING_PHASE = 0;\n    this.CAPTURING_PHASE = 0;\n    this.NONE = 0;\n    this.type = '';\n    this.srcElement = null;\n    this.currentTarget = null;\n    this.eventPhase = 0;\n    this.isTrusted = true;\n    this.composed = false;\n    this.cancelable = true;\n    this.defaultPrevented = false;\n    this.bubbles = true;\n    this.lengthComputable = true;\n    this.loaded = 0;\n    this.total = 0;\n    this.cancelBubble = false;\n    this.returnValue = true;\n    this.type = type;\n    this.target = (options === null || options === void 0 ? void 0 : options.target) || null;\n    this.currentTarget = (options === null || options === void 0 ? void 0 : options.currentTarget) || null;\n    this.timeStamp = Date.now();\n  }\n  EventPolyfill.prototype.composedPath = function () {\n    return [];\n  };\n  EventPolyfill.prototype.initEvent = function (type, bubbles, cancelable) {\n    this.type = type;\n    this.bubbles = !!bubbles;\n    this.cancelable = !!cancelable;\n  };\n  EventPolyfill.prototype.preventDefault = function () {\n    this.defaultPrevented = true;\n  };\n  EventPolyfill.prototype.stopPropagation = function () {};\n  EventPolyfill.prototype.stopImmediatePropagation = function () {};\n  return EventPolyfill;\n}();\nEventPolyfill$1.EventPolyfill = EventPolyfill;\nvar ProgressEventPolyfill$1 = {};\nvar __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(ProgressEventPolyfill$1, \"__esModule\", {\n  value: true\n});\nProgressEventPolyfill$1.ProgressEventPolyfill = void 0;\nvar EventPolyfill_1$1 = EventPolyfill$1;\nvar ProgressEventPolyfill = /** @class */function (_super) {\n  __extends(ProgressEventPolyfill, _super);\n  function ProgressEventPolyfill(type, init) {\n    var _this = _super.call(this, type) || this;\n    _this.lengthComputable = (init === null || init === void 0 ? void 0 : init.lengthComputable) || false;\n    _this.composed = (init === null || init === void 0 ? void 0 : init.composed) || false;\n    _this.loaded = (init === null || init === void 0 ? void 0 : init.loaded) || 0;\n    _this.total = (init === null || init === void 0 ? void 0 : init.total) || 0;\n    return _this;\n  }\n  return ProgressEventPolyfill;\n}(EventPolyfill_1$1.EventPolyfill);\nProgressEventPolyfill$1.ProgressEventPolyfill = ProgressEventPolyfill;\nObject.defineProperty(createEvent$1, \"__esModule\", {\n  value: true\n});\ncreateEvent$1.createEvent = void 0;\nvar EventPolyfill_1 = EventPolyfill$1;\nvar ProgressEventPolyfill_1 = ProgressEventPolyfill$1;\nvar SUPPORTS_PROGRESS_EVENT = typeof ProgressEvent !== 'undefined';\nfunction createEvent(target, type, init) {\n  var progressEvents = ['error', 'progress', 'loadstart', 'loadend', 'load', 'timeout', 'abort'];\n  /**\n   * `ProgressEvent` is not supported in React Native.\n   * @see https://github.com/mswjs/interceptors/issues/40\n   */\n  var ProgressEventClass = SUPPORTS_PROGRESS_EVENT ? ProgressEvent : ProgressEventPolyfill_1.ProgressEventPolyfill;\n  var event = progressEvents.includes(type) ? new ProgressEventClass(type, {\n    lengthComputable: true,\n    loaded: (init === null || init === void 0 ? void 0 : init.loaded) || 0,\n    total: (init === null || init === void 0 ? void 0 : init.total) || 0\n  }) : new EventPolyfill_1.EventPolyfill(type, {\n    target: target,\n    currentTarget: target\n  });\n  return event;\n}\ncreateEvent$1.createEvent = createEvent;\nvar __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = commonjsGlobal && commonjsGlobal.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __values = commonjsGlobal && commonjsGlobal.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = commonjsGlobal && commonjsGlobal.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nObject.defineProperty(XMLHttpRequestOverride, \"__esModule\", {\n  value: true\n});\nXMLHttpRequestOverride.createXMLHttpRequestOverride = void 0;\n/**\n * XMLHttpRequest override class.\n * Inspired by https://github.com/marvinhagemeister/xhr-mocklet.\n */\nvar until_1 = lib$2;\nvar headers_utils_1 = lib$4;\nvar xmldom_1 = domParser;\nvar parseJson_1 = parseJson$1;\nvar toIsoResponse_1 = toIsoResponse$1;\nvar uuid_1 = uuid;\nvar bufferFrom_1 = bufferFrom$1;\nvar createEvent_1 = createEvent$1;\nvar createDebug = require$$3;\nvar createXMLHttpRequestOverride = function (options) {\n  var _a;\n  var pureXMLHttpRequest = options.pureXMLHttpRequest,\n    observer = options.observer,\n    resolver = options.resolver;\n  var debug = createDebug('XHR');\n  return _a = /** @class */function () {\n    function XMLHttpRequestOverride() {\n      // Collection of events modified by `addEventListener`/`removeEventListener` calls.\n      this._events = [];\n      this.UNSENT = 0;\n      this.OPENED = 1;\n      this.HEADERS_RECEIVED = 2;\n      this.LOADING = 3;\n      this.DONE = 4;\n      this.onreadystatechange = null;\n      /* Events */\n      this.onabort = null;\n      this.onerror = null;\n      this.onload = null;\n      this.onloadend = null;\n      this.onloadstart = null;\n      this.onprogress = null;\n      this.ontimeout = null;\n      this.url = '';\n      this.method = 'GET';\n      this.readyState = this.UNSENT;\n      this.withCredentials = false;\n      this.status = 200;\n      this.statusText = 'OK';\n      this.data = '';\n      this.response = '';\n      this.responseType = 'text';\n      this.responseText = '';\n      this.responseXML = null;\n      this.responseURL = '';\n      this.upload = null;\n      this.timeout = 0;\n      this._requestHeaders = new headers_utils_1.Headers();\n      this._responseHeaders = new headers_utils_1.Headers();\n    }\n    XMLHttpRequestOverride.prototype.setReadyState = function (nextState) {\n      if (nextState === this.readyState) {\n        return;\n      }\n      debug('readyState change %d -> %d', this.readyState, nextState);\n      this.readyState = nextState;\n      if (nextState !== this.UNSENT) {\n        debug('triggerring readystate change...');\n        this.trigger('readystatechange');\n      }\n    };\n    /**\n     * Triggers both direct callback and attached event listeners\n     * for the given event.\n     */\n    XMLHttpRequestOverride.prototype.trigger = function (eventName, options) {\n      var e_1, _a;\n      debug('trigger \"%s\" (%d)', eventName, this.readyState);\n      debug('resolve listener for event \"%s\"', eventName);\n      // @ts-expect-error XMLHttpRequest class has no index signature.\n      var callback = this[\"on\" + eventName];\n      callback === null || callback === void 0 ? void 0 : callback.call(this, createEvent_1.createEvent(this, eventName, options));\n      try {\n        for (var _b = __values(this._events), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var event_1 = _c.value;\n          if (event_1.name === eventName) {\n            debug('calling mock event listener \"%s\" (%d)', eventName, this.readyState);\n            event_1.listener.call(this, createEvent_1.createEvent(this, eventName, options));\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n      return this;\n    };\n    XMLHttpRequestOverride.prototype.reset = function () {\n      debug('reset');\n      this.setReadyState(this.UNSENT);\n      this.status = 200;\n      this.statusText = 'OK';\n      this.data = '';\n      this.response = null;\n      this.responseText = null;\n      this.responseXML = null;\n      this._requestHeaders = new headers_utils_1.Headers();\n      this._responseHeaders = new headers_utils_1.Headers();\n    };\n    XMLHttpRequestOverride.prototype.open = function (method, url, async, user, password) {\n      if (async === void 0) {\n        async = true;\n      }\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          debug = createDebug(\"XHR \" + method + \" \" + url);\n          debug('open', {\n            method: method,\n            url: url,\n            async: async,\n            user: user,\n            password: password\n          });\n          this.reset();\n          this.setReadyState(this.OPENED);\n          if (typeof url === 'undefined') {\n            this.url = method;\n            this.method = 'GET';\n          } else {\n            this.url = url;\n            this.method = method;\n            this.async = async;\n            this.user = user;\n            this.password = password;\n          }\n          return [2 /*return*/];\n        });\n      });\n    };\n\n    XMLHttpRequestOverride.prototype.send = function (data) {\n      var _this = this;\n      debug('send %s %s', this.method, this.url);\n      this.data = data || '';\n      var url;\n      try {\n        url = new URL(this.url);\n      } catch (error) {\n        // Assume a relative URL, if construction of a new `URL` instance fails.\n        // Since `XMLHttpRequest` always executed in a DOM-like environment,\n        // resolve the relative request URL against the current window location.\n        url = new URL(this.url, window.location.href);\n      }\n      debug('request headers', this._requestHeaders);\n      // Create an intercepted request instance exposed to the request intercepting middleware.\n      var isoRequest = {\n        id: uuid_1.uuidv4(),\n        url: url,\n        method: this.method,\n        body: this.data,\n        headers: this._requestHeaders\n      };\n      observer.emit('request', isoRequest);\n      debug('awaiting mocked response...');\n      Promise.resolve(until_1.until(function () {\n        return __awaiter(_this, void 0, void 0, function () {\n          return __generator(this, function (_a) {\n            return [2 /*return*/, resolver(isoRequest, this)];\n          });\n        });\n      })).then(function (_a) {\n        var _b;\n        var _c = __read(_a, 2),\n          middlewareException = _c[0],\n          mockedResponse = _c[1];\n        // When the request middleware throws an exception, error the request.\n        // This cancels the request and is similar to a network error.\n        if (middlewareException) {\n          debug('middleware function threw an exception!', middlewareException);\n          // No way to propagate the actual error message.\n          _this.trigger('error');\n          _this.abort();\n          return;\n        }\n        // Return a mocked response, if provided in the middleware.\n        if (mockedResponse) {\n          debug('received mocked response', mockedResponse);\n          // Trigger a loadstart event to indicate the initialization of the fetch.\n          _this.trigger('loadstart');\n          _this.status = mockedResponse.status || 200;\n          _this.statusText = mockedResponse.statusText || 'OK';\n          _this._responseHeaders = mockedResponse.headers ? headers_utils_1.objectToHeaders(mockedResponse.headers) : new headers_utils_1.Headers();\n          debug('set response status', _this.status, _this.statusText);\n          debug('set response headers', _this._responseHeaders);\n          // Mark that response headers has been received\n          // and trigger a ready state event to reflect received headers\n          // in a custom `onreadystatechange` callback.\n          _this.setReadyState(_this.HEADERS_RECEIVED);\n          debug('response type', _this.responseType);\n          _this.response = _this.getResponseBody(mockedResponse.body);\n          _this.responseText = mockedResponse.body || '';\n          _this.responseXML = _this.getResponseXML();\n          debug('set response body', _this.response);\n          if (mockedResponse.body && _this.response) {\n            _this.setReadyState(_this.LOADING);\n            // Presense of the mocked response implies a response body (not null).\n            // Presense of the coerced `this.response` implies the mocked body is valid.\n            var bodyBuffer = bufferFrom_1.bufferFrom(mockedResponse.body);\n            // Trigger a progress event based on the mocked response body.\n            _this.trigger('progress', {\n              loaded: bodyBuffer.length,\n              total: bodyBuffer.length\n            });\n          }\n          /**\n           * Explicitly mark the request as done so its response never hangs.\n           * @see https://github.com/mswjs/interceptors/issues/13\n           */\n          _this.setReadyState(_this.DONE);\n          // Trigger a load event to indicate the fetch has succeeded.\n          _this.trigger('load');\n          // Trigger a loadend event to indicate the fetch has completed.\n          _this.trigger('loadend');\n          observer.emit('response', isoRequest, toIsoResponse_1.toIsoResponse(mockedResponse));\n        } else {\n          debug('no mocked response received!');\n          // Perform an original request, when the request middleware returned no mocked response.\n          var originalRequest_1 = new pureXMLHttpRequest();\n          debug('opening an original request %s %s', _this.method, _this.url);\n          originalRequest_1.open(_this.method, _this.url, (_b = _this.async) !== null && _b !== void 0 ? _b : true, _this.user, _this.password);\n          // Reflect a successful state of the original request\n          // on the patched instance.\n          originalRequest_1.addEventListener('load', function () {\n            debug('original \"onload\"');\n            _this.status = originalRequest_1.status;\n            _this.statusText = originalRequest_1.statusText;\n            _this.responseURL = originalRequest_1.responseURL;\n            _this.responseType = originalRequest_1.responseType;\n            _this.response = originalRequest_1.response;\n            _this.responseText = originalRequest_1.responseText;\n            _this.responseXML = originalRequest_1.responseXML;\n            debug('set mock request readyState to DONE');\n            // Explicitly mark the mocked request instance as done\n            // so the response never hangs.\n            /**\n             * @note `readystatechange` listener is called TWICE\n             * in the case of unhandled request.\n             */\n            _this.setReadyState(_this.DONE);\n            debug('received original response', _this.status, _this.statusText);\n            debug('original response body:', _this.response);\n            var responseHeaders = originalRequest_1.getAllResponseHeaders();\n            debug('original response headers:\\n', responseHeaders);\n            _this._responseHeaders = headers_utils_1.stringToHeaders(responseHeaders);\n            debug('original response headers (normalized)', _this._responseHeaders);\n            debug('original response finished');\n            observer.emit('response', isoRequest, {\n              status: originalRequest_1.status,\n              statusText: originalRequest_1.statusText,\n              headers: _this._responseHeaders,\n              body: originalRequest_1.response\n            });\n          });\n          // Assign callbacks and event listeners from the intercepted XHR instance\n          // to the original XHR instance.\n          _this.propagateCallbacks(originalRequest_1);\n          _this.propagateListeners(originalRequest_1);\n          _this.propagateHeaders(originalRequest_1, _this._requestHeaders);\n          if (_this.async) {\n            originalRequest_1.timeout = _this.timeout;\n          }\n          debug('send', _this.data);\n          originalRequest_1.send(_this.data);\n        }\n      });\n    };\n    XMLHttpRequestOverride.prototype.abort = function () {\n      debug('abort');\n      if (this.readyState > this.UNSENT && this.readyState < this.DONE) {\n        this.setReadyState(this.UNSENT);\n        this.trigger('abort');\n      }\n    };\n    XMLHttpRequestOverride.prototype.dispatchEvent = function () {\n      return false;\n    };\n    XMLHttpRequestOverride.prototype.setRequestHeader = function (name, value) {\n      debug('set request header \"%s\" to \"%s\"', name, value);\n      this._requestHeaders.append(name, value);\n    };\n    XMLHttpRequestOverride.prototype.getResponseHeader = function (name) {\n      debug('get response header \"%s\"', name);\n      if (this.readyState < this.HEADERS_RECEIVED) {\n        debug('cannot return a header: headers not received (state: %s)', this.readyState);\n        return null;\n      }\n      var headerValue = this._responseHeaders.get(name);\n      debug('resolved response header \"%s\" to \"%s\"', name, headerValue, this._responseHeaders);\n      return headerValue;\n    };\n    XMLHttpRequestOverride.prototype.getAllResponseHeaders = function () {\n      debug('get all response headers');\n      if (this.readyState < this.HEADERS_RECEIVED) {\n        debug('cannot return headers: headers not received (state: %s)', this.readyState);\n        return '';\n      }\n      return headers_utils_1.headersToString(this._responseHeaders);\n    };\n    XMLHttpRequestOverride.prototype.addEventListener = function (name, listener) {\n      debug('addEventListener', name, listener);\n      this._events.push({\n        name: name,\n        listener: listener\n      });\n    };\n    XMLHttpRequestOverride.prototype.removeEventListener = function (name, listener) {\n      debug('removeEventListener', name, listener);\n      this._events = this._events.filter(function (storedEvent) {\n        return storedEvent.name !== name && storedEvent.listener !== listener;\n      });\n    };\n    XMLHttpRequestOverride.prototype.overrideMimeType = function () {};\n    /**\n     * Resolves the response based on the `responseType` value.\n     */\n    XMLHttpRequestOverride.prototype.getResponseBody = function (body) {\n      // Handle an improperly set \"null\" value of the mocked response body.\n      var textBody = body !== null && body !== void 0 ? body : '';\n      debug('coerced response body to', textBody);\n      switch (this.responseType) {\n        case 'json':\n          {\n            debug('resolving response body as JSON');\n            return parseJson_1.parseJson(textBody);\n          }\n        case 'blob':\n          {\n            var blobType = this.getResponseHeader('content-type') || 'text/plain';\n            debug('resolving response body as Blob', {\n              type: blobType\n            });\n            return new Blob([textBody], {\n              type: blobType\n            });\n          }\n        case 'arraybuffer':\n          {\n            debug('resolving response body as ArrayBuffer');\n            var arrayBuffer = bufferFrom_1.bufferFrom(textBody);\n            return arrayBuffer;\n          }\n        default:\n          return textBody;\n      }\n    };\n    XMLHttpRequestOverride.prototype.getResponseXML = function () {\n      var contentType = this.getResponseHeader('Content-Type');\n      if (contentType === 'application/xml' || contentType === 'text/xml') {\n        return new xmldom_1.DOMParser().parseFromString(this.responseText, contentType);\n      }\n      return null;\n    };\n    /**\n     * Propagates mock XMLHttpRequest instance callbacks\n     * to the given XMLHttpRequest instance.\n     */\n    XMLHttpRequestOverride.prototype.propagateCallbacks = function (request) {\n      request.onabort = this.abort;\n      request.onerror = this.onerror;\n      request.ontimeout = this.ontimeout;\n      request.onload = this.onload;\n      request.onloadstart = this.onloadstart;\n      request.onloadend = this.onloadend;\n      request.onprogress = this.onprogress;\n      request.onreadystatechange = this.onreadystatechange;\n    };\n    /**\n     * Propagates the mock XMLHttpRequest instance listeners\n     * to the given XMLHttpRequest instance.\n     */\n    XMLHttpRequestOverride.prototype.propagateListeners = function (request) {\n      debug('propagating request listeners (%d) to the original request', this._events.length, this._events);\n      this._events.forEach(function (_a) {\n        var name = _a.name,\n          listener = _a.listener;\n        request.addEventListener(name, listener);\n      });\n    };\n    XMLHttpRequestOverride.prototype.propagateHeaders = function (request, headers) {\n      debug('propagating request headers to the original request', headers);\n      // Preserve the request headers casing.\n      Object.entries(headers.raw()).forEach(function (_a) {\n        var _b = __read(_a, 2),\n          name = _b[0],\n          value = _b[1];\n        debug('setting \"%s\" (%s) header on the original request', name, value);\n        request.setRequestHeader(name, value);\n      });\n    };\n    return XMLHttpRequestOverride;\n  }(), /* Request state */\n  _a.UNSENT = 0, _a.OPENED = 1, _a.HEADERS_RECEIVED = 2, _a.LOADING = 3, _a.DONE = 4, _a;\n};\nXMLHttpRequestOverride.createXMLHttpRequestOverride = createXMLHttpRequestOverride;\nObject.defineProperty(XMLHttpRequest, \"__esModule\", {\n  value: true\n});\nvar interceptXMLHttpRequest_1 = XMLHttpRequest.interceptXMLHttpRequest = void 0;\nvar XMLHttpRequestOverride_1 = XMLHttpRequestOverride;\nvar debug = require$$3('XHR');\nvar pureXMLHttpRequest =\n// Although executed in node, certain processes emulate the DOM-like environment\n// (i.e. `js-dom` in Jest). The `window` object would be avilable in such environments.\ntypeof window === 'undefined' ? undefined : window.XMLHttpRequest;\n/**\n * Intercepts requests issued via `XMLHttpRequest`.\n */\nvar interceptXMLHttpRequest = function (observer, resolver) {\n  if (pureXMLHttpRequest) {\n    debug('patching \"XMLHttpRequest\" module...');\n    var XMLHttpRequestOverride = XMLHttpRequestOverride_1.createXMLHttpRequestOverride({\n      pureXMLHttpRequest: pureXMLHttpRequest,\n      observer: observer,\n      resolver: resolver\n    });\n    window.XMLHttpRequest = XMLHttpRequestOverride;\n  }\n  return function () {\n    if (pureXMLHttpRequest) {\n      debug('restoring modules...');\n      window.XMLHttpRequest = pureXMLHttpRequest;\n    }\n  };\n};\ninterceptXMLHttpRequest_1 = XMLHttpRequest.interceptXMLHttpRequest = interceptXMLHttpRequest;\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = Math.random() * 16 | 0;\n    const v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\n/**\r\n * Converts a given isomorphic request to a `MockedRequest` instance.\r\n */\nfunction parseIsomorphicRequest(request) {\n  const requestId = uuidv4();\n  request.headers.set('x-msw-request-id', requestId);\n  const mockedRequest = {\n    id: requestId,\n    url: request.url,\n    method: request.method,\n    body: parseBody(request.body, request.headers),\n    headers: request.headers,\n    cookies: {},\n    redirect: 'manual',\n    referrer: '',\n    keepalive: false,\n    cache: 'default',\n    mode: 'cors',\n    referrerPolicy: 'no-referrer',\n    integrity: '',\n    destination: 'document',\n    bodyUsed: false,\n    credentials: 'same-origin'\n  };\n  // Set mocked request cookies from the `cookie` header of the original request.\n  // No need to take `credentials` into account, because in Node.js requests are intercepted\n  // _after_ they happen. Request issuer should have already taken care of sending relevant cookies.\n  // Unlike browser, where interception is on the worker level, _before_ the request happens.\n  const requestCookiesString = request.headers.get('cookie');\n  // Attach all the cookies from the virtual cookie store.\n  setRequestCookies(mockedRequest);\n  const requestCookies = requestCookiesString ? parse_1(requestCookiesString) : {};\n  // Merge both direct request cookies and the cookies inherited\n  // from other same-origin requests in the cookie store.\n  mockedRequest.cookies = Object.assign(Object.assign({}, mockedRequest.cookies), requestCookies);\n  return mockedRequest;\n}\nfunction createFallbackRequestListener(context, options) {\n  const interceptor = lib.createInterceptor({\n    modules: [interceptFetch_1, interceptXMLHttpRequest_1],\n    resolver(request) {\n      return __awaiter$3(this, void 0, void 0, function* () {\n        const mockedRequest = parseIsomorphicRequest(request);\n        return handleRequest(mockedRequest, context.requestHandlers, options, context.emitter, {\n          transformResponse(response) {\n            return {\n              status: response.status,\n              statusText: response.statusText,\n              headers: response.headers.all(),\n              body: response.body\n            };\n          },\n          onMockedResponseSent(response, _ref11) {\n            let {\n              handler,\n              publicRequest,\n              parsedRequest\n            } = _ref11;\n            if (!options.quiet) {\n              handler.log(publicRequest, response, handler, parsedRequest);\n            }\n          }\n        });\n      });\n    }\n  });\n  interceptor.apply();\n  return interceptor;\n}\nfunction createFallbackStart(context) {\n  return function start(options) {\n    return __awaiter$3(this, void 0, void 0, function* () {\n      context.fallbackInterceptor = createFallbackRequestListener(context, options);\n      printStartMessage({\n        message: 'Mocking enabled (fallback mode).',\n        quiet: options.quiet\n      });\n      return undefined;\n    });\n  };\n}\nfunction createFallbackStop(context) {\n  return function stop() {\n    var _a, _b;\n    (_a = context.fallbackInterceptor) === null || _a === void 0 ? void 0 : _a.restore();\n    printStopMessage({\n      quiet: (_b = context.startOptions) === null || _b === void 0 ? void 0 : _b.quiet\n    });\n  };\n}\n\n/**\r\n * Pipes all emitted events from one emitter to another.\r\n */\nfunction pipeEvents(source, destination) {\n  const rawEmit = source.emit;\n  // @ts-ignore\n  if (rawEmit._isPiped) {\n    return;\n  }\n  source.emit = function (event) {\n    for (var _len5 = arguments.length, data = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n      data[_key5 - 1] = arguments[_key5];\n    }\n    destination.emit(event, ...data);\n    return rawEmit.call(this, event, ...data);\n  };\n  // @ts-ignore\n  source.emit._isPiped = true;\n}\n\n// Declare the list of event handlers on the module's scope\n// so it persists between Fash refreshes of the application's code.\nlet listeners = [];\n/**\r\n * Creates a new mock Service Worker registration\r\n * with the given request handlers.\r\n * @param {RequestHandler[]} requestHandlers List of request handlers\r\n * @see {@link https://mswjs.io/docs/api/setup-worker `setupWorker`}\r\n */\nfunction setupWorker() {\n  for (var _len6 = arguments.length, requestHandlers = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    requestHandlers[_key6] = arguments[_key6];\n  }\n  requestHandlers.forEach(handler => {\n    if (Array.isArray(handler)) throw new Error(devUtils.formatMessage('Failed to call \"setupWorker\" given an Array of request handlers (setupWorker([a, b])), expected to receive each handler individually: setupWorker(a, b).'));\n  });\n  // Error when attempting to run this function in a Node.js environment.\n  if (lib$6.exports.isNodeProcess()) {\n    throw new Error(devUtils.formatMessage('Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.'));\n  }\n  const emitter = new lib$3.StrictEventEmitter();\n  const publicEmitter = new lib$3.StrictEventEmitter();\n  pipeEvents(emitter, publicEmitter);\n  const context = {\n    startOptions: undefined,\n    worker: null,\n    registration: null,\n    requestHandlers: [...requestHandlers],\n    emitter,\n    workerChannel: {\n      on(eventType, callback) {\n        context.events.addListener(navigator.serviceWorker, 'message', event => {\n          // Avoid messages broadcasted from unrelated workers.\n          if (event.source !== context.worker) {\n            return;\n          }\n          const message = jsonParse(event.data);\n          if (!message) {\n            return;\n          }\n          if (message.type === eventType) {\n            callback(event, message);\n          }\n        });\n      },\n      send(type) {\n        var _a;\n        (_a = context.worker) === null || _a === void 0 ? void 0 : _a.postMessage(type);\n      }\n    },\n    events: {\n      addListener(target, eventType, callback) {\n        target.addEventListener(eventType, callback);\n        listeners.push({\n          eventType,\n          target,\n          callback\n        });\n        return () => {\n          target.removeEventListener(eventType, callback);\n        };\n      },\n      removeAllListeners() {\n        for (const {\n          target,\n          eventType,\n          callback\n        } of listeners) {\n          target.removeEventListener(eventType, callback);\n        }\n        listeners = [];\n      },\n      once(eventType) {\n        const bindings = [];\n        return new Promise((resolve, reject) => {\n          const handleIncomingMessage = event => {\n            try {\n              const message = JSON.parse(event.data);\n              if (message.type === eventType) {\n                resolve(message);\n              }\n            } catch (error) {\n              reject(error);\n            }\n          };\n          bindings.push(context.events.addListener(navigator.serviceWorker, 'message', handleIncomingMessage), context.events.addListener(navigator.serviceWorker, 'messageerror', reject));\n        }).finally(() => {\n          bindings.forEach(unbind => unbind());\n        });\n      }\n    },\n    useFallbackMode: !('serviceWorker' in navigator) || location.protocol === 'file:'\n  };\n  const startHandler = context.useFallbackMode ? createFallbackStart(context) : createStartHandler(context);\n  const stopHandler = context.useFallbackMode ? createFallbackStop(context) : createStop(context);\n  return {\n    start: prepareStartHandler(startHandler, context),\n    stop() {\n      context.events.removeAllListeners();\n      context.emitter.removeAllListeners();\n      publicEmitter.removeAllListeners();\n      stopHandler();\n    },\n    use() {\n      for (var _len7 = arguments.length, handlers = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        handlers[_key7] = arguments[_key7];\n      }\n      use(context.requestHandlers, ...handlers);\n    },\n    restoreHandlers() {\n      restoreHandlers(context.requestHandlers);\n    },\n    resetHandlers() {\n      for (var _len8 = arguments.length, nextHandlers = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        nextHandlers[_key8] = arguments[_key8];\n      }\n      context.requestHandlers = resetHandlers(requestHandlers, ...nextHandlers);\n    },\n    printHandlers() {\n      context.requestHandlers.forEach(handler => {\n        const {\n          header,\n          callFrame\n        } = handler.info;\n        const pragma = handler.info.hasOwnProperty('operationType') ? '[graphql]' : '[rest]';\n        console.groupCollapsed(`${pragma} ${header}`);\n        if (callFrame) {\n          console.log(`Declaration: ${callFrame}`);\n        }\n        console.log('Handler:', handler);\n        if (handler instanceof RestHandler) {\n          console.log('Match:', `https://mswjs.io/repl?path=${handler.info.path}`);\n        }\n        console.groupEnd();\n      });\n    },\n    events: {\n      on() {\n        return publicEmitter.on(...arguments);\n      },\n      removeListener() {\n        return publicEmitter.removeListener(...arguments);\n      },\n      removeAllListeners() {\n        return publicEmitter.removeAllListeners(...arguments);\n      }\n    }\n  };\n}\nexport { handleRequest, parseIsomorphicRequest, setupWorker };","map":{"version":3,"names":["i","context","c","commonjsGlobal","p","parse_1","l","lib$4","a","lib$6","j","jsonParse","_","__awaiter$3","d","devUtils","parseBody","g","getPublicUrlFromRequest","N","NetworkError","lib$5","getCleanUrl","R","RequestHandler","f","compose","createResponseComposition","e","defaultContext","b","defaultResponse","m","matchRequestUrl","r","response","isStringEqual","RestHandler","RESTMethods","rest","restContext","t","tryCatch","parseGraphQLRequest","G","GraphQLHandler","graphql","graphqlContext","mergeRight","require$$3","lib$3","StrictEventEmitter$1","events","exports","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ReflectOwnKeys","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","ProcessEmitWarning","warning","console","warn","NumberIsNaN","Number","isNaN","value","EventEmitter","init","once","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","create","setMaxListeners","n","_getMaxListeners","that","getMaxListeners","emit","type","arguments","length","push","doError","error","er","Error","err","message","handler","len","listeners","arrayClone","_addListener","prepend","existing","newListener","unshift","warned","w","String","name","emitter","count","addListener","on","prependListener","onceWrapper","fired","removeListener","wrapFn","_onceWrap","state","wrapped","bind","prependOnceListener","list","position","originalListener","shift","spliceOne","off","removeAllListeners","keys","key","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","listenerCount","eventNames","arr","copy","Array","index","pop","ret","Promise","resolve","reject","errorListener","resolver","slice","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","addEventListener","wrapListener","removeEventListener","__extends$1","__extends","extendStatics","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","__spreadArrays","s","il","k","jl","__esModule","StrictEventEmitter","events_1","_super","event","toString","data","_i","__createBinding","o","k2","StrictEventEmitter_1","lib$2","until$1","until","promise","catch","until_1$1","getWorkerByRegistration","registration","absoluteWorkerUrl","findWorker","allStates","active","installing","waiting","existingStates","filter","Boolean","mockWorker","find","worker","scriptURL","getAbsoluteWorkerUrl","relativeUrl","URL","location","origin","href","getWorkerInstance","url","options","mockRegistrations","navigator","serviceWorker","getRegistrations","then","registrations","controller","reload","existingRegistration","update","instance","register","isWorkerMissing","includes","scopeUrl","scope","formatMessage","printStartMessage","quiet","groupCollapsed","log","groupEnd","enableMocking","workerChannel","send","createBroadcastChannel","port","ports","postMessage","lib$1","CookieStore","setCookie","defaultParseOptions","decodeValues","map","silent","isNonEmptyString","str","trim","parseString","setCookieValue","parts","split","nameValue","join","assign","decodeURIComponent","cookie","forEach","part","sides","trimLeft","toLowerCase","expires","Date","maxAge","parseInt","secure","httpOnly","sameSite","parse$1","input","headers","sch","isArray","cookies","reduce","splitCookiesString","cookiesString","cookiesStrings","pos","start","ch","lastComma","nextStart","cookiesSeparatorFound","skipWhitespace","test","charAt","notSpecialChar","substring","parse","__rest","indexOf","propertyIsEnumerable","PERSISTENCY_KEY","set_cookie_parser_1","SUPPORTS_LOCAL_STORAGE","localStorage","store","Map","add","request","credentials","requestUrl","responseCookies","now","parsedResponseCookies","_a","prevCookies","deleteExpiredCookies","originCookies","documentCookies","document","getAll","deleteAll","delete","clear","hydrate","persistedCookies","getItem","parsedCookies","JSON","_ref","token","_b","removeItem","persist","serializedCookies","from","entries","_ref2","setItem","stringify","_ref3","getTime","size","default","__importDefault","mod","CookieStore_1","getAllCookies","getRequestCookies","setRequestCookies","_ref4","_ref5","pruneGetRequestBody","method","body","parseWorkerRequest","rawRequest","id","cache","referrer","referrerPolicy","redirect","mode","params","integrity","keepalive","destination","bodyUsed","Headers","getResponse","handlers","resolutionContext","relevantHandlers","result","executionResult","previousResults","run","shouldSkip","parsedResult","markAsSkipped","publicRequest","parsedRequest","jsLevenshtein","_min","d0","d1","d2","bx","ay","tmp","la","lb","charCodeAt","offset","x","y","d3","dd","dy","bx0","bx1","bx2","bx3","vector","MAX_MATCH_SCORE","MAX_SUGGESTION_COUNT","TYPE_MATCH_DELTA","groupHandlersByType","groups","getScoreForRestHandler","path","info","RegExp","Infinity","hasSameMethod","methodScoreDelta","requestPublicUrl","score","getScoreForGraphQLHandler","parsedQuery","operationName","operationType","hasSameOperationType","operationTypeScoreDelta","getSuggestedHandler","getScore","suggestedHandlers","acc","sort","_ref6","_ref7","leftScore","rightScore","_ref8","_ref9","getSuggestedHandlersMessage","header","onUnhandledRequest","strategy","parsedGraphQLQuery","handlerGroups","handlerSuggestion","publicUrl","requestHeader","messageTemplate","readResponseCookies","handleRequest","handleRequestOptions","_c","onBypassResponse","lookupResult","requiredLookupResult","transformedResponse","transformResponse","onMockedResponse","setTimeout","onMockedResponseSent","delay","createRequestListener","channel","payload","requestHandlers","all","_ref10","status","errorType","stack","requestIntegrityCheck","actualChecksum","deferNetworkRequestsUntil","predicatePromise","_this2","originalXhrSend","window","XMLHttpRequest","_len","_key","originalFetch","fetch","_len2","_key2","createResponseListener","responseJson","Response","isMockedResponse","requestId","validateWorkerScope","startsWith","createStartHandler","customOptions","startWorkerInstance","missingWorkerMessage","host","clearInterval","keepAliveInterval","integrityError","setInterval","startOptions","workerRegistration","waitUntilReady","printStopMessage","createStop","stop","use","currentHandlers","_len3","_key3","restoreHandlers","resetHandlers","initialHandlers","_len4","nextHandlers","_key4","DEFAULT_START_OPTIONS","mockServiceWorkerUrl","resolveStartOptions","initialOptions","prepareStartHandler","lib","createInterceptor$1","createInterceptor","strict_event_emitter_1$1","observer","cleanupFns","modules","interceptor","restore","remote","toIsoResponse$1","toIsoResponse","headers_utils_1$3","statusText","objectToHeaders","__assign$1","__assign","__awaiter$2","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","next","rejected","done","__generator$2","__generator","label","sent","trys","ops","verb","Symbol","iterator","v","op","__read$1","__read","ar","createRemoteResolver","createRemoteInterceptor","headers_utils_1$2","outvariant_1","strict_event_emitter_1","createInterceptor_1","toIsoResponse_1$2","requestReviver","invariant","process","connected","pid","handleParentMessage","serializedRequest","match","responseString","mockedResponse","_this","handleChildMessage","requestString","isoRequest_1","mockedResponse_1","serializedResponse","cleanup","__exportStar","getCleanUrl_1","uuid","uuidv4","uuidv4$1","replace","Math","random","__awaiter$1","__generator$1","interceptFetch_1","interceptFetch","headers_utils_1$1","toIsoResponse_1$1","uuid_1$1","debug$1","pureFetch","ref","isoRequest","isomorphicResponse","Request","text","flattenHeadersObject","_d","normalizeFetchResponse","headersToObject","XMLHttpRequestOverride","domParser","conventions$2","freeze","object","oc","MIME_TYPE","HTML","isHTML","XML_APPLICATION","XML_TEXT","XML_XHTML_APPLICATION","XML_SVG_IMAGE","NAMESPACE$3","uri","SVG","XML","XMLNS","NAMESPACE","entities$1","XML_ENTITIES","amp","apos","gt","lt","quot","HTML_ENTITIES","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","times","divide","forall","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","euro","trade","larr","uarr","rarr","darr","harr","crarr","lceil","rceil","lfloor","rfloor","loz","spades","clubs","hearts","diams","entityMap","sax$1","NAMESPACE$2","nameStartChar","nameChar","source","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","ParseError$1","locator","captureStackTrace","XMLReader$1","defaultNSMap","domBuilder","startDocument","_copy","errorHandler","endDocument","defaultNSMapCopy","fixedFromCharCode","code","surrogate1","surrogate2","fromCharCode","entityReplacer","substr","appendText","end","xt","characters","lineEnd","linePattern","exec","lineStart","lineNumber","columnNumber","parseStack","currentNSMap","closeMap","tagStart","doc","createTextNode","appendChild","currentElement","tagName","config","localNSMap","endMatch","endIgnoreCaseMach","endElement","localName","prefix","endPrefixMapping","fatalError","parseInstruction","parseDCC","el","ElementAttributes","parseElementStartPart","closed","fixSelfClosed","locator2","copyLocator","appendElement$1","parseHtmlSpecialContent","max","addAttribute","qname","startIndex","attributeNames","addValue","attrName","setTagName","qName","nsp","nsPrefix","startPrefixMapping","ns","startElement","elStartEnd","elEndStart","lastIndexOf","comment","startCDATA","endCDATA","matchs","pubid","sysid","lastMatch","startDTD","endDTD","processingInstruction","getLocalName","getLocator","getQName","getURI","getValue","buf","lastIndex","XMLReader","ParseError","dom","conventions$1","NAMESPACE$1","notEmptyString","splitOnASCIIWhitespace","orderedSetReducer","current","element","toOrderedSet","arrayIncludes","src","dest","_extends","Class","Super","pt","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","NodeList","item","nodeFilter","serializeToString","LiveNodeList","node","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","attr","getNamedItem","nodeName","setNamedItem","_ownerElement","setNamedItemNS","getNamedItemNS","namespaceURI","removeNamedItem","removeNamedItemNS","DOMImplementation$1","hasFeature","feature","version","createDocument","qualifiedName","doctype","Document","implementation","childNodes","root","createElementNS","createDocumentType","publicId","systemId","DocumentType","Node","firstChild","lastChild","previousSibling","nextSibling","attributes","parentNode","nodeValue","insertBefore","newChild","refChild","_insertBefore","replaceChild","oldChild","removeChild","_removeChild","hasChildNodes","cloneNode","deep","normalize","child","nodeType","appendData","isSupported","hasAttributes","lookupPrefix","_nsMap","lookupNamespaceURI","isDefaultNamespace","_xmlEncoder","_visitNode","callback","remove","_onUpdateChild","cs","previous","nextChild","cp","newFirst","newLast","pre","_appendSingleChild","documentElement","importNode","importedNode","getElementById","rtv","getAttribute","getElementsByClassName","classNames","classNamesSet","base","nodeClassNames","matches","nodeClassNamesSet","every","createElement","Element","attrs","createDocumentFragment","DocumentFragment","Text","createComment","Comment","createCDATASection","CDATASection","createProcessingInstruction","ProcessingInstruction","createAttribute","Attr","specified","createEntityReference","EntityReference","pl","createAttributeNS","hasAttribute","getAttributeNode","setAttribute","setAttributeNode","removeAttribute","removeAttributeNode","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagName","getElementsByTagNameNS","CharacterData","substringData","insertData","replaceData","deleteData","splitText","newText","newNode","Notation","Entity","XMLSerializer","isHtml","nodeSerializeToString","refNode","visibleNamespaces","namespace","needNamespaceDefine","addSerializedAttribute","prefixedNodeName","defaultNS","ai","nsi","internalSubset","node2","attrs2","$$length","getTextContent","DOMImplementation","conventions","entities","DOMParser","parseFromString","mimeType","sax","DOMHandler","xmlns","setDocumentLocator","buildErrorHandler","xml","errorImpl","isCallback","build","fn","msg","_locator","cdata","documentURI","appendElement","ins","ignorableWhitespace","chars","_toString","charNode","skippedEntity","comm","impl","dt","java","lang","hander","__DOMHandler","parseJson$1","parseJson","json","bufferFrom$1","bufferFrom","encodedString","encodeURIComponent","binaryString","char","buffer","Uint8Array","createEvent$1","EventPolyfill$1","EventPolyfill","AT_TARGET","BUBBLING_PHASE","CAPTURING_PHASE","NONE","srcElement","currentTarget","eventPhase","isTrusted","composed","cancelable","defaultPrevented","bubbles","lengthComputable","loaded","total","cancelBubble","returnValue","timeStamp","composedPath","initEvent","preventDefault","stopPropagation","stopImmediatePropagation","ProgressEventPolyfill$1","ProgressEventPolyfill","EventPolyfill_1$1","createEvent","EventPolyfill_1","ProgressEventPolyfill_1","SUPPORTS_PROGRESS_EVENT","ProgressEvent","progressEvents","ProgressEventClass","__values","createXMLHttpRequestOverride","until_1","headers_utils_1","xmldom_1","parseJson_1","toIsoResponse_1","uuid_1","bufferFrom_1","createEvent_1","createDebug","pureXMLHttpRequest","debug","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","onreadystatechange","onabort","onerror","onload","onloadend","onloadstart","onprogress","ontimeout","readyState","withCredentials","responseType","responseText","responseXML","responseURL","upload","timeout","_requestHeaders","_responseHeaders","setReadyState","nextState","trigger","eventName","e_1","event_1","e_1_1","return","reset","open","async","user","password","middlewareException","abort","getResponseBody","getResponseXML","bodyBuffer","originalRequest_1","responseHeaders","getAllResponseHeaders","stringToHeaders","propagateCallbacks","propagateListeners","propagateHeaders","dispatchEvent","setRequestHeader","append","getResponseHeader","headerValue","headersToString","storedEvent","overrideMimeType","textBody","blobType","Blob","arrayBuffer","contentType","raw","interceptXMLHttpRequest_1","interceptXMLHttpRequest","XMLHttpRequestOverride_1","parseIsomorphicRequest","mockedRequest","requestCookiesString","requestCookies","createFallbackRequestListener","_ref11","createFallbackStart","fallbackInterceptor","createFallbackStop","pipeEvents","rawEmit","_isPiped","_len5","_key5","setupWorker","_len6","_key6","isNodeProcess","publicEmitter","eventType","bindings","handleIncomingMessage","finally","unbind","useFallbackMode","protocol","startHandler","stopHandler","_len7","_key7","_len8","_key8","printHandlers","callFrame","pragma"],"sources":["/workspace/pp5-tick-off-frontend/node_modules/msw/lib/esm/index.js"],"sourcesContent":["export { i as context } from './index-deps.js';\nimport { c as commonjsGlobal, p as parse_1, l as lib$4, a as lib$6, j as jsonParse } from './fetch-deps.js';\nimport { _ as __awaiter$3, d as devUtils, p as parseBody, g as getPublicUrlFromRequest, N as NetworkError, l as lib$5, a as getCleanUrl } from './RequestHandler-deps.js';\nexport { R as RequestHandler, f as compose, c as createResponseComposition, e as defaultContext, b as defaultResponse, m as matchRequestUrl, r as response } from './RequestHandler-deps.js';\nimport { i as isStringEqual, R as RestHandler } from './rest-deps.js';\nexport { a as RESTMethods, R as RestHandler, r as rest, b as restContext } from './rest-deps.js';\nimport { t as tryCatch, p as parseGraphQLRequest, G as GraphQLHandler } from './graphql-deps.js';\nexport { G as GraphQLHandler, g as graphql, a as graphqlContext } from './graphql-deps.js';\nimport { m as mergeRight } from './errors-deps.js';\nimport require$$3 from 'debug';\nimport './xml-deps.js';\n\nvar lib$3 = {};\n\nvar StrictEventEmitter$1 = {};\n\nvar events = {exports: {}};\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  };\n\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nevents.exports = EventEmitter;\nevents.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    }\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\nvar __extends$1 = (commonjsGlobal && commonjsGlobal.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (commonjsGlobal && commonjsGlobal.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nStrictEventEmitter$1.__esModule = true;\nStrictEventEmitter$1.StrictEventEmitter = void 0;\nvar events_1 = events.exports;\nvar StrictEventEmitter = /** @class */ (function (_super) {\n    __extends$1(StrictEventEmitter, _super);\n    function StrictEventEmitter() {\n        return _super.call(this) || this;\n    }\n    StrictEventEmitter.prototype.on = function (event, listener) {\n        return _super.prototype.on.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.once = function (event, listener) {\n        return _super.prototype.on.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.off = function (event, listener) {\n        return _super.prototype.off.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.emit = function (event) {\n        var data = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            data[_i - 1] = arguments[_i];\n        }\n        return _super.prototype.emit.apply(this, __spreadArrays([event.toString()], data));\n    };\n    StrictEventEmitter.prototype.addListener = function (event, listener) {\n        return _super.prototype.addListener.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.removeListener = function (event, listener) {\n        return _super.prototype.removeListener.call(this, event.toString(), listener);\n    };\n    return StrictEventEmitter;\n}(events_1.EventEmitter));\nStrictEventEmitter$1.StrictEventEmitter = StrictEventEmitter;\n\n(function (exports) {\nvar __createBinding = (commonjsGlobal && commonjsGlobal.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.StrictEventEmitter = void 0;\nvar StrictEventEmitter_1 = StrictEventEmitter$1;\n__createBinding(exports, StrictEventEmitter_1, \"StrictEventEmitter\");\n}(lib$3));\n\nvar lib$2 = {};\n\nvar until$1 = {};\n\nObject.defineProperty(until$1, \"__esModule\", { value: true });\n/**\n * Gracefully handles a given Promise factory.\n * @example\n * cosnt [error, data] = await until(() => asyncAction())\n */\nuntil$1.until = async (promise) => {\n    try {\n        const data = await promise().catch((error) => {\n            throw error;\n        });\n        return [null, data];\n    }\n    catch (error) {\n        return [error, null];\n    }\n};\n\nObject.defineProperty(lib$2, \"__esModule\", { value: true });\nvar until_1$1 = until$1;\nvar until = lib$2.until = until_1$1.until;\n\n/**\r\n * Attempts to resolve a Service Worker instance from a given registration,\r\n * regardless of its state (active, installing, waiting).\r\n */\r\nconst getWorkerByRegistration = (registration, absoluteWorkerUrl, findWorker) => {\r\n    const allStates = [\r\n        registration.active,\r\n        registration.installing,\r\n        registration.waiting,\r\n    ];\r\n    const existingStates = allStates.filter(Boolean);\r\n    const mockWorker = existingStates.find((worker) => {\r\n        return findWorker(worker.scriptURL, absoluteWorkerUrl);\r\n    });\r\n    return mockWorker || null;\r\n};\n\n/**\r\n * Returns an absolute Service Worker URL based on the given\r\n * relative URL (known during the registration).\r\n */\r\nfunction getAbsoluteWorkerUrl(relativeUrl) {\r\n    return new URL(relativeUrl, location.origin).href;\r\n}\n\n/**\r\n * Returns an active Service Worker instance.\r\n * When not found, registers a new Service Worker.\r\n */\r\nconst getWorkerInstance = (url, options = {}, findWorker) => __awaiter$3(void 0, void 0, void 0, function* () {\r\n    // Resolve the absolute Service Worker URL.\r\n    const absoluteWorkerUrl = getAbsoluteWorkerUrl(url);\r\n    const mockRegistrations = yield navigator.serviceWorker\r\n        .getRegistrations()\r\n        .then((registrations) => registrations.filter((registration) => getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker)));\r\n    if (!navigator.serviceWorker.controller && mockRegistrations.length > 0) {\r\n        // Reload the page when it has associated workers, but no active controller.\r\n        // The absence of a controller can mean either:\r\n        // - page has no Service Worker associated with it\r\n        // - page has been hard-reloaded and its workers won't be used until the next reload.\r\n        // Since we've checked that there are registrations associated with this page,\r\n        // at this point we are sure it's hard reload that falls into this clause.\r\n        location.reload();\r\n    }\r\n    const [existingRegistration] = mockRegistrations;\r\n    if (existingRegistration) {\r\n        // When the Service Worker is registered, update it and return the reference.\r\n        return existingRegistration.update().then(() => {\r\n            return [\r\n                getWorkerByRegistration(existingRegistration, absoluteWorkerUrl, findWorker),\r\n                existingRegistration,\r\n            ];\r\n        });\r\n    }\r\n    // When the Service Worker wasn't found, register it anew and return the reference.\r\n    const [error, instance] = yield until(() => __awaiter$3(void 0, void 0, void 0, function* () {\r\n        const registration = yield navigator.serviceWorker.register(url, options);\r\n        return [\r\n            // Compare existing worker registration by its worker URL,\r\n            // to prevent irrelevant workers to resolve here (such as Codesandbox worker).\r\n            getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker),\r\n            registration,\r\n        ];\r\n    }));\r\n    // Handle Service Worker registration errors.\r\n    if (error) {\r\n        const isWorkerMissing = error.message.includes('(404)');\r\n        // Produce a custom error message when given a non-existing Service Worker url.\r\n        // Suggest developers to check their setup.\r\n        if (isWorkerMissing) {\r\n            const scopeUrl = new URL((options === null || options === void 0 ? void 0 : options.scope) || '/', location.href);\r\n            throw new Error(devUtils.formatMessage(`\\\nFailed to register a Service Worker for scope ('${scopeUrl.href}') with script ('${absoluteWorkerUrl}'): Service Worker script does not exist at the given path.\n\nDid you forget to run \"npx msw init <PUBLIC_DIR>\"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`));\r\n        }\r\n        // Fallback error message for any other registration errors.\r\n        throw new Error(devUtils.formatMessage('Failed to register the Service Worker:\\n\\n%s', error.message));\r\n    }\r\n    return instance;\r\n});\n\n/**\r\n * Prints a worker activation message in the browser's console.\r\n */\r\nfunction printStartMessage(args = {}) {\r\n    if (args.quiet) {\r\n        return;\r\n    }\r\n    const message = args.message || 'Mocking enabled.';\r\n    console.groupCollapsed(`%c${devUtils.formatMessage(message)}`, 'color:orangered;font-weight:bold;');\r\n    console.log('%cDocumentation: %chttps://mswjs.io/docs', 'font-weight:bold', 'font-weight:normal');\r\n    console.log('Found an issue? https://github.com/mswjs/msw/issues');\r\n    console.groupEnd();\r\n}\n\n/**\r\n * Signals the worker to enable the interception of requests.\r\n */\r\nfunction enableMocking(context, options) {\r\n    return __awaiter$3(this, void 0, void 0, function* () {\r\n        context.workerChannel.send('MOCK_ACTIVATE');\r\n        return context.events.once('MOCKING_ENABLED').then(() => {\r\n            printStartMessage({ quiet: options.quiet });\r\n        });\r\n    });\r\n}\n\n/**\r\n * Creates a communication channel between the client\r\n * and the Service Worker associated with the given event.\r\n */\r\nconst createBroadcastChannel = (event) => {\r\n    const port = event.ports[0];\r\n    return {\r\n        /**\r\n         * Sends a text message to the connected Service Worker.\r\n         */\r\n        send(message) {\r\n            if (port) {\r\n                port.postMessage(message);\r\n            }\r\n        },\r\n    };\r\n};\n\nvar lib$1 = {};\n\nvar CookieStore = {};\n\nvar setCookie = {exports: {}};\n\nvar defaultParseOptions = {\n  decodeValues: true,\n  map: false,\n  silent: false,\n};\n\nfunction isNonEmptyString(str) {\n  return typeof str === \"string\" && !!str.trim();\n}\n\nfunction parseString(setCookieValue, options) {\n  var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n  var nameValue = parts.shift().split(\"=\");\n  var name = nameValue.shift();\n  var value = nameValue.join(\"=\"); // everything after the first =, joined by a \"=\" if there was more than one part\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  try {\n    value = options.decodeValues ? decodeURIComponent(value) : value; // decode cookie value\n  } catch (e) {\n    console.error(\n      \"set-cookie-parser encountered an error while decoding a cookie with value '\" +\n        value +\n        \"'. Set options.decodeValues to false to disable this feature.\",\n      e\n    );\n  }\n\n  var cookie = {\n    name: name, // grab everything before the first =\n    value: value,\n  };\n\n  parts.forEach(function (part) {\n    var sides = part.split(\"=\");\n    var key = sides.shift().trimLeft().toLowerCase();\n    var value = sides.join(\"=\");\n    if (key === \"expires\") {\n      cookie.expires = new Date(value);\n    } else if (key === \"max-age\") {\n      cookie.maxAge = parseInt(value, 10);\n    } else if (key === \"secure\") {\n      cookie.secure = true;\n    } else if (key === \"httponly\") {\n      cookie.httpOnly = true;\n    } else if (key === \"samesite\") {\n      cookie.sameSite = value;\n    } else {\n      cookie[key] = value;\n    }\n  });\n\n  return cookie;\n}\n\nfunction parse$1(input, options) {\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!input) {\n    if (!options.map) {\n      return [];\n    } else {\n      return {};\n    }\n  }\n\n  if (input.headers && input.headers[\"set-cookie\"]) {\n    // fast-path for node.js (which automatically normalizes header names to lower-case\n    input = input.headers[\"set-cookie\"];\n  } else if (input.headers) {\n    // slow-path for other environments - see #25\n    var sch =\n      input.headers[\n        Object.keys(input.headers).find(function (key) {\n          return key.toLowerCase() === \"set-cookie\";\n        })\n      ];\n    // warn if called on a request-like object with a cookie header rather than a set-cookie header - see #34, 36\n    if (!sch && input.headers.cookie && !options.silent) {\n      console.warn(\n        \"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\"\n      );\n    }\n    input = sch;\n  }\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!options.map) {\n    return input.filter(isNonEmptyString).map(function (str) {\n      return parseString(str, options);\n    });\n  } else {\n    var cookies = {};\n    return input.filter(isNonEmptyString).reduce(function (cookies, str) {\n      var cookie = parseString(str, options);\n      cookies[cookie.name] = cookie;\n      return cookies;\n    }, cookies);\n  }\n}\n\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n\n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\nfunction splitCookiesString(cookiesString) {\n  if (Array.isArray(cookiesString)) {\n    return cookiesString;\n  }\n  if (typeof cookiesString !== \"string\") {\n    return [];\n  }\n\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos;\n        pos += 1;\n\n        skipWhitespace();\n        nextStart = pos;\n\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n\n        // currently special character\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          // we found cookies separator\n          cookiesSeparatorFound = true;\n          // pos is inside the next cookie, so back up and return it.\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n\n  return cookiesStrings;\n}\n\nsetCookie.exports = parse$1;\nsetCookie.exports.parse = parse$1;\nsetCookie.exports.parseString = parseString;\nsetCookie.exports.splitCookiesString = splitCookiesString;\n\n(function (exports) {\nvar __rest = (commonjsGlobal && commonjsGlobal.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PERSISTENCY_KEY = void 0;\nconst set_cookie_parser_1 = setCookie.exports;\nexports.PERSISTENCY_KEY = 'MSW_COOKIE_STORE';\nconst SUPPORTS_LOCAL_STORAGE = typeof localStorage !== 'undefined';\nclass CookieStore {\n    constructor() {\n        this.store = new Map();\n    }\n    /**\n     * Sets the given request cookies into the store.\n     * Respects the `request.credentials` policy.\n     */\n    add(request, response) {\n        if (request.credentials === 'omit') {\n            return;\n        }\n        const requestUrl = new URL(request.url);\n        const responseCookies = response.headers.get('set-cookie');\n        if (!responseCookies) {\n            return;\n        }\n        const now = Date.now();\n        const parsedResponseCookies = set_cookie_parser_1.parse(responseCookies).map((_a) => {\n            var { maxAge } = _a, cookie = __rest(_a, [\"maxAge\"]);\n            return (Object.assign(Object.assign({}, cookie), { expires: maxAge === undefined ? cookie.expires : new Date(now + maxAge * 1000), maxAge }));\n        });\n        const prevCookies = this.store.get(requestUrl.origin) || new Map();\n        parsedResponseCookies.forEach((cookie) => {\n            this.store.set(requestUrl.origin, prevCookies.set(cookie.name, cookie));\n        });\n    }\n    /**\n     * Returns cookies relevant to the given request\n     * and its `request.credentials` policy.\n     */\n    get(request) {\n        this.deleteExpiredCookies();\n        const requestUrl = new URL(request.url);\n        const originCookies = this.store.get(requestUrl.origin) || new Map();\n        switch (request.credentials) {\n            case 'include': {\n                const documentCookies = set_cookie_parser_1.parse(document.cookie);\n                documentCookies.forEach((cookie) => {\n                    originCookies.set(cookie.name, cookie);\n                });\n                return originCookies;\n            }\n            case 'same-origin': {\n                return originCookies;\n            }\n            default:\n                return new Map();\n        }\n    }\n    /**\n     * Returns a collection of all stored cookies.\n     */\n    getAll() {\n        this.deleteExpiredCookies();\n        return this.store;\n    }\n    /**\n     * Deletes all cookies associated with the given request.\n     */\n    deleteAll(request) {\n        const requestUrl = new URL(request.url);\n        this.store.delete(requestUrl.origin);\n    }\n    /**\n     * Clears the entire cookie store.\n     */\n    clear() {\n        this.store.clear();\n    }\n    /**\n     * Hydrates the virtual cookie store from the `localStorage` if defined.\n     */\n    hydrate() {\n        if (!SUPPORTS_LOCAL_STORAGE) {\n            return;\n        }\n        const persistedCookies = localStorage.getItem(exports.PERSISTENCY_KEY);\n        if (persistedCookies) {\n            try {\n                const parsedCookies = JSON.parse(persistedCookies);\n                parsedCookies.forEach(([origin, cookies]) => {\n                    this.store.set(origin, new Map(cookies.map((_a) => {\n                        var [token, _b] = _a, { expires } = _b, cookie = __rest(_b, [\"expires\"]);\n                        return [\n                            token,\n                            expires === undefined\n                                ? cookie\n                                : Object.assign(Object.assign({}, cookie), { expires: new Date(expires) }),\n                        ];\n                    })));\n                });\n            }\n            catch (error) {\n                console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key \"${exports.PERSISTENCY_KEY}\").\n\nStored value:\n${localStorage.getItem(exports.PERSISTENCY_KEY)}\n\nThrown exception:\n${error}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`);\n                localStorage.removeItem(exports.PERSISTENCY_KEY);\n            }\n        }\n    }\n    /**\n     * Persists the current virtual cookies into the `localStorage` if defined,\n     * so they are available on the next page load.\n     */\n    persist() {\n        if (!SUPPORTS_LOCAL_STORAGE) {\n            return;\n        }\n        const serializedCookies = Array.from(this.store.entries()).map(([origin, cookies]) => {\n            return [origin, Array.from(cookies.entries())];\n        });\n        localStorage.setItem(exports.PERSISTENCY_KEY, JSON.stringify(serializedCookies));\n    }\n    deleteExpiredCookies() {\n        const now = Date.now();\n        this.store.forEach((originCookies, origin) => {\n            originCookies.forEach(({ expires, name }) => {\n                if (expires !== undefined && expires.getTime() <= now) {\n                    originCookies.delete(name);\n                }\n            });\n            if (originCookies.size === 0) {\n                this.store.delete(origin);\n            }\n        });\n    }\n}\nexports.default = new CookieStore();\n}(CookieStore));\n\n(function (exports) {\nvar __importDefault = (commonjsGlobal && commonjsGlobal.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PERSISTENCY_KEY = exports.store = void 0;\nvar CookieStore_1 = CookieStore;\nObject.defineProperty(exports, \"store\", { enumerable: true, get: function () { return __importDefault(CookieStore_1).default; } });\nObject.defineProperty(exports, \"PERSISTENCY_KEY\", { enumerable: true, get: function () { return CookieStore_1.PERSISTENCY_KEY; } });\n}(lib$1));\n\nfunction getAllCookies() {\r\n    return parse_1(document.cookie);\r\n}\r\n/**\r\n * Returns relevant document cookies based on the request `credentials` option.\r\n */\r\nfunction getRequestCookies(request) {\r\n    /**\r\n     * @note No cookies persist on the document in Node.js: no document.\r\n     */\r\n    if (typeof location === 'undefined') {\r\n        return {};\r\n    }\r\n    switch (request.credentials) {\r\n        case 'same-origin': {\r\n            // Return document cookies only when requested a resource\r\n            // from the same origin as the current document.\r\n            return location.origin === request.url.origin ? getAllCookies() : {};\r\n        }\r\n        case 'include': {\r\n            // Return all document cookies.\r\n            return getAllCookies();\r\n        }\r\n        default: {\r\n            return {};\r\n        }\r\n    }\r\n}\n\nfunction setRequestCookies(request) {\r\n    var _a;\r\n    lib$1.store.hydrate();\r\n    request.cookies = Object.assign(Object.assign({}, getRequestCookies(request)), Array.from((_a = lib$1.store.get(Object.assign(Object.assign({}, request), { url: request.url.toString() }))) === null || _a === void 0 ? void 0 : _a.entries()).reduce((cookies, [name, { value }]) => Object.assign(cookies, { [name]: value }), {}));\r\n    request.headers.set('cookie', Object.entries(request.cookies)\r\n        .map(([name, value]) => `${name}=${value}`)\r\n        .join('; '));\r\n}\n\n/**\r\n * Ensures that an empty GET request body is always represented as `undefined`.\r\n */\r\nfunction pruneGetRequestBody(request) {\r\n    if (request.method &&\r\n        isStringEqual(request.method, 'GET') &&\r\n        request.body === '') {\r\n        return undefined;\r\n    }\r\n    return request.body;\r\n}\n\n/**\r\n * Converts a given request received from the Service Worker\r\n * into a `MockedRequest` instance.\r\n */\r\nfunction parseWorkerRequest(rawRequest) {\r\n    const request = {\r\n        id: rawRequest.id,\r\n        cache: rawRequest.cache,\r\n        credentials: rawRequest.credentials,\r\n        method: rawRequest.method,\r\n        url: new URL(rawRequest.url),\r\n        referrer: rawRequest.referrer,\r\n        referrerPolicy: rawRequest.referrerPolicy,\r\n        redirect: rawRequest.redirect,\r\n        mode: rawRequest.mode,\r\n        params: {},\r\n        cookies: {},\r\n        integrity: rawRequest.integrity,\r\n        keepalive: rawRequest.keepalive,\r\n        destination: rawRequest.destination,\r\n        body: pruneGetRequestBody(rawRequest),\r\n        bodyUsed: rawRequest.bodyUsed,\r\n        headers: new lib$4.Headers(rawRequest.headers),\r\n    };\r\n    // Set document cookies on the request.\r\n    setRequestCookies(request);\r\n    // Parse the request's body based on the \"Content-Type\" header.\r\n    request.body = parseBody(request.body, request.headers);\r\n    return request;\r\n}\n\n/**\r\n * Returns a mocked response for a given request using following request handlers.\r\n */\r\nconst getResponse = (request, handlers, resolutionContext) => __awaiter$3(void 0, void 0, void 0, function* () {\r\n    const relevantHandlers = handlers.filter((handler) => {\r\n        return handler.test(request, resolutionContext);\r\n    });\r\n    if (relevantHandlers.length === 0) {\r\n        return {\r\n            handler: undefined,\r\n            response: undefined,\r\n        };\r\n    }\r\n    const result = yield relevantHandlers.reduce((executionResult, handler) => __awaiter$3(void 0, void 0, void 0, function* () {\r\n        const previousResults = yield executionResult;\r\n        if (!!(previousResults === null || previousResults === void 0 ? void 0 : previousResults.response)) {\r\n            return executionResult;\r\n        }\r\n        const result = yield handler.run(request, resolutionContext);\r\n        if (result === null || result.handler.shouldSkip) {\r\n            return null;\r\n        }\r\n        if (!result.response) {\r\n            return {\r\n                request: result.request,\r\n                handler: result.handler,\r\n                response: undefined,\r\n                parsedResult: result.parsedResult,\r\n            };\r\n        }\r\n        if (result.response.once) {\r\n            handler.markAsSkipped(true);\r\n        }\r\n        return result;\r\n    }), Promise.resolve(null));\r\n    // Although reducing a list of relevant request handlers, it's possible\r\n    // that in the end there will be no handler associted with the request\r\n    // (i.e. if relevant handlers are fall-through).\r\n    if (!result) {\r\n        return {\r\n            handler: undefined,\r\n            response: undefined,\r\n        };\r\n    }\r\n    return {\r\n        handler: result.handler,\r\n        publicRequest: result.request,\r\n        parsedRequest: result.parsedResult,\r\n        response: result.response,\r\n    };\r\n});\n\nvar jsLevenshtein = (function()\n{\n  function _min(d0, d1, d2, bx, ay)\n  {\n    return d0 < d1 || d2 < d1\n        ? d0 > d2\n            ? d2 + 1\n            : d0 + 1\n        : bx === ay\n            ? d1\n            : d1 + 1;\n  }\n\n  return function(a, b)\n  {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = (x += 4);\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n})();\n\nconst MAX_MATCH_SCORE = 3;\r\nconst MAX_SUGGESTION_COUNT = 4;\r\nconst TYPE_MATCH_DELTA = 0.5;\r\nfunction groupHandlersByType(handlers) {\r\n    return handlers.reduce((groups, handler) => {\r\n        if (handler instanceof RestHandler) {\r\n            groups.rest.push(handler);\r\n        }\r\n        if (handler instanceof GraphQLHandler) {\r\n            groups.graphql.push(handler);\r\n        }\r\n        return groups;\r\n    }, {\r\n        rest: [],\r\n        graphql: [],\r\n    });\r\n}\r\nfunction getScoreForRestHandler() {\r\n    return (request, handler) => {\r\n        const { path, method } = handler.info;\r\n        if (path instanceof RegExp) {\r\n            return Infinity;\r\n        }\r\n        const hasSameMethod = isStringEqual(request.method, method);\r\n        // Always treat a handler with the same method as a more similar one.\r\n        const methodScoreDelta = hasSameMethod ? TYPE_MATCH_DELTA : 0;\r\n        const requestPublicUrl = getPublicUrlFromRequest(request);\r\n        const score = jsLevenshtein(requestPublicUrl, path);\r\n        return score - methodScoreDelta;\r\n    };\r\n}\r\nfunction getScoreForGraphQLHandler(parsedQuery) {\r\n    return (_, handler) => {\r\n        if (typeof parsedQuery.operationName === 'undefined') {\r\n            return Infinity;\r\n        }\r\n        const { operationType, operationName } = handler.info;\r\n        const hasSameOperationType = parsedQuery.operationType === operationType;\r\n        // Always treat a handler with the same operation type as a more similar one.\r\n        const operationTypeScoreDelta = hasSameOperationType ? TYPE_MATCH_DELTA : 0;\r\n        const score = jsLevenshtein(parsedQuery.operationName, operationName);\r\n        return score - operationTypeScoreDelta;\r\n    };\r\n}\r\nfunction getSuggestedHandler(request, handlers, getScore) {\r\n    const suggestedHandlers = handlers\r\n        .reduce((acc, handler) => {\r\n        const score = getScore(request, handler);\r\n        return acc.concat([[score, handler]]);\r\n    }, [])\r\n        .sort(([leftScore], [rightScore]) => {\r\n        return leftScore - rightScore;\r\n    })\r\n        .filter(([score]) => {\r\n        return score <= MAX_MATCH_SCORE;\r\n    })\r\n        .slice(0, MAX_SUGGESTION_COUNT)\r\n        .map(([, handler]) => handler);\r\n    return suggestedHandlers;\r\n}\r\nfunction getSuggestedHandlersMessage(handlers) {\r\n    if (handlers.length > 1) {\r\n        return `\\\nDid you mean to request one of the following resources instead?\n\n${handlers.map((handler) => `  • ${handler.info.header}`).join('\\n')}`;\r\n    }\r\n    return `Did you mean to request \"${handlers[0].info.header}\" instead?`;\r\n}\r\nfunction onUnhandledRequest(request, handlers, strategy = 'warn') {\r\n    if (typeof strategy === 'function') {\r\n        strategy(request);\r\n        return;\r\n    }\r\n    /**\r\n     * @note Ignore exceptions during GraphQL request parsing because at this point\r\n     * we cannot assume the unhandled request is a valid GraphQL request.\r\n     * If the GraphQL parsing fails, just don't treat it as a GraphQL request.\r\n     */\r\n    const parsedGraphQLQuery = tryCatch(() => parseGraphQLRequest(request));\r\n    const handlerGroups = groupHandlersByType(handlers);\r\n    const relevantHandlers = parsedGraphQLQuery\r\n        ? handlerGroups.graphql\r\n        : handlerGroups.rest;\r\n    const suggestedHandlers = getSuggestedHandler(request, relevantHandlers, parsedGraphQLQuery\r\n        ? getScoreForGraphQLHandler(parsedGraphQLQuery)\r\n        : getScoreForRestHandler());\r\n    const handlerSuggestion = suggestedHandlers.length > 0\r\n        ? getSuggestedHandlersMessage(suggestedHandlers)\r\n        : '';\r\n    const publicUrl = getPublicUrlFromRequest(request);\r\n    const requestHeader = parsedGraphQLQuery\r\n        ? `${parsedGraphQLQuery.operationType} ${parsedGraphQLQuery.operationName} (${request.method} ${publicUrl})`\r\n        : `${request.method} ${publicUrl}`;\r\n    const messageTemplate = [\r\n        `captured a request without a matching request handler:`,\r\n        `  \\u2022 ${requestHeader}`,\r\n        handlerSuggestion,\r\n        `\\\nIf you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks\\\n`,\r\n    ].filter(Boolean);\r\n    const message = messageTemplate.join('\\n\\n');\r\n    switch (strategy) {\r\n        case 'error': {\r\n            // Print a developer-friendly error.\r\n            devUtils.error('Error: %s', message);\r\n            // Throw an exception to halt request processing and not perform the original request.\r\n            throw new Error('Cannot bypass a request when using the \"error\" strategy for the \"onUnhandledRequest\" option.');\r\n        }\r\n        case 'warn': {\r\n            devUtils.warn('Warning: %s', message);\r\n            break;\r\n        }\r\n        case 'bypass':\r\n            break;\r\n        default:\r\n            throw new Error(devUtils.formatMessage('Failed to react to an unhandled request: unknown strategy \"%s\". Please provide one of the supported strategies (\"bypass\", \"warn\", \"error\") or a custom callback function as the value of the \"onUnhandledRequest\" option.', strategy));\r\n    }\r\n}\n\nfunction readResponseCookies(request, response) {\r\n    lib$1.store.add(Object.assign(Object.assign({}, request), { url: request.url.toString() }), response);\r\n    lib$1.store.persist();\r\n}\n\nfunction handleRequest(request, handlers, options, emitter, handleRequestOptions) {\r\n    var _a, _b, _c;\r\n    return __awaiter$3(this, void 0, void 0, function* () {\r\n        emitter.emit('request:start', request);\r\n        // Perform bypassed requests (i.e. issued via \"ctx.fetch\") as-is.\r\n        if (request.headers.get('x-msw-bypass')) {\r\n            emitter.emit('request:end', request);\r\n            (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, request);\r\n            return;\r\n        }\r\n        // Resolve a mocked response from the list of request handlers.\r\n        const lookupResult = yield getResponse(request, handlers, handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.resolutionContext);\r\n        const { handler, response } = lookupResult;\r\n        // When there's no handler for the request, consider it unhandled.\r\n        // Allow the developer to react to such cases.\r\n        if (!handler) {\r\n            onUnhandledRequest(request, handlers, options.onUnhandledRequest);\r\n            emitter.emit('request:unhandled', request);\r\n            emitter.emit('request:end', request);\r\n            (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, request);\r\n            return;\r\n        }\r\n        // When the handled request returned no mocked response, warn the developer,\r\n        // as it may be an oversight on their part. Perform the request as-is.\r\n        if (!response) {\r\n            devUtils.warn('Expected a mocking resolver function to return a mocked response Object, but got: %s. Original response is going to be used instead.', response);\r\n            emitter.emit('request:end', request);\r\n            (_c = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onBypassResponse) === null || _c === void 0 ? void 0 : _c.call(handleRequestOptions, request);\r\n            return;\r\n        }\r\n        // Store all the received response cookies in the virtual cookie store.\r\n        readResponseCookies(request, response);\r\n        emitter.emit('request:match', request);\r\n        return new Promise((resolve) => {\r\n            var _a, _b, _c;\r\n            const requiredLookupResult = lookupResult;\r\n            const transformedResponse = ((_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.transformResponse) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, response)) ||\r\n                response;\r\n            (_b = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponse) === null || _b === void 0 ? void 0 : _b.call(handleRequestOptions, transformedResponse, requiredLookupResult);\r\n            setTimeout(() => {\r\n                var _a;\r\n                (_a = handleRequestOptions === null || handleRequestOptions === void 0 ? void 0 : handleRequestOptions.onMockedResponseSent) === null || _a === void 0 ? void 0 : _a.call(handleRequestOptions, transformedResponse, requiredLookupResult);\r\n                emitter.emit('request:end', request);\r\n                resolve(transformedResponse);\r\n            }, (_c = response.delay) !== null && _c !== void 0 ? _c : 0);\r\n        });\r\n    });\r\n}\n\nconst createRequestListener = (context, options) => {\r\n    return (event, message) => __awaiter$3(void 0, void 0, void 0, function* () {\r\n        const channel = createBroadcastChannel(event);\r\n        try {\r\n            const request = parseWorkerRequest(message.payload);\r\n            yield handleRequest(request, context.requestHandlers, options, context.emitter, {\r\n                transformResponse(response) {\r\n                    return Object.assign(Object.assign({}, response), { headers: response.headers.all() });\r\n                },\r\n                onBypassResponse() {\r\n                    return channel.send({\r\n                        type: 'MOCK_NOT_FOUND',\r\n                    });\r\n                },\r\n                onMockedResponse(response) {\r\n                    channel.send({\r\n                        type: 'MOCK_SUCCESS',\r\n                        payload: response,\r\n                    });\r\n                },\r\n                onMockedResponseSent(response, { handler, publicRequest, parsedRequest }) {\r\n                    if (!options.quiet) {\r\n                        handler.log(publicRequest, response, handler, parsedRequest);\r\n                    }\r\n                },\r\n            });\r\n        }\r\n        catch (error) {\r\n            if (error instanceof NetworkError) {\r\n                // Treat emulated network error differently,\r\n                // as it is an intended exception in a request handler.\r\n                return channel.send({\r\n                    type: 'NETWORK_ERROR',\r\n                    payload: {\r\n                        name: error.name,\r\n                        message: error.message,\r\n                    },\r\n                });\r\n            }\r\n            // Treat all the other exceptions in a request handler\r\n            // as unintended, alerting that there is a problem needs fixing.\r\n            channel.send({\r\n                type: 'INTERNAL_ERROR',\r\n                payload: {\r\n                    status: 500,\r\n                    body: JSON.stringify({\r\n                        errorType: error.constructor.name,\r\n                        message: error.message,\r\n                        location: error.stack,\r\n                    }),\r\n                },\r\n            });\r\n        }\r\n    });\r\n};\n\nfunction requestIntegrityCheck(context, serviceWorker) {\r\n    return __awaiter$3(this, void 0, void 0, function* () {\r\n        // Signal Service Worker to report back its integrity\r\n        context.workerChannel.send('INTEGRITY_CHECK_REQUEST');\r\n        const { payload: actualChecksum } = yield context.events.once('INTEGRITY_CHECK_RESPONSE');\r\n        // Compare the response from the Service Worker and the\r\n        // global variable set by Rollup during the build.\r\n        if (actualChecksum !== \"f0a916b13c8acc2b526a03a6d26df85f\") {\r\n            throw new Error(`Currently active Service Worker (${actualChecksum}) is behind the latest published one (${\"f0a916b13c8acc2b526a03a6d26df85f\"}).`);\r\n        }\r\n        return serviceWorker;\r\n    });\r\n}\n\n/**\r\n * Intercepts and defers any requests on the page\r\n * until the Service Worker instance is ready.\r\n * Must only be used in a browser.\r\n */\r\nfunction deferNetworkRequestsUntil(predicatePromise) {\r\n    // Defer any `XMLHttpRequest` requests until the Service Worker is ready.\r\n    const originalXhrSend = window.XMLHttpRequest.prototype.send;\r\n    window.XMLHttpRequest.prototype.send = function (...args) {\r\n        // Keep this function synchronous to comply with `XMLHttpRequest.prototype.send`,\r\n        // because that method is always synchronous.\r\n        until(() => predicatePromise).then(() => {\r\n            window.XMLHttpRequest.prototype.send = originalXhrSend;\r\n            this.send(...args);\r\n        });\r\n    };\r\n    // Defer any `fetch` requests until the Service Worker is ready.\r\n    const originalFetch = window.fetch;\r\n    window.fetch = (...args) => __awaiter$3(this, void 0, void 0, function* () {\r\n        yield until(() => predicatePromise);\r\n        window.fetch = originalFetch;\r\n        return window.fetch(...args);\r\n    });\r\n}\n\nfunction createResponseListener(context) {\r\n    return (_, message) => {\r\n        var _a;\r\n        const { payload: responseJson } = message;\r\n        /**\r\n         * CORS requests with `mode: \"no-cors\"` result in \"opaque\" responses.\r\n         * That kind of responses cannot be manipulated in JavaScript due\r\n         * to the security considerations.\r\n         * @see https://fetch.spec.whatwg.org/#concept-filtered-response-opaque\r\n         * @see https://github.com/mswjs/msw/issues/529\r\n         */\r\n        if ((_a = responseJson.type) === null || _a === void 0 ? void 0 : _a.includes('opaque')) {\r\n            return;\r\n        }\r\n        const response = new Response(responseJson.body || null, responseJson);\r\n        const isMockedResponse = response.headers.get('x-powered-by') === 'msw';\r\n        if (isMockedResponse) {\r\n            context.emitter.emit('response:mocked', response, responseJson.requestId);\r\n        }\r\n        else {\r\n            context.emitter.emit('response:bypass', response, responseJson.requestId);\r\n        }\r\n    };\r\n}\n\nfunction validateWorkerScope(registration, options) {\r\n    if (!(options === null || options === void 0 ? void 0 : options.quiet) && !location.href.startsWith(registration.scope)) {\r\n        devUtils.warn(`\\\nCannot intercept requests on this page because it's outside of the worker's scope (\"${registration.scope}\"). If you wish to mock API requests on this page, you must resolve this scope issue.\n\n- (Recommended) Register the worker at the root level (\"/\") of your application.\n- Set the \"Service-Worker-Allowed\" response header to allow out-of-scope workers.\\\n`);\r\n    }\r\n}\n\nconst createStartHandler = (context) => {\r\n    return function start(options, customOptions) {\r\n        const startWorkerInstance = () => __awaiter$3(this, void 0, void 0, function* () {\r\n            // Remove all previously existing event listeners.\r\n            // This way none of the listeners persists between Fast refresh\r\n            // of the application's code.\r\n            context.events.removeAllListeners();\r\n            // Handle requests signaled by the worker.\r\n            context.workerChannel.on('REQUEST', createRequestListener(context, options));\r\n            context.workerChannel.on('RESPONSE', createResponseListener(context));\r\n            const instance = yield getWorkerInstance(options.serviceWorker.url, options.serviceWorker.options, options.findWorker);\r\n            const [worker, registration] = instance;\r\n            if (!worker) {\r\n                const missingWorkerMessage = (customOptions === null || customOptions === void 0 ? void 0 : customOptions.findWorker)\r\n                    ? devUtils.formatMessage(`Failed to locate the Service Worker registration using a custom \"findWorker\" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at \"%s\".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n`, options.serviceWorker.url)\r\n                    : devUtils.formatMessage(`Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL \"%s\" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom \"serviceWorker.url\" option to point to the actual worker script location, or a custom \"findWorker\" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start`, options.serviceWorker.url, location.host);\r\n                throw new Error(missingWorkerMessage);\r\n            }\r\n            context.worker = worker;\r\n            context.registration = registration;\r\n            context.events.addListener(window, 'beforeunload', () => {\r\n                if (worker.state !== 'redundant') {\r\n                    // Notify the Service Worker that this client has closed.\r\n                    // Internally, it's similar to disabling the mocking, only\r\n                    // client close event has a handler that self-terminates\r\n                    // the Service Worker when there are no open clients.\r\n                    context.workerChannel.send('CLIENT_CLOSED');\r\n                }\r\n                // Make sure we're always clearing the interval - there are reports that not doing this can\r\n                // cause memory leaks in headless browser environments.\r\n                window.clearInterval(context.keepAliveInterval);\r\n            });\r\n            // Check if the active Service Worker is the latest published one\r\n            const [integrityError] = yield until(() => requestIntegrityCheck(context, worker));\r\n            if (integrityError) {\r\n                devUtils.error(`\\\nDetected outdated Service Worker: ${integrityError.message}\n\nThe mocking is still enabled, but it's highly recommended that you update your Service Worker by running:\n\n$ npx msw init <PUBLIC_DIR>\n\nThis is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.\nIf this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues\\\n      `);\r\n            }\r\n            yield enableMocking(context, options).catch((err) => {\r\n                throw new Error(`Failed to enable mocking: ${err === null || err === void 0 ? void 0 : err.message}`);\r\n            });\r\n            context.keepAliveInterval = window.setInterval(() => context.workerChannel.send('KEEPALIVE_REQUEST'), 5000);\r\n            // Warn the user when loading the page that lies outside\r\n            // of the worker's scope.\r\n            validateWorkerScope(registration, context.startOptions);\r\n            return registration;\r\n        });\r\n        const workerRegistration = startWorkerInstance();\r\n        // Defer any network requests until the Service Worker instance is ready.\r\n        // This prevents a race condition between the Service Worker registration\r\n        // and application's runtime requests (i.e. requests on mount).\r\n        if (options.waitUntilReady) {\r\n            deferNetworkRequestsUntil(workerRegistration);\r\n        }\r\n        return workerRegistration;\r\n    };\r\n};\n\nfunction printStopMessage(args = {}) {\r\n    if (args.quiet) {\r\n        return;\r\n    }\r\n    console.log(`%c${devUtils.formatMessage('Mocking disabled.')}`, 'color:orangered;font-weight:bold;');\r\n}\n\nconst createStop = (context) => {\r\n    return function stop() {\r\n        var _a;\r\n        /**\r\n         * Signal the Service Worker to disable mocking for this client.\r\n         * Use this an an explicit way to stop the mocking, while preserving\r\n         * the worker-client relation. Does not affect the worker's lifecycle.\r\n         */\r\n        context.workerChannel.send('MOCK_DEACTIVATE');\r\n        window.clearInterval(context.keepAliveInterval);\r\n        printStopMessage({ quiet: (_a = context.startOptions) === null || _a === void 0 ? void 0 : _a.quiet });\r\n    };\r\n};\n\nfunction use(currentHandlers, ...handlers) {\r\n    currentHandlers.unshift(...handlers);\r\n}\r\nfunction restoreHandlers(handlers) {\r\n    handlers.forEach((handler) => {\r\n        handler.markAsSkipped(false);\r\n    });\r\n}\r\nfunction resetHandlers(initialHandlers, ...nextHandlers) {\r\n    return nextHandlers.length > 0 ? [...nextHandlers] : [...initialHandlers];\r\n}\n\nconst DEFAULT_START_OPTIONS = {\r\n    serviceWorker: {\r\n        url: '/mockServiceWorker.js',\r\n        options: null,\r\n    },\r\n    quiet: false,\r\n    waitUntilReady: true,\r\n    onUnhandledRequest: 'warn',\r\n    findWorker(scriptURL, mockServiceWorkerUrl) {\r\n        return scriptURL === mockServiceWorkerUrl;\r\n    },\r\n};\r\n/**\r\n * Returns resolved worker start options, merging the default options\r\n * with the given custom options.\r\n */\r\nfunction resolveStartOptions(initialOptions) {\r\n    return mergeRight(DEFAULT_START_OPTIONS, initialOptions || {});\r\n}\r\nfunction prepareStartHandler(handler, context) {\r\n    return (initialOptions) => {\r\n        context.startOptions = resolveStartOptions(initialOptions);\r\n        return handler(context.startOptions, initialOptions || {});\r\n    };\r\n}\n\nvar lib = {};\n\nvar createInterceptor$1 = {};\n\nObject.defineProperty(createInterceptor$1, \"__esModule\", { value: true });\ncreateInterceptor$1.createInterceptor = void 0;\nvar strict_event_emitter_1$1 = lib$3;\nfunction createInterceptor(options) {\n    var observer = new strict_event_emitter_1$1.StrictEventEmitter();\n    var cleanupFns = [];\n    return {\n        apply: function () {\n            cleanupFns = options.modules.map(function (interceptor) {\n                return interceptor(observer, options.resolver);\n            });\n        },\n        on: function (event, listener) {\n            observer.addListener(event, listener);\n        },\n        restore: function () {\n            observer.removeAllListeners();\n            if (cleanupFns.length === 0) {\n                throw new Error(\"Failed to restore patched modules: no patches found. Did you forget to run \\\".apply()\\\"?\");\n            }\n            cleanupFns.forEach(function (restore) { return restore(); });\n        },\n    };\n}\ncreateInterceptor$1.createInterceptor = createInterceptor;\n\nvar remote = {};\n\nvar toIsoResponse$1 = {};\n\nObject.defineProperty(toIsoResponse$1, \"__esModule\", { value: true });\ntoIsoResponse$1.toIsoResponse = void 0;\nvar headers_utils_1$3 = lib$4;\n/**\n * Converts a given mocked response object into an isomorphic response.\n */\nfunction toIsoResponse(response) {\n    return {\n        status: response.status || 200,\n        statusText: response.statusText || 'OK',\n        headers: headers_utils_1$3.objectToHeaders(response.headers || {}),\n        body: response.body,\n    };\n}\ntoIsoResponse$1.toIsoResponse = toIsoResponse;\n\nvar __assign$1 = (commonjsGlobal && commonjsGlobal.__assign) || function () {\n    __assign$1 = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$1.apply(this, arguments);\n};\nvar __awaiter$2 = (commonjsGlobal && commonjsGlobal.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator$2 = (commonjsGlobal && commonjsGlobal.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read$1 = (commonjsGlobal && commonjsGlobal.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(remote, \"__esModule\", { value: true });\nremote.createRemoteResolver = remote.createRemoteInterceptor = void 0;\nvar headers_utils_1$2 = lib$4;\nvar outvariant_1 = lib$5;\nvar strict_event_emitter_1 = lib$3;\nvar createInterceptor_1 = createInterceptor$1;\nvar toIsoResponse_1$2 = toIsoResponse$1;\nfunction requestReviver(key, value) {\n    switch (key) {\n        case 'url':\n            return new URL(value);\n        case 'headers':\n            return new headers_utils_1$2.Headers(value);\n        default:\n            return value;\n    }\n}\n/**\n * Creates a remote request interceptor that delegates\n * the mocked response resolution to the parent process.\n * The parent process must establish a remote resolver\n * by calling `createRemoteResolver` function.\n */\nfunction createRemoteInterceptor(options) {\n    outvariant_1.invariant(process.connected, \"Failed to create a remote interceptor: the current process (%s) does not have a parent. Please make sure you're spawning this process as a child process in order to use remote request interception.\", process.pid);\n    if (typeof process.send === 'undefined') {\n        throw new Error(\"Failed to create a remote interceptor: the current process (\" + process.pid + \") does not have the IPC enabled. Please make sure you're spawning this process with the \\\"ipc\\\" stdio value set:\\n\\nspawn('node', ['module.js'], { stdio: ['ipc'] })\");\n    }\n    var handleParentMessage;\n    var interceptor = createInterceptor_1.createInterceptor(__assign$1(__assign$1({}, options), { resolver: function (request) {\n            var _a;\n            var serializedRequest = JSON.stringify(request);\n            (_a = process.send) === null || _a === void 0 ? void 0 : _a.call(process, \"request:\" + serializedRequest);\n            return new Promise(function (resolve) {\n                handleParentMessage = function (message) {\n                    if (typeof message !== 'string') {\n                        return;\n                    }\n                    if (message.startsWith(\"response:\" + request.id)) {\n                        var _a = __read$1(message.match(/^response:.+?:(.+)$/) || [], 2), responseString = _a[1];\n                        if (!responseString) {\n                            return resolve();\n                        }\n                        var mockedResponse = JSON.parse(responseString);\n                        return resolve(mockedResponse);\n                    }\n                };\n                process.addListener('message', handleParentMessage);\n            });\n        } }));\n    return __assign$1(__assign$1({}, interceptor), { restore: function () {\n            interceptor.restore();\n            process.removeListener('message', handleParentMessage);\n        } });\n}\nremote.createRemoteInterceptor = createRemoteInterceptor;\n/**\n * Creates a response resolver function attached to the given `ChildProcess`.\n * The child process must establish a remote interceptor by calling `createRemoteInterceptor` function.\n */\nfunction createRemoteResolver(options) {\n    var _this = this;\n    var observer = new strict_event_emitter_1.StrictEventEmitter();\n    var handleChildMessage = function (message) { return __awaiter$2(_this, void 0, void 0, function () {\n        var _a, requestString, isoRequest_1, mockedResponse_1, serializedResponse;\n        return __generator$2(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    if (typeof message !== 'string') {\n                        return [2 /*return*/];\n                    }\n                    if (!message.startsWith('request:')) return [3 /*break*/, 2];\n                    _a = __read$1(message.match(/^request:(.+)$/) || [], 2), requestString = _a[1];\n                    if (!requestString) {\n                        return [2 /*return*/];\n                    }\n                    isoRequest_1 = JSON.parse(requestString, requestReviver);\n                    observer.emit('request', isoRequest_1);\n                    return [4 /*yield*/, options.resolver(isoRequest_1, undefined)\n                        // Send the mocked response to the child process.\n                    ];\n                case 1:\n                    mockedResponse_1 = _b.sent();\n                    serializedResponse = JSON.stringify(mockedResponse_1);\n                    options.process.send(\"response:\" + isoRequest_1.id + \":\" + serializedResponse, function (error) {\n                        if (error) {\n                            return;\n                        }\n                        if (mockedResponse_1) {\n                            // Emit an optimisting \"response\" event at this point,\n                            // not to rely on the back-and-forth signaling for the sake of the event.\n                            observer.emit('response', isoRequest_1, toIsoResponse_1$2.toIsoResponse(mockedResponse_1));\n                        }\n                    });\n                    _b.label = 2;\n                case 2: return [2 /*return*/];\n            }\n        });\n    }); };\n    var cleanup = function () {\n        options.process.removeListener('message', handleChildMessage);\n    };\n    options.process.addListener('message', handleChildMessage);\n    options.process.addListener('disconnect', cleanup);\n    options.process.addListener('error', cleanup);\n    options.process.addListener('exit', cleanup);\n    return {\n        on: function (event, listener) {\n            observer.addListener(event, listener);\n        },\n    };\n}\nremote.createRemoteResolver = createRemoteResolver;\n\n(function (exports) {\nvar __createBinding = (commonjsGlobal && commonjsGlobal.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (commonjsGlobal && commonjsGlobal.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getCleanUrl = void 0;\n__exportStar(createInterceptor$1, exports);\n__exportStar(remote, exports);\n/* Utils */\nvar getCleanUrl_1 = getCleanUrl;\nObject.defineProperty(exports, \"getCleanUrl\", { enumerable: true, get: function () { return getCleanUrl_1.getCleanUrl; } });\n\n}(lib));\n\nvar fetch = {};\n\nvar uuid = {};\n\nObject.defineProperty(uuid, \"__esModule\", { value: true });\nuuid.uuidv4 = void 0;\nfunction uuidv4$1() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0;\n        var v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nuuid.uuidv4 = uuidv4$1;\n\nvar __assign = (commonjsGlobal && commonjsGlobal.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter$1 = (commonjsGlobal && commonjsGlobal.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator$1 = (commonjsGlobal && commonjsGlobal.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(fetch, \"__esModule\", { value: true });\nvar interceptFetch_1 = fetch.interceptFetch = void 0;\nvar headers_utils_1$1 = lib$4;\nvar toIsoResponse_1$1 = toIsoResponse$1;\nvar uuid_1$1 = uuid;\nvar debug$1 = require$$3('fetch');\nvar interceptFetch = function (observer, resolver) {\n    var pureFetch = window.fetch;\n    debug$1('replacing \"window.fetch\"...');\n    window.fetch = function (input, init) { return __awaiter$1(void 0, void 0, void 0, function () {\n        var ref, url, method, isoRequest, response, isomorphicResponse;\n        var _a;\n        return __generator$1(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    ref = new Request(input, init);\n                    url = typeof input === 'string' ? input : input.url;\n                    method = (init === null || init === void 0 ? void 0 : init.method) || 'GET';\n                    debug$1('[%s] %s', method, url);\n                    _a = {\n                        id: uuid_1$1.uuidv4(),\n                        url: new URL(url, location.origin),\n                        method: method,\n                        headers: new headers_utils_1$1.Headers((init === null || init === void 0 ? void 0 : init.headers) || {})\n                    };\n                    return [4 /*yield*/, ref.text()];\n                case 1:\n                    isoRequest = (_a.body = _b.sent(),\n                        _a);\n                    debug$1('isomorphic request', isoRequest);\n                    observer.emit('request', isoRequest);\n                    debug$1('awaiting for the mocked response...');\n                    return [4 /*yield*/, resolver(isoRequest, ref)];\n                case 2:\n                    response = _b.sent();\n                    debug$1('mocked response', response);\n                    if (response) {\n                        isomorphicResponse = toIsoResponse_1$1.toIsoResponse(response);\n                        debug$1('derived isomorphic response', isomorphicResponse);\n                        observer.emit('response', isoRequest, isomorphicResponse);\n                        return [2 /*return*/, new Response(response.body, __assign(__assign({}, isomorphicResponse), { \n                                // `Response.headers` cannot be instantiated with the `Headers` polyfill.\n                                // Apparently, it halts if the `Headers` class contains unknown properties\n                                // (i.e. the internal `Headers.map`).\n                                headers: headers_utils_1$1.flattenHeadersObject(response.headers || {}) }))];\n                    }\n                    debug$1('no mocked response found, bypassing...');\n                    return [2 /*return*/, pureFetch(input, init).then(function (response) { return __awaiter$1(void 0, void 0, void 0, function () {\n                            var _a, _b, _c;\n                            return __generator$1(this, function (_d) {\n                                switch (_d.label) {\n                                    case 0:\n                                        debug$1('original fetch performed', response);\n                                        _b = (_a = observer).emit;\n                                        _c = ['response',\n                                            isoRequest];\n                                        return [4 /*yield*/, normalizeFetchResponse(response)];\n                                    case 1:\n                                        _b.apply(_a, _c.concat([_d.sent()]));\n                                        return [2 /*return*/, response];\n                                }\n                            });\n                        }); })];\n            }\n        });\n    }); };\n    return function () {\n        debug$1('restoring modules...');\n        window.fetch = pureFetch;\n    };\n};\ninterceptFetch_1 = fetch.interceptFetch = interceptFetch;\nfunction normalizeFetchResponse(response) {\n    return __awaiter$1(this, void 0, void 0, function () {\n        var _a;\n        return __generator$1(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _a = {\n                        status: response.status,\n                        statusText: response.statusText,\n                        headers: headers_utils_1$1.objectToHeaders(headers_utils_1$1.headersToObject(response.headers))\n                    };\n                    return [4 /*yield*/, response.text()];\n                case 1: return [2 /*return*/, (_a.body = _b.sent(),\n                        _a)];\n            }\n        });\n    });\n}\n\nvar XMLHttpRequest = {};\n\nvar XMLHttpRequestOverride = {};\n\nvar domParser = {};\n\nvar conventions$2 = {};\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object;\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n});\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE$3 = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE$3.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n});\n\nconventions$2.freeze = freeze;\nconventions$2.MIME_TYPE = MIME_TYPE;\nconventions$2.NAMESPACE = NAMESPACE$3;\n\nvar entities$1 = {};\n\n(function (exports) {\nvar freeze = conventions$2.freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({amp:'&', apos:\"'\", gt:'>', lt:'<', quot:'\"'});\n\n/**\n * A map of currently 241 entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n       lt: '<',\n       gt: '>',\n       amp: '&',\n       quot: '\"',\n       apos: \"'\",\n       Agrave: \"À\",\n       Aacute: \"Á\",\n       Acirc: \"Â\",\n       Atilde: \"Ã\",\n       Auml: \"Ä\",\n       Aring: \"Å\",\n       AElig: \"Æ\",\n       Ccedil: \"Ç\",\n       Egrave: \"È\",\n       Eacute: \"É\",\n       Ecirc: \"Ê\",\n       Euml: \"Ë\",\n       Igrave: \"Ì\",\n       Iacute: \"Í\",\n       Icirc: \"Î\",\n       Iuml: \"Ï\",\n       ETH: \"Ð\",\n       Ntilde: \"Ñ\",\n       Ograve: \"Ò\",\n       Oacute: \"Ó\",\n       Ocirc: \"Ô\",\n       Otilde: \"Õ\",\n       Ouml: \"Ö\",\n       Oslash: \"Ø\",\n       Ugrave: \"Ù\",\n       Uacute: \"Ú\",\n       Ucirc: \"Û\",\n       Uuml: \"Ü\",\n       Yacute: \"Ý\",\n       THORN: \"Þ\",\n       szlig: \"ß\",\n       agrave: \"à\",\n       aacute: \"á\",\n       acirc: \"â\",\n       atilde: \"ã\",\n       auml: \"ä\",\n       aring: \"å\",\n       aelig: \"æ\",\n       ccedil: \"ç\",\n       egrave: \"è\",\n       eacute: \"é\",\n       ecirc: \"ê\",\n       euml: \"ë\",\n       igrave: \"ì\",\n       iacute: \"í\",\n       icirc: \"î\",\n       iuml: \"ï\",\n       eth: \"ð\",\n       ntilde: \"ñ\",\n       ograve: \"ò\",\n       oacute: \"ó\",\n       ocirc: \"ô\",\n       otilde: \"õ\",\n       ouml: \"ö\",\n       oslash: \"ø\",\n       ugrave: \"ù\",\n       uacute: \"ú\",\n       ucirc: \"û\",\n       uuml: \"ü\",\n       yacute: \"ý\",\n       thorn: \"þ\",\n       yuml: \"ÿ\",\n       nbsp: \"\\u00a0\",\n       iexcl: \"¡\",\n       cent: \"¢\",\n       pound: \"£\",\n       curren: \"¤\",\n       yen: \"¥\",\n       brvbar: \"¦\",\n       sect: \"§\",\n       uml: \"¨\",\n       copy: \"©\",\n       ordf: \"ª\",\n       laquo: \"«\",\n       not: \"¬\",\n       shy: \"­­\",\n       reg: \"®\",\n       macr: \"¯\",\n       deg: \"°\",\n       plusmn: \"±\",\n       sup2: \"²\",\n       sup3: \"³\",\n       acute: \"´\",\n       micro: \"µ\",\n       para: \"¶\",\n       middot: \"·\",\n       cedil: \"¸\",\n       sup1: \"¹\",\n       ordm: \"º\",\n       raquo: \"»\",\n       frac14: \"¼\",\n       frac12: \"½\",\n       frac34: \"¾\",\n       iquest: \"¿\",\n       times: \"×\",\n       divide: \"÷\",\n       forall: \"∀\",\n       part: \"∂\",\n       exist: \"∃\",\n       empty: \"∅\",\n       nabla: \"∇\",\n       isin: \"∈\",\n       notin: \"∉\",\n       ni: \"∋\",\n       prod: \"∏\",\n       sum: \"∑\",\n       minus: \"−\",\n       lowast: \"∗\",\n       radic: \"√\",\n       prop: \"∝\",\n       infin: \"∞\",\n       ang: \"∠\",\n       and: \"∧\",\n       or: \"∨\",\n       cap: \"∩\",\n       cup: \"∪\",\n       'int': \"∫\",\n       there4: \"∴\",\n       sim: \"∼\",\n       cong: \"≅\",\n       asymp: \"≈\",\n       ne: \"≠\",\n       equiv: \"≡\",\n       le: \"≤\",\n       ge: \"≥\",\n       sub: \"⊂\",\n       sup: \"⊃\",\n       nsub: \"⊄\",\n       sube: \"⊆\",\n       supe: \"⊇\",\n       oplus: \"⊕\",\n       otimes: \"⊗\",\n       perp: \"⊥\",\n       sdot: \"⋅\",\n       Alpha: \"Α\",\n       Beta: \"Β\",\n       Gamma: \"Γ\",\n       Delta: \"Δ\",\n       Epsilon: \"Ε\",\n       Zeta: \"Ζ\",\n       Eta: \"Η\",\n       Theta: \"Θ\",\n       Iota: \"Ι\",\n       Kappa: \"Κ\",\n       Lambda: \"Λ\",\n       Mu: \"Μ\",\n       Nu: \"Ν\",\n       Xi: \"Ξ\",\n       Omicron: \"Ο\",\n       Pi: \"Π\",\n       Rho: \"Ρ\",\n       Sigma: \"Σ\",\n       Tau: \"Τ\",\n       Upsilon: \"Υ\",\n       Phi: \"Φ\",\n       Chi: \"Χ\",\n       Psi: \"Ψ\",\n       Omega: \"Ω\",\n       alpha: \"α\",\n       beta: \"β\",\n       gamma: \"γ\",\n       delta: \"δ\",\n       epsilon: \"ε\",\n       zeta: \"ζ\",\n       eta: \"η\",\n       theta: \"θ\",\n       iota: \"ι\",\n       kappa: \"κ\",\n       lambda: \"λ\",\n       mu: \"μ\",\n       nu: \"ν\",\n       xi: \"ξ\",\n       omicron: \"ο\",\n       pi: \"π\",\n       rho: \"ρ\",\n       sigmaf: \"ς\",\n       sigma: \"σ\",\n       tau: \"τ\",\n       upsilon: \"υ\",\n       phi: \"φ\",\n       chi: \"χ\",\n       psi: \"ψ\",\n       omega: \"ω\",\n       thetasym: \"ϑ\",\n       upsih: \"ϒ\",\n       piv: \"ϖ\",\n       OElig: \"Œ\",\n       oelig: \"œ\",\n       Scaron: \"Š\",\n       scaron: \"š\",\n       Yuml: \"Ÿ\",\n       fnof: \"ƒ\",\n       circ: \"ˆ\",\n       tilde: \"˜\",\n       ensp: \" \",\n       emsp: \" \",\n       thinsp: \" \",\n       zwnj: \"‌\",\n       zwj: \"‍\",\n       lrm: \"‎\",\n       rlm: \"‏\",\n       ndash: \"–\",\n       mdash: \"—\",\n       lsquo: \"‘\",\n       rsquo: \"’\",\n       sbquo: \"‚\",\n       ldquo: \"“\",\n       rdquo: \"”\",\n       bdquo: \"„\",\n       dagger: \"†\",\n       Dagger: \"‡\",\n       bull: \"•\",\n       hellip: \"…\",\n       permil: \"‰\",\n       prime: \"′\",\n       Prime: \"″\",\n       lsaquo: \"‹\",\n       rsaquo: \"›\",\n       oline: \"‾\",\n       euro: \"€\",\n       trade: \"™\",\n       larr: \"←\",\n       uarr: \"↑\",\n       rarr: \"→\",\n       darr: \"↓\",\n       harr: \"↔\",\n       crarr: \"↵\",\n       lceil: \"⌈\",\n       rceil: \"⌉\",\n       lfloor: \"⌊\",\n       rfloor: \"⌋\",\n       loz: \"◊\",\n       spades: \"♠\",\n       clubs: \"♣\",\n       hearts: \"♥\",\n       diams: \"♦\"\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES;\n}(entities$1));\n\nvar sax$1 = {};\n\nvar NAMESPACE$2 = conventions$2.NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;//\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring \nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError$1(message, locator) {\n\tthis.message = message;\n\tthis.locator = locator;\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError$1);\n}\nParseError$1.prototype = new Error();\nParseError$1.prototype.name = ParseError$1.name;\n\nfunction XMLReader$1(){\n\t\n}\n\nXMLReader$1.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {});\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n};\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif(k in entityMap){\n\t\t\treturn entityMap[k]; \n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else {\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end;\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g;\n\tvar locator = domBuilder.locator;\n\t\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}];\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\t\t\t\t\t\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase();\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor(var prefix in localNSMap){\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else {\n\t\t        \tparseStack.push(config);\n\t\t        }\n\t\t\t\t\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2;\n\t\t\t\t\tif(appendElement$1(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el);\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else {\n\t\t\t\t\tif(appendElement$1(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE$2.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder);\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError$1) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e);\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else {\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (qname in el.attributeNames) errorHandler.fatalError('Attribute ' + qname + ' redefined');\n\t\tel.addValue(qname, value, startIndex);\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else {\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"');\n\t\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start);\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else {\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t//console.log(attrName,value,start,p)\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t//console.dir(el)\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END;\n\t\t\t}else {\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1);\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value.replace(/&#?\\w+;/g,entityReplacer), start);\n\t\t\t\t}else {\n\t\t\t\t\tif(!NAMESPACE$2.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!');\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else {//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.tagName;\n\t\t\t\t\tif (!NAMESPACE$2.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!');\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!');\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement$1(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName;\n\t\t}else {\n\t\t\tlocalName = qName;\n\t\t\tprefix = null;\n\t\t\tnsPrefix = qName === 'xmlns' && '';\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute \n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {};\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={});\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE$2.XMLNS;\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value); \n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE$2.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || ''];\n\t\t\t\t\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else {\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor(prefix in localNSMap){\n\t\t\t\tdomBuilder.endPrefixMapping(prefix); \n\t\t\t}\n\t\t}\n\t}else {\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\t\t\t\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>');\n\t\tif(pos<elStartEnd){//忘记闭合\n\t\t\tpos = source.lastIndexOf('</'+tagName);\n\t\t}\n\t\tcloseMap[tagName] =pos;\n\t}\n\treturn pos<elStartEnd;\n\t//} \n}\nfunction _copy(source,target){\n\tfor(var n in source){target[n] = source[n];}\n}\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2);\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else {\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else {\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA(); \n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1];\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\t\t\t\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tmatch[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else {//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {};\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName;\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset};\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\t\t\t\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n};\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nsax$1.XMLReader = XMLReader$1;\nsax$1.ParseError = ParseError$1;\n\nvar dom = {};\n\nvar conventions$1 = conventions$2;\n\nvar NAMESPACE$1 = conventions$1.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){}\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class);\n\t\t}\n\t\tpt.constructor = Class;\n\t}\n}\n\n// Node Types\nvar NodeType = {};\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {};\nvar ExceptionMessage = {};\nExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else {\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n}DOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException);\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n}NodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh;\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n};\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n}\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else {\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1;\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i];\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else {\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation$1() {\n}\n\nDOMImplementation$1.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n}\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else {\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE$1.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value;\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE$1.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:''];\n\t}\n}\n\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else {\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else {\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else {\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else {\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else {\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames);\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class');\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames);\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else {\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else {\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n}Element.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr);\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else {\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr);\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n}Attr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n}CharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n};\n_extends(CharacterData,Node);\nfunction Text() {\n}Text.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n};\n_extends(Text,CharacterData);\nfunction Comment() {\n}Comment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n};\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n}CDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n};\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n}DocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n}Notation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n}Entity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n}EntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n}DocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n};\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t];\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE$1.XML || uri === NAMESPACE$1.XMLNS) {\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length; \n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * The replacement text of any entity referred to directly or indirectly in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml/#CleanAttrVals\n * @see https://www.w3.org/TR/xml/#NT-AttValue\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<&\"]/g,_xmlEncoder), '\"');\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else {\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML = NAMESPACE$1.isHTML(node.namespaceURI) || isHTML;\n\n\t\tvar prefixedNodeName = nodeName;\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS;\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value;\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi];\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\t\t\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else {\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&]/g,_xmlEncoder)\n\t\t\t.replace(/]]>/g, ']]&gt;')\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else {\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length;\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value;\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value;\n\t\t};\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\tdom.DocumentType = DocumentType;\n\tdom.DOMException = DOMException;\n\tdom.DOMImplementation = DOMImplementation$1;\n\tdom.Element = Element;\n\tdom.Node = Node;\n\tdom.NodeList = NodeList;\n\tdom.XMLSerializer = XMLSerializer;\n\nvar conventions = conventions$2;\nvar entities = entities$1;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator);\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tif(source && typeof source === 'string'){\n\t\tsax.parse(source,defaultNSMap,entityMap);\n\t}else {\n\t\tsax.errorHandler.error(\"invalid doc source\");\n\t}\n\treturn domBuilder.doc;\n};\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {};\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{};\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg);}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el);\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr);\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement;\n\t\tcurrent.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins);\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments);\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode);\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments);\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm);\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt);\n\t        appendElement(this, dt);\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n};\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else {//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null};\n});\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\n//if(typeof require == 'function'){\nvar sax = sax$1;\nvar XMLReader = sax.XMLReader;\nvar ParseError = sax.ParseError;\nvar DOMImplementation = domParser.DOMImplementation = dom.DOMImplementation;\ndomParser.XMLSerializer = dom.XMLSerializer ;\ndomParser.DOMParser = DOMParser;\ndomParser.__DOMHandler = DOMHandler;\n\nvar parseJson$1 = {};\n\nObject.defineProperty(parseJson$1, \"__esModule\", { value: true });\nparseJson$1.parseJson = void 0;\n/**\n * Parses a given string into JSON.\n * Gracefully handles invalid JSON by returning `null`.\n */\nfunction parseJson(data) {\n    try {\n        var json = JSON.parse(data);\n        return json;\n    }\n    catch (_) {\n        return null;\n    }\n}\nparseJson$1.parseJson = parseJson;\n\nvar bufferFrom$1 = {};\n\nObject.defineProperty(bufferFrom$1, \"__esModule\", { value: true });\nbufferFrom$1.bufferFrom = void 0;\n/**\n * Convert a given string into a `Uint8Array`.\n * We don't use `TextEncoder` because it's unavailable in some environments.\n */\nfunction bufferFrom(init) {\n    var encodedString = encodeURIComponent(init);\n    var binaryString = encodedString.replace(/%([0-9A-F]{2})/g, function (_, char) {\n        return String.fromCharCode(('0x' + char));\n    });\n    var buffer = new Uint8Array(binaryString.length);\n    Array.prototype.forEach.call(binaryString, function (char, index) {\n        buffer[index] = char.charCodeAt(0);\n    });\n    return buffer;\n}\nbufferFrom$1.bufferFrom = bufferFrom;\n\nvar createEvent$1 = {};\n\nvar EventPolyfill$1 = {};\n\nObject.defineProperty(EventPolyfill$1, \"__esModule\", { value: true });\nEventPolyfill$1.EventPolyfill = void 0;\nvar EventPolyfill = /** @class */ (function () {\n    function EventPolyfill(type, options) {\n        this.AT_TARGET = 0;\n        this.BUBBLING_PHASE = 0;\n        this.CAPTURING_PHASE = 0;\n        this.NONE = 0;\n        this.type = '';\n        this.srcElement = null;\n        this.currentTarget = null;\n        this.eventPhase = 0;\n        this.isTrusted = true;\n        this.composed = false;\n        this.cancelable = true;\n        this.defaultPrevented = false;\n        this.bubbles = true;\n        this.lengthComputable = true;\n        this.loaded = 0;\n        this.total = 0;\n        this.cancelBubble = false;\n        this.returnValue = true;\n        this.type = type;\n        this.target = (options === null || options === void 0 ? void 0 : options.target) || null;\n        this.currentTarget = (options === null || options === void 0 ? void 0 : options.currentTarget) || null;\n        this.timeStamp = Date.now();\n    }\n    EventPolyfill.prototype.composedPath = function () {\n        return [];\n    };\n    EventPolyfill.prototype.initEvent = function (type, bubbles, cancelable) {\n        this.type = type;\n        this.bubbles = !!bubbles;\n        this.cancelable = !!cancelable;\n    };\n    EventPolyfill.prototype.preventDefault = function () {\n        this.defaultPrevented = true;\n    };\n    EventPolyfill.prototype.stopPropagation = function () { };\n    EventPolyfill.prototype.stopImmediatePropagation = function () { };\n    return EventPolyfill;\n}());\nEventPolyfill$1.EventPolyfill = EventPolyfill;\n\nvar ProgressEventPolyfill$1 = {};\n\nvar __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(ProgressEventPolyfill$1, \"__esModule\", { value: true });\nProgressEventPolyfill$1.ProgressEventPolyfill = void 0;\nvar EventPolyfill_1$1 = EventPolyfill$1;\nvar ProgressEventPolyfill = /** @class */ (function (_super) {\n    __extends(ProgressEventPolyfill, _super);\n    function ProgressEventPolyfill(type, init) {\n        var _this = _super.call(this, type) || this;\n        _this.lengthComputable = (init === null || init === void 0 ? void 0 : init.lengthComputable) || false;\n        _this.composed = (init === null || init === void 0 ? void 0 : init.composed) || false;\n        _this.loaded = (init === null || init === void 0 ? void 0 : init.loaded) || 0;\n        _this.total = (init === null || init === void 0 ? void 0 : init.total) || 0;\n        return _this;\n    }\n    return ProgressEventPolyfill;\n}(EventPolyfill_1$1.EventPolyfill));\nProgressEventPolyfill$1.ProgressEventPolyfill = ProgressEventPolyfill;\n\nObject.defineProperty(createEvent$1, \"__esModule\", { value: true });\ncreateEvent$1.createEvent = void 0;\nvar EventPolyfill_1 = EventPolyfill$1;\nvar ProgressEventPolyfill_1 = ProgressEventPolyfill$1;\nvar SUPPORTS_PROGRESS_EVENT = typeof ProgressEvent !== 'undefined';\nfunction createEvent(target, type, init) {\n    var progressEvents = [\n        'error',\n        'progress',\n        'loadstart',\n        'loadend',\n        'load',\n        'timeout',\n        'abort',\n    ];\n    /**\n     * `ProgressEvent` is not supported in React Native.\n     * @see https://github.com/mswjs/interceptors/issues/40\n     */\n    var ProgressEventClass = SUPPORTS_PROGRESS_EVENT\n        ? ProgressEvent\n        : ProgressEventPolyfill_1.ProgressEventPolyfill;\n    var event = progressEvents.includes(type)\n        ? new ProgressEventClass(type, {\n            lengthComputable: true,\n            loaded: (init === null || init === void 0 ? void 0 : init.loaded) || 0,\n            total: (init === null || init === void 0 ? void 0 : init.total) || 0,\n        })\n        : new EventPolyfill_1.EventPolyfill(type, {\n            target: target,\n            currentTarget: target,\n        });\n    return event;\n}\ncreateEvent$1.createEvent = createEvent;\n\nvar __awaiter = (commonjsGlobal && commonjsGlobal.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (commonjsGlobal && commonjsGlobal.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (commonjsGlobal && commonjsGlobal.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (commonjsGlobal && commonjsGlobal.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(XMLHttpRequestOverride, \"__esModule\", { value: true });\nXMLHttpRequestOverride.createXMLHttpRequestOverride = void 0;\n/**\n * XMLHttpRequest override class.\n * Inspired by https://github.com/marvinhagemeister/xhr-mocklet.\n */\nvar until_1 = lib$2;\nvar headers_utils_1 = lib$4;\nvar xmldom_1 = domParser;\nvar parseJson_1 = parseJson$1;\nvar toIsoResponse_1 = toIsoResponse$1;\nvar uuid_1 = uuid;\nvar bufferFrom_1 = bufferFrom$1;\nvar createEvent_1 = createEvent$1;\nvar createDebug = require$$3;\nvar createXMLHttpRequestOverride = function (options) {\n    var _a;\n    var pureXMLHttpRequest = options.pureXMLHttpRequest, observer = options.observer, resolver = options.resolver;\n    var debug = createDebug('XHR');\n    return _a = /** @class */ (function () {\n            function XMLHttpRequestOverride() {\n                // Collection of events modified by `addEventListener`/`removeEventListener` calls.\n                this._events = [];\n                this.UNSENT = 0;\n                this.OPENED = 1;\n                this.HEADERS_RECEIVED = 2;\n                this.LOADING = 3;\n                this.DONE = 4;\n                this.onreadystatechange = null;\n                /* Events */\n                this.onabort = null;\n                this.onerror = null;\n                this.onload = null;\n                this.onloadend = null;\n                this.onloadstart = null;\n                this.onprogress = null;\n                this.ontimeout = null;\n                this.url = '';\n                this.method = 'GET';\n                this.readyState = this.UNSENT;\n                this.withCredentials = false;\n                this.status = 200;\n                this.statusText = 'OK';\n                this.data = '';\n                this.response = '';\n                this.responseType = 'text';\n                this.responseText = '';\n                this.responseXML = null;\n                this.responseURL = '';\n                this.upload = null;\n                this.timeout = 0;\n                this._requestHeaders = new headers_utils_1.Headers();\n                this._responseHeaders = new headers_utils_1.Headers();\n            }\n            XMLHttpRequestOverride.prototype.setReadyState = function (nextState) {\n                if (nextState === this.readyState) {\n                    return;\n                }\n                debug('readyState change %d -> %d', this.readyState, nextState);\n                this.readyState = nextState;\n                if (nextState !== this.UNSENT) {\n                    debug('triggerring readystate change...');\n                    this.trigger('readystatechange');\n                }\n            };\n            /**\n             * Triggers both direct callback and attached event listeners\n             * for the given event.\n             */\n            XMLHttpRequestOverride.prototype.trigger = function (eventName, options) {\n                var e_1, _a;\n                debug('trigger \"%s\" (%d)', eventName, this.readyState);\n                debug('resolve listener for event \"%s\"', eventName);\n                // @ts-expect-error XMLHttpRequest class has no index signature.\n                var callback = this[\"on\" + eventName];\n                callback === null || callback === void 0 ? void 0 : callback.call(this, createEvent_1.createEvent(this, eventName, options));\n                try {\n                    for (var _b = __values(this._events), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var event_1 = _c.value;\n                        if (event_1.name === eventName) {\n                            debug('calling mock event listener \"%s\" (%d)', eventName, this.readyState);\n                            event_1.listener.call(this, createEvent_1.createEvent(this, eventName, options));\n                        }\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                return this;\n            };\n            XMLHttpRequestOverride.prototype.reset = function () {\n                debug('reset');\n                this.setReadyState(this.UNSENT);\n                this.status = 200;\n                this.statusText = 'OK';\n                this.data = '';\n                this.response = null;\n                this.responseText = null;\n                this.responseXML = null;\n                this._requestHeaders = new headers_utils_1.Headers();\n                this._responseHeaders = new headers_utils_1.Headers();\n            };\n            XMLHttpRequestOverride.prototype.open = function (method, url, async, user, password) {\n                if (async === void 0) { async = true; }\n                return __awaiter(this, void 0, void 0, function () {\n                    return __generator(this, function (_a) {\n                        debug = createDebug(\"XHR \" + method + \" \" + url);\n                        debug('open', { method: method, url: url, async: async, user: user, password: password });\n                        this.reset();\n                        this.setReadyState(this.OPENED);\n                        if (typeof url === 'undefined') {\n                            this.url = method;\n                            this.method = 'GET';\n                        }\n                        else {\n                            this.url = url;\n                            this.method = method;\n                            this.async = async;\n                            this.user = user;\n                            this.password = password;\n                        }\n                        return [2 /*return*/];\n                    });\n                });\n            };\n            XMLHttpRequestOverride.prototype.send = function (data) {\n                var _this = this;\n                debug('send %s %s', this.method, this.url);\n                this.data = data || '';\n                var url;\n                try {\n                    url = new URL(this.url);\n                }\n                catch (error) {\n                    // Assume a relative URL, if construction of a new `URL` instance fails.\n                    // Since `XMLHttpRequest` always executed in a DOM-like environment,\n                    // resolve the relative request URL against the current window location.\n                    url = new URL(this.url, window.location.href);\n                }\n                debug('request headers', this._requestHeaders);\n                // Create an intercepted request instance exposed to the request intercepting middleware.\n                var isoRequest = {\n                    id: uuid_1.uuidv4(),\n                    url: url,\n                    method: this.method,\n                    body: this.data,\n                    headers: this._requestHeaders,\n                };\n                observer.emit('request', isoRequest);\n                debug('awaiting mocked response...');\n                Promise.resolve(until_1.until(function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\n                    return [2 /*return*/, resolver(isoRequest, this)];\n                }); }); })).then(function (_a) {\n                    var _b;\n                    var _c = __read(_a, 2), middlewareException = _c[0], mockedResponse = _c[1];\n                    // When the request middleware throws an exception, error the request.\n                    // This cancels the request and is similar to a network error.\n                    if (middlewareException) {\n                        debug('middleware function threw an exception!', middlewareException);\n                        // No way to propagate the actual error message.\n                        _this.trigger('error');\n                        _this.abort();\n                        return;\n                    }\n                    // Return a mocked response, if provided in the middleware.\n                    if (mockedResponse) {\n                        debug('received mocked response', mockedResponse);\n                        // Trigger a loadstart event to indicate the initialization of the fetch.\n                        _this.trigger('loadstart');\n                        _this.status = mockedResponse.status || 200;\n                        _this.statusText = mockedResponse.statusText || 'OK';\n                        _this._responseHeaders = mockedResponse.headers\n                            ? headers_utils_1.objectToHeaders(mockedResponse.headers)\n                            : new headers_utils_1.Headers();\n                        debug('set response status', _this.status, _this.statusText);\n                        debug('set response headers', _this._responseHeaders);\n                        // Mark that response headers has been received\n                        // and trigger a ready state event to reflect received headers\n                        // in a custom `onreadystatechange` callback.\n                        _this.setReadyState(_this.HEADERS_RECEIVED);\n                        debug('response type', _this.responseType);\n                        _this.response = _this.getResponseBody(mockedResponse.body);\n                        _this.responseText = mockedResponse.body || '';\n                        _this.responseXML = _this.getResponseXML();\n                        debug('set response body', _this.response);\n                        if (mockedResponse.body && _this.response) {\n                            _this.setReadyState(_this.LOADING);\n                            // Presense of the mocked response implies a response body (not null).\n                            // Presense of the coerced `this.response` implies the mocked body is valid.\n                            var bodyBuffer = bufferFrom_1.bufferFrom(mockedResponse.body);\n                            // Trigger a progress event based on the mocked response body.\n                            _this.trigger('progress', {\n                                loaded: bodyBuffer.length,\n                                total: bodyBuffer.length,\n                            });\n                        }\n                        /**\n                         * Explicitly mark the request as done so its response never hangs.\n                         * @see https://github.com/mswjs/interceptors/issues/13\n                         */\n                        _this.setReadyState(_this.DONE);\n                        // Trigger a load event to indicate the fetch has succeeded.\n                        _this.trigger('load');\n                        // Trigger a loadend event to indicate the fetch has completed.\n                        _this.trigger('loadend');\n                        observer.emit('response', isoRequest, toIsoResponse_1.toIsoResponse(mockedResponse));\n                    }\n                    else {\n                        debug('no mocked response received!');\n                        // Perform an original request, when the request middleware returned no mocked response.\n                        var originalRequest_1 = new pureXMLHttpRequest();\n                        debug('opening an original request %s %s', _this.method, _this.url);\n                        originalRequest_1.open(_this.method, _this.url, (_b = _this.async) !== null && _b !== void 0 ? _b : true, _this.user, _this.password);\n                        // Reflect a successful state of the original request\n                        // on the patched instance.\n                        originalRequest_1.addEventListener('load', function () {\n                            debug('original \"onload\"');\n                            _this.status = originalRequest_1.status;\n                            _this.statusText = originalRequest_1.statusText;\n                            _this.responseURL = originalRequest_1.responseURL;\n                            _this.responseType = originalRequest_1.responseType;\n                            _this.response = originalRequest_1.response;\n                            _this.responseText = originalRequest_1.responseText;\n                            _this.responseXML = originalRequest_1.responseXML;\n                            debug('set mock request readyState to DONE');\n                            // Explicitly mark the mocked request instance as done\n                            // so the response never hangs.\n                            /**\n                             * @note `readystatechange` listener is called TWICE\n                             * in the case of unhandled request.\n                             */\n                            _this.setReadyState(_this.DONE);\n                            debug('received original response', _this.status, _this.statusText);\n                            debug('original response body:', _this.response);\n                            var responseHeaders = originalRequest_1.getAllResponseHeaders();\n                            debug('original response headers:\\n', responseHeaders);\n                            _this._responseHeaders = headers_utils_1.stringToHeaders(responseHeaders);\n                            debug('original response headers (normalized)', _this._responseHeaders);\n                            debug('original response finished');\n                            observer.emit('response', isoRequest, {\n                                status: originalRequest_1.status,\n                                statusText: originalRequest_1.statusText,\n                                headers: _this._responseHeaders,\n                                body: originalRequest_1.response,\n                            });\n                        });\n                        // Assign callbacks and event listeners from the intercepted XHR instance\n                        // to the original XHR instance.\n                        _this.propagateCallbacks(originalRequest_1);\n                        _this.propagateListeners(originalRequest_1);\n                        _this.propagateHeaders(originalRequest_1, _this._requestHeaders);\n                        if (_this.async) {\n                            originalRequest_1.timeout = _this.timeout;\n                        }\n                        debug('send', _this.data);\n                        originalRequest_1.send(_this.data);\n                    }\n                });\n            };\n            XMLHttpRequestOverride.prototype.abort = function () {\n                debug('abort');\n                if (this.readyState > this.UNSENT && this.readyState < this.DONE) {\n                    this.setReadyState(this.UNSENT);\n                    this.trigger('abort');\n                }\n            };\n            XMLHttpRequestOverride.prototype.dispatchEvent = function () {\n                return false;\n            };\n            XMLHttpRequestOverride.prototype.setRequestHeader = function (name, value) {\n                debug('set request header \"%s\" to \"%s\"', name, value);\n                this._requestHeaders.append(name, value);\n            };\n            XMLHttpRequestOverride.prototype.getResponseHeader = function (name) {\n                debug('get response header \"%s\"', name);\n                if (this.readyState < this.HEADERS_RECEIVED) {\n                    debug('cannot return a header: headers not received (state: %s)', this.readyState);\n                    return null;\n                }\n                var headerValue = this._responseHeaders.get(name);\n                debug('resolved response header \"%s\" to \"%s\"', name, headerValue, this._responseHeaders);\n                return headerValue;\n            };\n            XMLHttpRequestOverride.prototype.getAllResponseHeaders = function () {\n                debug('get all response headers');\n                if (this.readyState < this.HEADERS_RECEIVED) {\n                    debug('cannot return headers: headers not received (state: %s)', this.readyState);\n                    return '';\n                }\n                return headers_utils_1.headersToString(this._responseHeaders);\n            };\n            XMLHttpRequestOverride.prototype.addEventListener = function (name, listener) {\n                debug('addEventListener', name, listener);\n                this._events.push({\n                    name: name,\n                    listener: listener,\n                });\n            };\n            XMLHttpRequestOverride.prototype.removeEventListener = function (name, listener) {\n                debug('removeEventListener', name, listener);\n                this._events = this._events.filter(function (storedEvent) {\n                    return storedEvent.name !== name && storedEvent.listener !== listener;\n                });\n            };\n            XMLHttpRequestOverride.prototype.overrideMimeType = function () { };\n            /**\n             * Resolves the response based on the `responseType` value.\n             */\n            XMLHttpRequestOverride.prototype.getResponseBody = function (body) {\n                // Handle an improperly set \"null\" value of the mocked response body.\n                var textBody = body !== null && body !== void 0 ? body : '';\n                debug('coerced response body to', textBody);\n                switch (this.responseType) {\n                    case 'json': {\n                        debug('resolving response body as JSON');\n                        return parseJson_1.parseJson(textBody);\n                    }\n                    case 'blob': {\n                        var blobType = this.getResponseHeader('content-type') || 'text/plain';\n                        debug('resolving response body as Blob', { type: blobType });\n                        return new Blob([textBody], {\n                            type: blobType,\n                        });\n                    }\n                    case 'arraybuffer': {\n                        debug('resolving response body as ArrayBuffer');\n                        var arrayBuffer = bufferFrom_1.bufferFrom(textBody);\n                        return arrayBuffer;\n                    }\n                    default:\n                        return textBody;\n                }\n            };\n            XMLHttpRequestOverride.prototype.getResponseXML = function () {\n                var contentType = this.getResponseHeader('Content-Type');\n                if (contentType === 'application/xml' || contentType === 'text/xml') {\n                    return new xmldom_1.DOMParser().parseFromString(this.responseText, contentType);\n                }\n                return null;\n            };\n            /**\n             * Propagates mock XMLHttpRequest instance callbacks\n             * to the given XMLHttpRequest instance.\n             */\n            XMLHttpRequestOverride.prototype.propagateCallbacks = function (request) {\n                request.onabort = this.abort;\n                request.onerror = this.onerror;\n                request.ontimeout = this.ontimeout;\n                request.onload = this.onload;\n                request.onloadstart = this.onloadstart;\n                request.onloadend = this.onloadend;\n                request.onprogress = this.onprogress;\n                request.onreadystatechange = this.onreadystatechange;\n            };\n            /**\n             * Propagates the mock XMLHttpRequest instance listeners\n             * to the given XMLHttpRequest instance.\n             */\n            XMLHttpRequestOverride.prototype.propagateListeners = function (request) {\n                debug('propagating request listeners (%d) to the original request', this._events.length, this._events);\n                this._events.forEach(function (_a) {\n                    var name = _a.name, listener = _a.listener;\n                    request.addEventListener(name, listener);\n                });\n            };\n            XMLHttpRequestOverride.prototype.propagateHeaders = function (request, headers) {\n                debug('propagating request headers to the original request', headers);\n                // Preserve the request headers casing.\n                Object.entries(headers.raw()).forEach(function (_a) {\n                    var _b = __read(_a, 2), name = _b[0], value = _b[1];\n                    debug('setting \"%s\" (%s) header on the original request', name, value);\n                    request.setRequestHeader(name, value);\n                });\n            };\n            return XMLHttpRequestOverride;\n        }()),\n        /* Request state */\n        _a.UNSENT = 0,\n        _a.OPENED = 1,\n        _a.HEADERS_RECEIVED = 2,\n        _a.LOADING = 3,\n        _a.DONE = 4,\n        _a;\n};\nXMLHttpRequestOverride.createXMLHttpRequestOverride = createXMLHttpRequestOverride;\n\nObject.defineProperty(XMLHttpRequest, \"__esModule\", { value: true });\nvar interceptXMLHttpRequest_1 = XMLHttpRequest.interceptXMLHttpRequest = void 0;\nvar XMLHttpRequestOverride_1 = XMLHttpRequestOverride;\nvar debug = require$$3('XHR');\nvar pureXMLHttpRequest = \n// Although executed in node, certain processes emulate the DOM-like environment\n// (i.e. `js-dom` in Jest). The `window` object would be avilable in such environments.\ntypeof window === 'undefined' ? undefined : window.XMLHttpRequest;\n/**\n * Intercepts requests issued via `XMLHttpRequest`.\n */\nvar interceptXMLHttpRequest = function (observer, resolver) {\n    if (pureXMLHttpRequest) {\n        debug('patching \"XMLHttpRequest\" module...');\n        var XMLHttpRequestOverride = XMLHttpRequestOverride_1.createXMLHttpRequestOverride({\n            pureXMLHttpRequest: pureXMLHttpRequest,\n            observer: observer,\n            resolver: resolver,\n        });\n        window.XMLHttpRequest = XMLHttpRequestOverride;\n    }\n    return function () {\n        if (pureXMLHttpRequest) {\n            debug('restoring modules...');\n            window.XMLHttpRequest = pureXMLHttpRequest;\n        }\n    };\n};\ninterceptXMLHttpRequest_1 = XMLHttpRequest.interceptXMLHttpRequest = interceptXMLHttpRequest;\n\nfunction uuidv4() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        const r = (Math.random() * 16) | 0;\r\n        const v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\n\n/**\r\n * Converts a given isomorphic request to a `MockedRequest` instance.\r\n */\r\nfunction parseIsomorphicRequest(request) {\r\n    const requestId = uuidv4();\r\n    request.headers.set('x-msw-request-id', requestId);\r\n    const mockedRequest = {\r\n        id: requestId,\r\n        url: request.url,\r\n        method: request.method,\r\n        body: parseBody(request.body, request.headers),\r\n        headers: request.headers,\r\n        cookies: {},\r\n        redirect: 'manual',\r\n        referrer: '',\r\n        keepalive: false,\r\n        cache: 'default',\r\n        mode: 'cors',\r\n        referrerPolicy: 'no-referrer',\r\n        integrity: '',\r\n        destination: 'document',\r\n        bodyUsed: false,\r\n        credentials: 'same-origin',\r\n    };\r\n    // Set mocked request cookies from the `cookie` header of the original request.\r\n    // No need to take `credentials` into account, because in Node.js requests are intercepted\r\n    // _after_ they happen. Request issuer should have already taken care of sending relevant cookies.\r\n    // Unlike browser, where interception is on the worker level, _before_ the request happens.\r\n    const requestCookiesString = request.headers.get('cookie');\r\n    // Attach all the cookies from the virtual cookie store.\r\n    setRequestCookies(mockedRequest);\r\n    const requestCookies = requestCookiesString\r\n        ? parse_1(requestCookiesString)\r\n        : {};\r\n    // Merge both direct request cookies and the cookies inherited\r\n    // from other same-origin requests in the cookie store.\r\n    mockedRequest.cookies = Object.assign(Object.assign({}, mockedRequest.cookies), requestCookies);\r\n    return mockedRequest;\r\n}\n\nfunction createFallbackRequestListener(context, options) {\r\n    const interceptor = lib.createInterceptor({\r\n        modules: [interceptFetch_1, interceptXMLHttpRequest_1],\r\n        resolver(request) {\r\n            return __awaiter$3(this, void 0, void 0, function* () {\r\n                const mockedRequest = parseIsomorphicRequest(request);\r\n                return handleRequest(mockedRequest, context.requestHandlers, options, context.emitter, {\r\n                    transformResponse(response) {\r\n                        return {\r\n                            status: response.status,\r\n                            statusText: response.statusText,\r\n                            headers: response.headers.all(),\r\n                            body: response.body,\r\n                        };\r\n                    },\r\n                    onMockedResponseSent(response, { handler, publicRequest, parsedRequest }) {\r\n                        if (!options.quiet) {\r\n                            handler.log(publicRequest, response, handler, parsedRequest);\r\n                        }\r\n                    },\r\n                });\r\n            });\r\n        },\r\n    });\r\n    interceptor.apply();\r\n    return interceptor;\r\n}\n\nfunction createFallbackStart(context) {\r\n    return function start(options) {\r\n        return __awaiter$3(this, void 0, void 0, function* () {\r\n            context.fallbackInterceptor = createFallbackRequestListener(context, options);\r\n            printStartMessage({\r\n                message: 'Mocking enabled (fallback mode).',\r\n                quiet: options.quiet,\r\n            });\r\n            return undefined;\r\n        });\r\n    };\r\n}\n\nfunction createFallbackStop(context) {\r\n    return function stop() {\r\n        var _a, _b;\r\n        (_a = context.fallbackInterceptor) === null || _a === void 0 ? void 0 : _a.restore();\r\n        printStopMessage({ quiet: (_b = context.startOptions) === null || _b === void 0 ? void 0 : _b.quiet });\r\n    };\r\n}\n\n/**\r\n * Pipes all emitted events from one emitter to another.\r\n */\r\nfunction pipeEvents(source, destination) {\r\n    const rawEmit = source.emit;\r\n    // @ts-ignore\r\n    if (rawEmit._isPiped) {\r\n        return;\r\n    }\r\n    source.emit = function (event, ...data) {\r\n        destination.emit(event, ...data);\r\n        return rawEmit.call(this, event, ...data);\r\n    };\r\n    // @ts-ignore\r\n    source.emit._isPiped = true;\r\n}\n\n// Declare the list of event handlers on the module's scope\r\n// so it persists between Fash refreshes of the application's code.\r\nlet listeners = [];\r\n/**\r\n * Creates a new mock Service Worker registration\r\n * with the given request handlers.\r\n * @param {RequestHandler[]} requestHandlers List of request handlers\r\n * @see {@link https://mswjs.io/docs/api/setup-worker `setupWorker`}\r\n */\r\nfunction setupWorker(...requestHandlers) {\r\n    requestHandlers.forEach((handler) => {\r\n        if (Array.isArray(handler))\r\n            throw new Error(devUtils.formatMessage('Failed to call \"setupWorker\" given an Array of request handlers (setupWorker([a, b])), expected to receive each handler individually: setupWorker(a, b).'));\r\n    });\r\n    // Error when attempting to run this function in a Node.js environment.\r\n    if (lib$6.exports.isNodeProcess()) {\r\n        throw new Error(devUtils.formatMessage('Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.'));\r\n    }\r\n    const emitter = new lib$3.StrictEventEmitter();\r\n    const publicEmitter = new lib$3.StrictEventEmitter();\r\n    pipeEvents(emitter, publicEmitter);\r\n    const context = {\r\n        startOptions: undefined,\r\n        worker: null,\r\n        registration: null,\r\n        requestHandlers: [...requestHandlers],\r\n        emitter,\r\n        workerChannel: {\r\n            on(eventType, callback) {\r\n                context.events.addListener(navigator.serviceWorker, 'message', (event) => {\r\n                    // Avoid messages broadcasted from unrelated workers.\r\n                    if (event.source !== context.worker) {\r\n                        return;\r\n                    }\r\n                    const message = jsonParse(event.data);\r\n                    if (!message) {\r\n                        return;\r\n                    }\r\n                    if (message.type === eventType) {\r\n                        callback(event, message);\r\n                    }\r\n                });\r\n            },\r\n            send(type) {\r\n                var _a;\r\n                (_a = context.worker) === null || _a === void 0 ? void 0 : _a.postMessage(type);\r\n            },\r\n        },\r\n        events: {\r\n            addListener(target, eventType, callback) {\r\n                target.addEventListener(eventType, callback);\r\n                listeners.push({ eventType, target, callback });\r\n                return () => {\r\n                    target.removeEventListener(eventType, callback);\r\n                };\r\n            },\r\n            removeAllListeners() {\r\n                for (const { target, eventType, callback } of listeners) {\r\n                    target.removeEventListener(eventType, callback);\r\n                }\r\n                listeners = [];\r\n            },\r\n            once(eventType) {\r\n                const bindings = [];\r\n                return new Promise((resolve, reject) => {\r\n                    const handleIncomingMessage = (event) => {\r\n                        try {\r\n                            const message = JSON.parse(event.data);\r\n                            if (message.type === eventType) {\r\n                                resolve(message);\r\n                            }\r\n                        }\r\n                        catch (error) {\r\n                            reject(error);\r\n                        }\r\n                    };\r\n                    bindings.push(context.events.addListener(navigator.serviceWorker, 'message', handleIncomingMessage), context.events.addListener(navigator.serviceWorker, 'messageerror', reject));\r\n                }).finally(() => {\r\n                    bindings.forEach((unbind) => unbind());\r\n                });\r\n            },\r\n        },\r\n        useFallbackMode: !('serviceWorker' in navigator) || location.protocol === 'file:',\r\n    };\r\n    const startHandler = context.useFallbackMode\r\n        ? createFallbackStart(context)\r\n        : createStartHandler(context);\r\n    const stopHandler = context.useFallbackMode\r\n        ? createFallbackStop(context)\r\n        : createStop(context);\r\n    return {\r\n        start: prepareStartHandler(startHandler, context),\r\n        stop() {\r\n            context.events.removeAllListeners();\r\n            context.emitter.removeAllListeners();\r\n            publicEmitter.removeAllListeners();\r\n            stopHandler();\r\n        },\r\n        use(...handlers) {\r\n            use(context.requestHandlers, ...handlers);\r\n        },\r\n        restoreHandlers() {\r\n            restoreHandlers(context.requestHandlers);\r\n        },\r\n        resetHandlers(...nextHandlers) {\r\n            context.requestHandlers = resetHandlers(requestHandlers, ...nextHandlers);\r\n        },\r\n        printHandlers() {\r\n            context.requestHandlers.forEach((handler) => {\r\n                const { header, callFrame } = handler.info;\r\n                const pragma = handler.info.hasOwnProperty('operationType')\r\n                    ? '[graphql]'\r\n                    : '[rest]';\r\n                console.groupCollapsed(`${pragma} ${header}`);\r\n                if (callFrame) {\r\n                    console.log(`Declaration: ${callFrame}`);\r\n                }\r\n                console.log('Handler:', handler);\r\n                if (handler instanceof RestHandler) {\r\n                    console.log('Match:', `https://mswjs.io/repl?path=${handler.info.path}`);\r\n                }\r\n                console.groupEnd();\r\n            });\r\n        },\r\n        events: {\r\n            on(...args) {\r\n                return publicEmitter.on(...args);\r\n            },\r\n            removeListener(...args) {\r\n                return publicEmitter.removeListener(...args);\r\n            },\r\n            removeAllListeners(...args) {\r\n                return publicEmitter.removeAllListeners(...args);\r\n            },\r\n        },\r\n    };\r\n}\n\nexport { handleRequest, parseIsomorphicRequest, setupWorker };\n"],"mappings":"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AAG,CAAC,CAAC;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,MAAMA,CAACC,MAAM,EAAEC,EAAE,EAAE;EAC3B,IAAIA,EAAE,KAAKniB,SAAS,EAAE;IACrBmiB,EAAE,GAAGnjB,MAAM;EACZ;EACA,OAAOmjB,EAAE,IAAI,OAAOA,EAAE,CAACF,MAAM,KAAK,UAAU,GAAGE,EAAE,CAACF,MAAM,CAACC,MAAM,CAAC,GAAGA,MAAM;AAC1E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIE,SAAS,GAAGH,MAAM,CAAC;EACtB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCI,IAAI,EAAE,WAAW;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCC,MAAM,EAAE,SAAAA,CAAU3iB,KAAK,EAAE;IACxB,OAAOA,KAAK,KAAKyiB,SAAS,CAACC,IAAI;EAChC,CAAC;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCE,eAAe,EAAE,iBAAiB;EAElC;AACD;AACA;AACA;AACA;AACA;AACA;EACCC,QAAQ,EAAE,UAAU;EAEpB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCC,qBAAqB,EAAE,uBAAuB;EAE9C;AACD;AACA;AACA;AACA;AACA;AACA;EACCC,aAAa,EAAE;AAChB,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAIC,WAAW,GAAGV,MAAM,CAAC;EACxB;AACD;AACA;AACA;AACA;EACCI,IAAI,EAAE,8BAA8B;EAEpC;AACD;AACA;AACA;AACA;AACA;AACA;EACCC,MAAM,EAAE,SAAAA,CAAUM,GAAG,EAAE;IACtB,OAAOA,GAAG,KAAKD,WAAW,CAACN,IAAI;EAChC,CAAC;EAED;AACD;AACA;AACA;AACA;EACCQ,GAAG,EAAE,4BAA4B;EAEjC;AACD;AACA;AACA;AACA;EACCC,GAAG,EAAE,sCAAsC;EAE3C;AACD;AACA;AACA;AACA;EACCC,K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"},"metadata":{},"sourceType":"module"}