{"ast":null,"code":"var _jsxFileName = \"/workspace/pp5-tick-off-frontend/src/components/StatusUpdateForm.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport Form from 'react-bootstrap/Form';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst status_choices = {\n  BACKLOG: \"Backlog\",\n  TODO: \"To Do\",\n  INPROGRESS: \"In Progress\",\n  COMPLETED: \"Completed\"\n};\nfunction FormSelect() {\n  /*#__PURE__*/_jsxDEV(Form.Select, {\n    value: newStatus,\n    onChange: handleStatusChange,\n    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n      value: \"\",\n      children: \"Select task status\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }, this), Object.keys(status_choices).map(status => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: status,\n      children: status_choices[status]\n    }, status, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }, this);\n}\n_c = FormSelect;\nconst StatusUpdateForm = _ref => {\n  _s();\n  let {\n    taskId,\n    currentStatus,\n    onUpdateStatus\n  } = _ref;\n  const [newStatus, setNewStatus] = useState(currentStatus);\n  const [loading, setLoading] = useState(false);\n  const handleStatusChange = e => {\n    setNewStatus(e.target.value);\n  };\n  const submitForm = useCallback(async () => {\n    setLoading(true);\n    try {\n      await axios.patch(`/tasks/${taskId}/`, {\n        task_status: newStatus\n      });\n      onUpdateStatus(newStatus);\n    } catch (err) {\n      // Handle error\n    }\n    setLoading(false);\n  }, [taskId, newStatus, onUpdateStatus]);\n  useEffect(() => {\n    if (newStatus !== currentStatus && newStatus !== \"\") {\n      submitForm();\n    }\n  }, [newStatus, currentStatus, submitForm]);\n  return /*#__PURE__*/_jsxDEV(Form, {\n    children: /*#__PURE__*/_jsxDEV(FormSelect, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(StatusUpdateForm, \"iXRMmtGJM7/tIeiekLuejwBe4m0=\");\n_c2 = StatusUpdateForm;\nexport default StatusUpdateForm;\nvar _c, _c2;\n$RefreshReg$(_c, \"FormSelect\");\n$RefreshReg$(_c2, \"StatusUpdateForm\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","Form","axios","jsxDEV","_jsxDEV","status_choices","BACKLOG","TODO","INPROGRESS","COMPLETED","FormSelect","Select","value","newStatus","onChange","handleStatusChange","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","keys","map","status","_c","StatusUpdateForm","_ref","_s","taskId","currentStatus","onUpdateStatus","setNewStatus","loading","setLoading","e","target","submitForm","patch","task_status","err","_c2","$RefreshReg$"],"sources":["/workspace/pp5-tick-off-frontend/src/components/StatusUpdateForm.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport Form from 'react-bootstrap/Form';\n\nimport axios from \"axios\";\n\nconst status_choices = {\n  BACKLOG: \"Backlog\",\n  TODO: \"To Do\",\n  INPROGRESS: \"In Progress\",\n  COMPLETED: \"Completed\",\n};\n\nfunction FormSelect() {\n    <Form.Select value={newStatus} onChange={handleStatusChange}>\n      <option value=\"\">Select task status</option>\n      {Object.keys(status_choices).map((status) => (\n        <option key={status} value={status}>\n          {status_choices[status]}\n        </option>\n      ))}\n    </Form.Select>\n  }\n\n  \nconst StatusUpdateForm = ({ taskId, currentStatus, onUpdateStatus }) => {\n  const [newStatus, setNewStatus] = useState(currentStatus);\n  const [loading, setLoading] = useState(false);\n\n  const handleStatusChange = (e) => {\n    setNewStatus(e.target.value);\n  };\n\n  const submitForm = useCallback(async () => {\n    setLoading(true);\n    try {\n      await axios.patch(`/tasks/${taskId}/`, { task_status: newStatus });\n      onUpdateStatus(newStatus);\n    } catch (err) {\n      // Handle error\n    }\n    setLoading(false);\n  }, [taskId, newStatus, onUpdateStatus]);\n\n  useEffect(() => {\n    if (newStatus !== currentStatus && newStatus !== \"\") {\n      submitForm();\n    }\n  }, [newStatus, currentStatus, submitForm]);\n\n  return (\n    <Form>\n      <FormSelect/>\n    </Form>\n  );\n};\n\nexport default StatusUpdateForm;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC/D,OAAOC,IAAI,MAAM,sBAAsB;AAEvC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,cAAc,GAAG;EACrBC,OAAO,EAAE,SAAS;EAClBC,IAAI,EAAE,OAAO;EACbC,UAAU,EAAE,aAAa;EACzBC,SAAS,EAAE;AACb,CAAC;AAED,SAASC,UAAUA,CAAA,EAAG;EAClB,aAAAN,OAAA,CAACH,IAAI,CAACU,MAAM;IAACC,KAAK,EAAEC,SAAU;IAACC,QAAQ,EAAEC,kBAAmB;IAAAC,QAAA,gBAC1DZ,OAAA;MAAQQ,KAAK,EAAC,EAAE;MAAAI,QAAA,EAAC;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAC3CC,MAAM,CAACC,IAAI,CAACjB,cAAc,CAAC,CAACkB,GAAG,CAAEC,MAAM,iBACtCpB,OAAA;MAAqBQ,KAAK,EAAEY,MAAO;MAAAR,QAAA,EAChCX,cAAc,CAACmB,MAAM;IAAC,GADZA,MAAM;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEX,CACT,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAChB;AAACK,EAAA,GATMf,UAAU;AAYnB,MAAMgB,gBAAgB,GAAGC,IAAA,IAA+C;EAAAC,EAAA;EAAA,IAA9C;IAAEC,MAAM;IAAEC,aAAa;IAAEC;EAAe,CAAC,GAAAJ,IAAA;EACjE,MAAM,CAACd,SAAS,EAAEmB,YAAY,CAAC,GAAGjC,QAAQ,CAAC+B,aAAa,CAAC;EACzD,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMgB,kBAAkB,GAAIoB,CAAC,IAAK;IAChCH,YAAY,CAACG,CAAC,CAACC,MAAM,CAACxB,KAAK,CAAC;EAC9B,CAAC;EAED,MAAMyB,UAAU,GAAGrC,WAAW,CAAC,YAAY;IACzCkC,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMhC,KAAK,CAACoC,KAAK,CAAE,UAAST,MAAO,GAAE,EAAE;QAAEU,WAAW,EAAE1B;MAAU,CAAC,CAAC;MAClEkB,cAAc,CAAClB,SAAS,CAAC;IAC3B,CAAC,CAAC,OAAO2B,GAAG,EAAE;MACZ;IAAA;IAEFN,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC,EAAE,CAACL,MAAM,EAAEhB,SAAS,EAAEkB,cAAc,CAAC,CAAC;EAEvCjC,SAAS,CAAC,MAAM;IACd,IAAIe,SAAS,KAAKiB,aAAa,IAAIjB,SAAS,KAAK,EAAE,EAAE;MACnDwB,UAAU,CAAC,CAAC;IACd;EACF,CAAC,EAAE,CAACxB,SAAS,EAAEiB,aAAa,EAAEO,UAAU,CAAC,CAAC;EAE1C,oBACEjC,OAAA,CAACH,IAAI;IAAAe,QAAA,eACHZ,OAAA,CAACM,UAAU;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACT,CAAC;AAEX,CAAC;AAACQ,EAAA,CA9BIF,gBAAgB;AAAAe,GAAA,GAAhBf,gBAAgB;AAgCtB,eAAeA,gBAAgB;AAAC,IAAAD,EAAA,EAAAgB,GAAA;AAAAC,YAAA,CAAAjB,EAAA;AAAAiB,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module"}